!SESSION 2020-06-02 11:53:20.084 -----------------------------------------------
eclipse.buildId=4.6.1.M20160907-1200
java.version=1.8.0_112
java.vendor=Oracle Corporation
BootLoader constants: OS=win32, ARCH=x86_64, WS=win32, NL=it_IT
Framework arguments:  -product org.eclipse.epp.package.jee.product
Command-line arguments:  -os win32 -ws win32 -arch x86_64 -product org.eclipse.epp.package.jee.product

This is a continuation of log file C:\Workspaces\ialab2020\ialab_2020\Torta\aima-core\.metadata\.bak_0.log
Created Time: 2020-06-05 12:48:52.149

!ENTRY org.eclipse.jdt.ui 4 0 2020-06-05 12:48:52.150
!MESSAGE Error in JDT Core during reconcile
!STACK 0
java.lang.IllegalArgumentException
	at org.eclipse.jdt.core.dom.ASTNode.setSourceRange(ASTNode.java:2845)
	at org.eclipse.jdt.core.dom.ASTConverter.convert(ASTConverter.java:2208)
	at org.eclipse.jdt.core.dom.ASTConverter.convert(ASTConverter.java:1781)
	at org.eclipse.jdt.core.dom.ASTConverter.convertToParenthesizedExpression(ASTConverter.java:3238)
	at org.eclipse.jdt.core.dom.ASTConverter.convert(ASTConverter.java:1684)
	at org.eclipse.jdt.core.dom.ASTConverter.convert(ASTConverter.java:1091)
	at org.eclipse.jdt.core.dom.ASTConverter.convert(ASTConverter.java:1715)
	at org.eclipse.jdt.core.dom.ASTConverter.convert(ASTConverter.java:2758)
	at org.eclipse.jdt.core.dom.ASTConverter.convert(ASTConverter.java:639)
	at org.eclipse.jdt.core.dom.ASTConverter.buildBodyDeclarations(ASTConverter.java:195)
	at org.eclipse.jdt.core.dom.ASTConverter.convert(ASTConverter.java:2965)
	at org.eclipse.jdt.core.dom.ASTConverter.convert(ASTConverter.java:1374)
	at org.eclipse.jdt.core.dom.AST.convertCompilationUnit(AST.java:270)
	at org.eclipse.jdt.internal.core.ReconcileWorkingCopyOperation.makeConsistent(ReconcileWorkingCopyOperation.java:207)
	at org.eclipse.jdt.internal.core.ReconcileWorkingCopyOperation.executeOperation(ReconcileWorkingCopyOperation.java:90)
	at org.eclipse.jdt.internal.core.JavaModelOperation.run(JavaModelOperation.java:724)
	at org.eclipse.jdt.internal.core.JavaModelOperation.runOperation(JavaModelOperation.java:790)
	at org.eclipse.jdt.internal.core.CompilationUnit.reconcile(CompilationUnit.java:1250)
	at org.eclipse.jdt.internal.ui.text.java.JavaReconcilingStrategy.reconcile(JavaReconcilingStrategy.java:128)
	at org.eclipse.jdt.internal.ui.text.java.JavaReconcilingStrategy.access$0(JavaReconcilingStrategy.java:110)
	at org.eclipse.jdt.internal.ui.text.java.JavaReconcilingStrategy$1.run(JavaReconcilingStrategy.java:90)
	at org.eclipse.core.runtime.SafeRunner.run(SafeRunner.java:42)
	at org.eclipse.jdt.internal.ui.text.java.JavaReconcilingStrategy.reconcile(JavaReconcilingStrategy.java:87)
	at org.eclipse.jdt.internal.ui.text.java.JavaReconcilingStrategy.reconcile(JavaReconcilingStrategy.java:162)
	at org.eclipse.jdt.internal.ui.text.CompositeReconcilingStrategy.reconcile(CompositeReconcilingStrategy.java:77)
	at org.eclipse.jdt.internal.ui.text.JavaCompositeReconcilingStrategy.reconcile(JavaCompositeReconcilingStrategy.java:82)
	at org.eclipse.jface.text.reconciler.MonoReconciler.process(MonoReconciler.java:69)
	at org.eclipse.jface.text.reconciler.AbstractReconciler$BackgroundThread.run(AbstractReconciler.java:207)

!ENTRY org.eclipse.jdt.core 4 4 2020-06-05 12:48:52.181
!MESSAGE Exception occurred during compilation unit conversion:
----------------------------------- SOURCE BEGIN -------------------------------------
package it.coluccia.ialab2020.torta.project;

import java.util.ArrayList;
import java.util.Arrays;
import java.util.HashSet;
import java.util.Iterator;
import java.util.LinkedList;
import java.util.List;
import java.util.Map;
import java.util.Set;

import aima.core.probability.Factor;
import aima.core.probability.RandomVariable;
import aima.core.probability.TimeRandomVariable;
import aima.core.probability.bayes.DynamicBayesianNetwork;
import aima.core.probability.bayes.Node;
import aima.core.probability.bayes.approx.ParticleFiltering;
import aima.core.probability.bayes.exact.EliminationAsk;
import aima.core.probability.bayes.impl.BayesNet;
import aima.core.probability.bayes.impl.DynamicBayesNet;
import aima.core.probability.bayes.impl.IalabDBN;
import aima.core.probability.domain.BooleanDomain;
import aima.core.probability.example.DynamicBayesNetExampleFactory;
import aima.core.probability.proposition.AssignmentProposition;
import aima.core.probability.util.ProbabilityTable;
import aima.core.probability.util.RandVar;

public class DynamicBNExercise {
	
	private static List<DynamicBayesianNetwork> networks;
	
	//queryVars[i] --> list of query vars for network i
	private static List<TimeRandomVariable[]> queryVars;
	
	//observations[i] --> list of array of observation for network experiment
	//observations[i][j] --> array of observation for experiment i at time j
	private static List<List<AssignmentProposition[]>> observations;
	
	public static void main(String[] args){
		generateNetworks();
		Iterator<TimeRandomVariable[]> queryIterator = queryVars.iterator();
		Iterator<List<AssignmentProposition[]>> obsIterator = observations.iterator();
		Iterator<DynamicBayesianNetwork> networkIterator = networks.iterator();
		
		EliminationAsk[] inferencesOrder = new EliminationAsk[]{
				new EliminationAsk(),
				new EliminationFill(),
				new EliminationMinDegree()
		};

		int experimentCounter = 0;
		
		//ogni ciclo è un esperimento
		while(networkIterator.hasNext()){
			System.out.println("********* EXPERIMENT "+experimentCounter+" *********");
			
			DynamicBayesianNetwork network = networkIterator.next();
			List<AssignmentProposition[]> observations = obsIterator.next();
			List<RandomVariable> queryVars = Arrays.asList(queryIterator.next());
			
			for(EliminationAsk inference : inferencesOrder){
				System.out.println("\tInference type: "+inference.getClass().getSimpleName());
				//creo IalabDBN
				Set<Node> rootNodes = ((BayesNet)network.getPriorNetwork()).getRootNodes();
				IalabDBN myNetwork = new IalabDBN(
													network.getPriorNetwork(), 
													network.getX_0_to_X_1(), 
													network.getE_1(), 
													rootNodes.toArray(new Node[rootNodes.size()]),
													(DynamicBayesNet)network);

				
				//eseguo algoritmo di VE
				ProbabilityTable values = variableElimination(myNetwork,observations,inference,queryVars);
				double sum = 0;
				for(double value : values.getValues()){
					System.out.println(value);
					sum+=value;
				}
				System.out.println(sum);
				
				//mostro risultati
				for(Node node : myNetwork.getLastCPTs().keySet()){
					if(queryVars.contains(node.getRandomVariable())){
						System.out.println("\tNode: "+node+" --> CPT: "+myNetwork.getLastCPTs().get(node));	
					}
				}
				
				//testo con particle filtering
				int N = 100;
				ParticleFiltering pf = new ParticleFiltering(N,network);
				AssignmentProposition[][] distApprox = null;
				
				for(AssignmentProposition[] obsAssign : observations){
					distApprox = pf.particleFiltering(obsAssign);
				}

				float numberTrue = 0f;	
				for(AssignmentProposition[] val : distApprox){
					for(AssignmentProposition valIn : val){
						if((Boolean)valIn.getValue() && queryVars.contains(valIn.getTermVariable())){
							numberTrue+=1f;
						}
					}
				}
				System.out.println("\tParticleFiltering (approx): "+numberTrue/100f+" , "+(1f-(numberTrue/100f)));
				System.out.println("---------");	
			}
			experimentCounter++;
		}
	}
	
	/**
	 * It applies VE algorithm to specified dbn applying rollup filtering until it reaches final time step
	 * @param myNetwork
	 * @param observations
	 */
	private static ProbabilityTable variableElimination(IalabDBN myNetwork,List<AssignmentProposition[]> observations,EliminationAsk inference, List<RandomVariable> queryVars){
		//per ogni observation faccio uno step forward della mia network
		Factor lastFactor = null;
		for(AssignmentProposition[] obs : observations){
			List<Factor> factorList = new ArrayList<Factor>(Arrays.asList(new Factor[]{}));
			if(lastFactor != null){
				factorList.add(lastFactor);
			}
			lastFactor = EliminationAsk.getProbTableFromFactors(myNetwork.forward(obs,inference,factorList,queryVars),queryVars);
			updateVariableReferenceToPreviousStep((ProbabilityTable)lastFactor,myNetwork.getCurrentSlice());
			
		}
		return (ProbabilityTable)lastFactor;
		//return EliminationAsk.getProbTableFromFactors(factors,queryVars);
		
	}
	
	private static void updateVariableReferenceToPreviousStep(ProbabilityTable lastFactor,DynamicBayesNet slice){
		Map<RandomVariable, RandomVariable> x1Toxo = slice.getX_1_to_X_0();
		Set<RandomVariable> origVariables = lastFactor.getArgumentVariables();
		Set<RandomVariable> updatedVariables = new HashSet<>();
		for(RandomVariable origVar : origVariables){
			updatedVariables.add(x1Toxo.get(origVar));
		}
		ProbabilityTable tmp = new ProbabilityTable(lastFactor.getValues(),updatedVariables.toArray(new ProbabilityTable[](updatedVariables.)));
		lastFactor.setRandomVarInfo(randomVarInfo);
	}

	
	/**
	 * It populates the Networks class variable with the DBN for the experiments
	 * It initializes also QueryVars class variable with the q
	 */
	private static void generateNetworks(){
		networks = new LinkedList<>();
		observations = new LinkedList<>();
		//il nome delle queryVars è fuorviante (è sempre lo stesso del tempo t0 in quanto mantengo la struttura degli slice)
		queryVars = new LinkedList<>(); 

		//****** EXPERIMENT 0 (umbrella) *******/
		networks.add(DynamicBayesNetExampleFactory.getUmbrellaWorldNetwork());
		
		TimeRandomVariable[] randVars = new TimeRandomVariable[]{
				//new RandVar("Rain_t-1", new BooleanDomain()),
				new RandVar("Rain_t", new BooleanDomain()) //per bug su particlefiltering
		};
		queryVars.add(randVars);
		
		
		List<AssignmentProposition[]> observationDBN = new LinkedList<>();
		
		//step 1
		observationDBN.add(new AssignmentProposition[]{
				new AssignmentProposition(new RandVar("Umbrella_t", new BooleanDomain()), true )
		});
		
		//step 2
		observationDBN.add(new AssignmentProposition[]{
				new AssignmentProposition(new RandVar("Umbrella_t", new BooleanDomain()), true )
		});

		observations.add(observationDBN);
		
		//****** EXPERIMENT 1 (umbrella) *******/
		networks.add(DynamicBayesNetExampleFactory.getUmbrellaWorldNetwork());
		
		randVars = new TimeRandomVariable[]{
				//new RandVar("Rain_t-1", new BooleanDomain()),
				new RandVar("Rain_t", new BooleanDomain()) //per bug su particlefiltering
		};
		queryVars.add(randVars);
		
		
		observationDBN = new LinkedList<>();
		
		//step 1
		observationDBN.add(new AssignmentProposition[]{
				new AssignmentProposition(new RandVar("Umbrella_t", new BooleanDomain()), false )
		});
		
		//step 2
		observationDBN.add(new AssignmentProposition[]{
				new AssignmentProposition(new RandVar("Umbrella_t", new BooleanDomain()), true )
		});
		
		//step 3
		observationDBN.add(new AssignmentProposition[]{
				new AssignmentProposition(new RandVar("Umbrella_t", new BooleanDomain()), true )
		});
		
		//step 4
		observationDBN.add(new AssignmentProposition[]{
				new AssignmentProposition(new RandVar("Umbrella_t", new BooleanDomain()), true )
		});
		
		//step 5
		observationDBN.add(new AssignmentProposition[]{
				new AssignmentProposition(new RandVar("Umbrella_t", new BooleanDomain()), false )
		});

		observations.add(observationDBN);
		
		//****** EXPERIMENT 2 (circuit) *******/
		networks.add(DynamicBayesNetExampleFactory.getDigitalCircuitNetExample());
		
		randVars = new TimeRandomVariable[]{
				//new RandVar("J_t-1", new BooleanDomain()),
				new RandVar("Y", new BooleanDomain())
		};
		queryVars.add(randVars);
		
		
		observationDBN = new LinkedList<>();
		
		//step 1
		observationDBN.add(new AssignmentProposition[]{
				new AssignmentProposition(new RandVar("Z", new BooleanDomain()), true )
		});
		
		//step 2
		observationDBN.add(new AssignmentProposition[]{
				new AssignmentProposition(new RandVar("Z", new BooleanDomain()), false )
		});

		observations.add(observationDBN);
		
		//****** EXPERIMENT 3 (circuit) *******/
		networks.add(DynamicBayesNetExampleFactory.getDigitalCircuitNetExample());
		
		randVars = new TimeRandomVariable[]{
				//new RandVar("I_t-1", new BooleanDomain()),
				new RandVar("I", new BooleanDomain()) //per bug su particlefiltering
		};
		queryVars.add(randVars);
		
		
		observationDBN = new LinkedList<>();
		
		//step 1
		observationDBN.add(new AssignmentProposition[]{
				new AssignmentProposition(new RandVar("Z", new BooleanDomain()), true )
		});
		
		//step 2
		observationDBN.add(new AssignmentProposition[]{
				new AssignmentProposition(new RandVar("Z", new BooleanDomain()), false )
		});
		
		//step 3
		observationDBN.add(new AssignmentProposition[]{
				new AssignmentProposition(new RandVar("Z", new BooleanDomain()), false )
		});
		
		//step 4
		observationDBN.add(new AssignmentProposition[]{
				new AssignmentProposition(new RandVar("Z", new BooleanDomain()), true )
		});
		
		//step 5
		observationDBN.add(new AssignmentProposition[]{
				new AssignmentProposition(new RandVar("Z", new BooleanDomain()), false )
		});
		
		//step 6
		observationDBN.add(new AssignmentProposition[]{
				new AssignmentProposition(new RandVar("Z", new BooleanDomain()), false )
		});
		
		//step 7
		observationDBN.add(new AssignmentProposition[]{
				new AssignmentProposition(new RandVar("Z", new BooleanDomain()), false )
		});
		
		//step 8
		observationDBN.add(new AssignmentProposition[]{
				new AssignmentProposition(new RandVar("Z", new BooleanDomain()), false )
		});
		
		//step 9
		observationDBN.add(new AssignmentProposition[]{
				new AssignmentProposition(new RandVar("Z", new BooleanDomain()), true )
		});

		observations.add(observationDBN);
		
		
		//****** EXPERIMENT 4 (asia) *******/
		networks.add(DynamicBayesNetExampleFactory.getAsiaNetwork());
		
		randVars = new TimeRandomVariable[]{
				//new RandVar("Asia_t-1", new BooleanDomain()),
				new RandVar("Asia", new BooleanDomain()) //per bug su particlefiltering
		};
		queryVars.add(randVars);
		
		
		observationDBN = new LinkedList<>();
		
		//step 1
		observationDBN.add(new AssignmentProposition[]{
				new AssignmentProposition(new RandVar("Either", new BooleanDomain()), true ),
				new AssignmentProposition(new RandVar("Bronc", new BooleanDomain()), false )
		});
		
		//step 2
		observationDBN.add(new AssignmentProposition[]{
				new AssignmentProposition(new RandVar("Either", new BooleanDomain()), true ),
				new AssignmentProposition(new RandVar("Bronc", new BooleanDomain()), true )
		});

		observations.add(observationDBN);
	}

}

----------------------------------- SOURCE END -------------------------------------
!STACK 0
java.lang.IllegalArgumentException
	at org.eclipse.jdt.core.dom.ASTNode.setSourceRange(ASTNode.java:2845)
	at org.eclipse.jdt.core.dom.ASTConverter.convert(ASTConverter.java:2208)
	at org.eclipse.jdt.core.dom.ASTConverter.convert(ASTConverter.java:1781)
	at org.eclipse.jdt.core.dom.ASTConverter.convertToParenthesizedExpression(ASTConverter.java:3238)
	at org.eclipse.jdt.core.dom.ASTConverter.convert(ASTConverter.java:1684)
	at org.eclipse.jdt.core.dom.ASTConverter.convert(ASTConverter.java:1091)
	at org.eclipse.jdt.core.dom.ASTConverter.convert(ASTConverter.java:1715)
	at org.eclipse.jdt.core.dom.ASTConverter.convert(ASTConverter.java:2758)
	at org.eclipse.jdt.core.dom.ASTConverter.convert(ASTConverter.java:639)
	at org.eclipse.jdt.core.dom.ASTConverter.buildBodyDeclarations(ASTConverter.java:195)
	at org.eclipse.jdt.core.dom.ASTConverter.convert(ASTConverter.java:2965)
	at org.eclipse.jdt.core.dom.ASTConverter.convert(ASTConverter.java:1374)
	at org.eclipse.jdt.core.dom.AST.convertCompilationUnit(AST.java:270)
	at org.eclipse.jdt.internal.core.ReconcileWorkingCopyOperation.makeConsistent(ReconcileWorkingCopyOperation.java:207)
	at org.eclipse.jdt.internal.core.ReconcileWorkingCopyOperation.executeOperation(ReconcileWorkingCopyOperation.java:90)
	at org.eclipse.jdt.internal.core.JavaModelOperation.run(JavaModelOperation.java:724)
	at org.eclipse.jdt.internal.core.JavaModelOperation.runOperation(JavaModelOperation.java:790)
	at org.eclipse.jdt.internal.core.CompilationUnit.reconcile(CompilationUnit.java:1250)
	at org.eclipse.jdt.internal.ui.text.java.JavaReconcilingStrategy.reconcile(JavaReconcilingStrategy.java:128)
	at org.eclipse.jdt.internal.ui.text.java.JavaReconcilingStrategy.access$0(JavaReconcilingStrategy.java:110)
	at org.eclipse.jdt.internal.ui.text.java.JavaReconcilingStrategy$1.run(JavaReconcilingStrategy.java:90)
	at org.eclipse.core.runtime.SafeRunner.run(SafeRunner.java:42)
	at org.eclipse.jdt.internal.ui.text.java.JavaReconcilingStrategy.reconcile(JavaReconcilingStrategy.java:87)
	at org.eclipse.jdt.internal.ui.text.java.JavaReconcilingStrategy.reconcile(JavaReconcilingStrategy.java:162)
	at org.eclipse.jdt.internal.ui.text.CompositeReconcilingStrategy.reconcile(CompositeReconcilingStrategy.java:77)
	at org.eclipse.jdt.internal.ui.text.JavaCompositeReconcilingStrategy.reconcile(JavaCompositeReconcilingStrategy.java:82)
	at org.eclipse.jface.text.reconciler.MonoReconciler.process(MonoReconciler.java:69)
	at org.eclipse.jface.text.reconciler.AbstractReconciler$BackgroundThread.run(AbstractReconciler.java:207)

!ENTRY org.eclipse.jdt.ui 4 2 2020-06-05 12:48:52.182
!MESSAGE Problems occurred when invoking code from plug-in: "org.eclipse.jdt.ui".
!STACK 0
java.lang.IllegalArgumentException
	at org.eclipse.jdt.core.dom.ASTNode.setSourceRange(ASTNode.java:2845)
	at org.eclipse.jdt.core.dom.ASTConverter.convert(ASTConverter.java:2208)
	at org.eclipse.jdt.core.dom.ASTConverter.convert(ASTConverter.java:1781)
	at org.eclipse.jdt.core.dom.ASTConverter.convertToParenthesizedExpression(ASTConverter.java:3238)
	at org.eclipse.jdt.core.dom.ASTConverter.convert(ASTConverter.java:1684)
	at org.eclipse.jdt.core.dom.ASTConverter.convert(ASTConverter.java:1091)
	at org.eclipse.jdt.core.dom.ASTConverter.convert(ASTConverter.java:1715)
	at org.eclipse.jdt.core.dom.ASTConverter.convert(ASTConverter.java:2758)
	at org.eclipse.jdt.core.dom.ASTConverter.convert(ASTConverter.java:639)
	at org.eclipse.jdt.core.dom.ASTConverter.buildBodyDeclarations(ASTConverter.java:195)
	at org.eclipse.jdt.core.dom.ASTConverter.convert(ASTConverter.java:2965)
	at org.eclipse.jdt.core.dom.ASTConverter.convert(ASTConverter.java:1374)
	at org.eclipse.jdt.core.dom.AST.convertCompilationUnit(AST.java:270)
	at org.eclipse.jdt.internal.core.ReconcileWorkingCopyOperation.makeConsistent(ReconcileWorkingCopyOperation.java:207)
	at org.eclipse.jdt.internal.core.ReconcileWorkingCopyOperation.executeOperation(ReconcileWorkingCopyOperation.java:90)
	at org.eclipse.jdt.internal.core.JavaModelOperation.run(JavaModelOperation.java:724)
	at org.eclipse.jdt.internal.core.JavaModelOperation.runOperation(JavaModelOperation.java:790)
	at org.eclipse.jdt.internal.core.CompilationUnit.reconcile(CompilationUnit.java:1250)
	at org.eclipse.jdt.internal.ui.text.java.JavaReconcilingStrategy.reconcile(JavaReconcilingStrategy.java:128)
	at org.eclipse.jdt.internal.ui.text.java.JavaReconcilingStrategy.access$0(JavaReconcilingStrategy.java:110)
	at org.eclipse.jdt.internal.ui.text.java.JavaReconcilingStrategy$1.run(JavaReconcilingStrategy.java:90)
	at org.eclipse.core.runtime.SafeRunner.run(SafeRunner.java:42)
	at org.eclipse.jdt.internal.ui.text.java.JavaReconcilingStrategy.reconcile(JavaReconcilingStrategy.java:87)
	at org.eclipse.jdt.internal.ui.text.java.JavaReconcilingStrategy.reconcile(JavaReconcilingStrategy.java:162)
	at org.eclipse.jdt.internal.ui.text.CompositeReconcilingStrategy.reconcile(CompositeReconcilingStrategy.java:77)
	at org.eclipse.jdt.internal.ui.text.JavaCompositeReconcilingStrategy.reconcile(JavaCompositeReconcilingStrategy.java:82)
	at org.eclipse.jface.text.reconciler.MonoReconciler.process(MonoReconciler.java:69)
	at org.eclipse.jface.text.reconciler.AbstractReconciler$BackgroundThread.run(AbstractReconciler.java:207)

!ENTRY org.eclipse.jdt.ui 4 0 2020-06-05 12:48:52.182
!MESSAGE Error in JDT Core during reconcile
!STACK 0
java.lang.IllegalArgumentException
	at org.eclipse.jdt.core.dom.ASTNode.setSourceRange(ASTNode.java:2845)
	at org.eclipse.jdt.core.dom.ASTConverter.convert(ASTConverter.java:2208)
	at org.eclipse.jdt.core.dom.ASTConverter.convert(ASTConverter.java:1781)
	at org.eclipse.jdt.core.dom.ASTConverter.convertToParenthesizedExpression(ASTConverter.java:3238)
	at org.eclipse.jdt.core.dom.ASTConverter.convert(ASTConverter.java:1684)
	at org.eclipse.jdt.core.dom.ASTConverter.convert(ASTConverter.java:1091)
	at org.eclipse.jdt.core.dom.ASTConverter.convert(ASTConverter.java:1715)
	at org.eclipse.jdt.core.dom.ASTConverter.convert(ASTConverter.java:2758)
	at org.eclipse.jdt.core.dom.ASTConverter.convert(ASTConverter.java:639)
	at org.eclipse.jdt.core.dom.ASTConverter.buildBodyDeclarations(ASTConverter.java:195)
	at org.eclipse.jdt.core.dom.ASTConverter.convert(ASTConverter.java:2965)
	at org.eclipse.jdt.core.dom.ASTConverter.convert(ASTConverter.java:1374)
	at org.eclipse.jdt.core.dom.AST.convertCompilationUnit(AST.java:270)
	at org.eclipse.jdt.internal.core.ReconcileWorkingCopyOperation.makeConsistent(ReconcileWorkingCopyOperation.java:207)
	at org.eclipse.jdt.internal.core.ReconcileWorkingCopyOperation.executeOperation(ReconcileWorkingCopyOperation.java:90)
	at org.eclipse.jdt.internal.core.JavaModelOperation.run(JavaModelOperation.java:724)
	at org.eclipse.jdt.internal.core.JavaModelOperation.runOperation(JavaModelOperation.java:790)
	at org.eclipse.jdt.internal.core.CompilationUnit.reconcile(CompilationUnit.java:1250)
	at org.eclipse.jdt.internal.ui.text.java.JavaReconcilingStrategy.reconcile(JavaReconcilingStrategy.java:128)
	at org.eclipse.jdt.internal.ui.text.java.JavaReconcilingStrategy.access$0(JavaReconcilingStrategy.java:110)
	at org.eclipse.jdt.internal.ui.text.java.JavaReconcilingStrategy$1.run(JavaReconcilingStrategy.java:90)
	at org.eclipse.core.runtime.SafeRunner.run(SafeRunner.java:42)
	at org.eclipse.jdt.internal.ui.text.java.JavaReconcilingStrategy.reconcile(JavaReconcilingStrategy.java:87)
	at org.eclipse.jdt.internal.ui.text.java.JavaReconcilingStrategy.reconcile(JavaReconcilingStrategy.java:162)
	at org.eclipse.jdt.internal.ui.text.CompositeReconcilingStrategy.reconcile(CompositeReconcilingStrategy.java:77)
	at org.eclipse.jdt.internal.ui.text.JavaCompositeReconcilingStrategy.reconcile(JavaCompositeReconcilingStrategy.java:82)
	at org.eclipse.jface.text.reconciler.MonoReconciler.process(MonoReconciler.java:69)
	at org.eclipse.jface.text.reconciler.AbstractReconciler$BackgroundThread.run(AbstractReconciler.java:207)

!ENTRY org.eclipse.jdt.core 4 4 2020-06-05 12:48:52.190
!MESSAGE Exception occurred during compilation unit conversion:
----------------------------------- SOURCE BEGIN -------------------------------------
package it.coluccia.ialab2020.torta.project;

import java.util.ArrayList;
import java.util.Arrays;
import java.util.HashSet;
import java.util.Iterator;
import java.util.LinkedList;
import java.util.List;
import java.util.Map;
import java.util.Set;

import aima.core.probability.Factor;
import aima.core.probability.RandomVariable;
import aima.core.probability.TimeRandomVariable;
import aima.core.probability.bayes.DynamicBayesianNetwork;
import aima.core.probability.bayes.Node;
import aima.core.probability.bayes.approx.ParticleFiltering;
import aima.core.probability.bayes.exact.EliminationAsk;
import aima.core.probability.bayes.impl.BayesNet;
import aima.core.probability.bayes.impl.DynamicBayesNet;
import aima.core.probability.bayes.impl.IalabDBN;
import aima.core.probability.domain.BooleanDomain;
import aima.core.probability.example.DynamicBayesNetExampleFactory;
import aima.core.probability.proposition.AssignmentProposition;
import aima.core.probability.util.ProbabilityTable;
import aima.core.probability.util.RandVar;

public class DynamicBNExercise {
	
	private static List<DynamicBayesianNetwork> networks;
	
	//queryVars[i] --> list of query vars for network i
	private static List<TimeRandomVariable[]> queryVars;
	
	//observations[i] --> list of array of observation for network experiment
	//observations[i][j] --> array of observation for experiment i at time j
	private static List<List<AssignmentProposition[]>> observations;
	
	public static void main(String[] args){
		generateNetworks();
		Iterator<TimeRandomVariable[]> queryIterator = queryVars.iterator();
		Iterator<List<AssignmentProposition[]>> obsIterator = observations.iterator();
		Iterator<DynamicBayesianNetwork> networkIterator = networks.iterator();
		
		EliminationAsk[] inferencesOrder = new EliminationAsk[]{
				new EliminationAsk(),
				new EliminationFill(),
				new EliminationMinDegree()
		};

		int experimentCounter = 0;
		
		//ogni ciclo è un esperimento
		while(networkIterator.hasNext()){
			System.out.println("********* EXPERIMENT "+experimentCounter+" *********");
			
			DynamicBayesianNetwork network = networkIterator.next();
			List<AssignmentProposition[]> observations = obsIterator.next();
			List<RandomVariable> queryVars = Arrays.asList(queryIterator.next());
			
			for(EliminationAsk inference : inferencesOrder){
				System.out.println("\tInference type: "+inference.getClass().getSimpleName());
				//creo IalabDBN
				Set<Node> rootNodes = ((BayesNet)network.getPriorNetwork()).getRootNodes();
				IalabDBN myNetwork = new IalabDBN(
													network.getPriorNetwork(), 
													network.getX_0_to_X_1(), 
													network.getE_1(), 
													rootNodes.toArray(new Node[rootNodes.size()]),
													(DynamicBayesNet)network);

				
				//eseguo algoritmo di VE
				ProbabilityTable values = variableElimination(myNetwork,observations,inference,queryVars);
				double sum = 0;
				for(double value : values.getValues()){
					System.out.println(value);
					sum+=value;
				}
				System.out.println(sum);
				
				//mostro risultati
				for(Node node : myNetwork.getLastCPTs().keySet()){
					if(queryVars.contains(node.getRandomVariable())){
						System.out.println("\tNode: "+node+" --> CPT: "+myNetwork.getLastCPTs().get(node));	
					}
				}
				
				//testo con particle filtering
				int N = 100;
				ParticleFiltering pf = new ParticleFiltering(N,network);
				AssignmentProposition[][] distApprox = null;
				
				for(AssignmentProposition[] obsAssign : observations){
					distApprox = pf.particleFiltering(obsAssign);
				}

				float numberTrue = 0f;	
				for(AssignmentProposition[] val : distApprox){
					for(AssignmentProposition valIn : val){
						if((Boolean)valIn.getValue() && queryVars.contains(valIn.getTermVariable())){
							numberTrue+=1f;
						}
					}
				}
				System.out.println("\tParticleFiltering (approx): "+numberTrue/100f+" , "+(1f-(numberTrue/100f)));
				System.out.println("---------");	
			}
			experimentCounter++;
		}
	}
	
	/**
	 * It applies VE algorithm to specified dbn applying rollup filtering until it reaches final time step
	 * @param myNetwork
	 * @param observations
	 */
	private static ProbabilityTable variableElimination(IalabDBN myNetwork,List<AssignmentProposition[]> observations,EliminationAsk inference, List<RandomVariable> queryVars){
		//per ogni observation faccio uno step forward della mia network
		Factor lastFactor = null;
		for(AssignmentProposition[] obs : observations){
			List<Factor> factorList = new ArrayList<Factor>(Arrays.asList(new Factor[]{}));
			if(lastFactor != null){
				factorList.add(lastFactor);
			}
			lastFactor = EliminationAsk.getProbTableFromFactors(myNetwork.forward(obs,inference,factorList,queryVars),queryVars);
			updateVariableReferenceToPreviousStep((ProbabilityTable)lastFactor,myNetwork.getCurrentSlice());
			
		}
		return (ProbabilityTable)lastFactor;
		//return EliminationAsk.getProbTableFromFactors(factors,queryVars);
		
	}
	
	private static void updateVariableReferenceToPreviousStep(ProbabilityTable lastFactor,DynamicBayesNet slice){
		Map<RandomVariable, RandomVariable> x1Toxo = slice.getX_1_to_X_0();
		Set<RandomVariable> origVariables = lastFactor.getArgumentVariables();
		Set<RandomVariable> updatedVariables = new HashSet<>();
		for(RandomVariable origVar : origVariables){
			updatedVariables.add(x1Toxo.get(origVar));
		}
		ProbabilityTable tmp = new ProbabilityTable(lastFactor.getValues(),updatedVariables.toArray(new ProbabilityTable[](updatedVariables.)));
		lastFactor.setRandomVarInfo(randomVarInfo);
	}

	
	/**
	 * It populates the Networks class variable with the DBN for the experiments
	 * It initializes also QueryVars class variable with the q
	 */
	private static void generateNetworks(){
		networks = new LinkedList<>();
		observations = new LinkedList<>();
		//il nome delle queryVars è fuorviante (è sempre lo stesso del tempo t0 in quanto mantengo la struttura degli slice)
		queryVars = new LinkedList<>(); 

		//****** EXPERIMENT 0 (umbrella) *******/
		networks.add(DynamicBayesNetExampleFactory.getUmbrellaWorldNetwork());
		
		TimeRandomVariable[] randVars = new TimeRandomVariable[]{
				//new RandVar("Rain_t-1", new BooleanDomain()),
				new RandVar("Rain_t", new BooleanDomain()) //per bug su particlefiltering
		};
		queryVars.add(randVars);
		
		
		List<AssignmentProposition[]> observationDBN = new LinkedList<>();
		
		//step 1
		observationDBN.add(new AssignmentProposition[]{
				new AssignmentProposition(new RandVar("Umbrella_t", new BooleanDomain()), true )
		});
		
		//step 2
		observationDBN.add(new AssignmentProposition[]{
				new AssignmentProposition(new RandVar("Umbrella_t", new BooleanDomain()), true )
		});

		observations.add(observationDBN);
		
		//****** EXPERIMENT 1 (umbrella) *******/
		networks.add(DynamicBayesNetExampleFactory.getUmbrellaWorldNetwork());
		
		randVars = new TimeRandomVariable[]{
				//new RandVar("Rain_t-1", new BooleanDomain()),
				new RandVar("Rain_t", new BooleanDomain()) //per bug su particlefiltering
		};
		queryVars.add(randVars);
		
		
		observationDBN = new LinkedList<>();
		
		//step 1
		observationDBN.add(new AssignmentProposition[]{
				new AssignmentProposition(new RandVar("Umbrella_t", new BooleanDomain()), false )
		});
		
		//step 2
		observationDBN.add(new AssignmentProposition[]{
				new AssignmentProposition(new RandVar("Umbrella_t", new BooleanDomain()), true )
		});
		
		//step 3
		observationDBN.add(new AssignmentProposition[]{
				new AssignmentProposition(new RandVar("Umbrella_t", new BooleanDomain()), true )
		});
		
		//step 4
		observationDBN.add(new AssignmentProposition[]{
				new AssignmentProposition(new RandVar("Umbrella_t", new BooleanDomain()), true )
		});
		
		//step 5
		observationDBN.add(new AssignmentProposition[]{
				new AssignmentProposition(new RandVar("Umbrella_t", new BooleanDomain()), false )
		});

		observations.add(observationDBN);
		
		//****** EXPERIMENT 2 (circuit) *******/
		networks.add(DynamicBayesNetExampleFactory.getDigitalCircuitNetExample());
		
		randVars = new TimeRandomVariable[]{
				//new RandVar("J_t-1", new BooleanDomain()),
				new RandVar("Y", new BooleanDomain())
		};
		queryVars.add(randVars);
		
		
		observationDBN = new LinkedList<>();
		
		//step 1
		observationDBN.add(new AssignmentProposition[]{
				new AssignmentProposition(new RandVar("Z", new BooleanDomain()), true )
		});
		
		//step 2
		observationDBN.add(new AssignmentProposition[]{
				new AssignmentProposition(new RandVar("Z", new BooleanDomain()), false )
		});

		observations.add(observationDBN);
		
		//****** EXPERIMENT 3 (circuit) *******/
		networks.add(DynamicBayesNetExampleFactory.getDigitalCircuitNetExample());
		
		randVars = new TimeRandomVariable[]{
				//new RandVar("I_t-1", new BooleanDomain()),
				new RandVar("I", new BooleanDomain()) //per bug su particlefiltering
		};
		queryVars.add(randVars);
		
		
		observationDBN = new LinkedList<>();
		
		//step 1
		observationDBN.add(new AssignmentProposition[]{
				new AssignmentProposition(new RandVar("Z", new BooleanDomain()), true )
		});
		
		//step 2
		observationDBN.add(new AssignmentProposition[]{
				new AssignmentProposition(new RandVar("Z", new BooleanDomain()), false )
		});
		
		//step 3
		observationDBN.add(new AssignmentProposition[]{
				new AssignmentProposition(new RandVar("Z", new BooleanDomain()), false )
		});
		
		//step 4
		observationDBN.add(new AssignmentProposition[]{
				new AssignmentProposition(new RandVar("Z", new BooleanDomain()), true )
		});
		
		//step 5
		observationDBN.add(new AssignmentProposition[]{
				new AssignmentProposition(new RandVar("Z", new BooleanDomain()), false )
		});
		
		//step 6
		observationDBN.add(new AssignmentProposition[]{
				new AssignmentProposition(new RandVar("Z", new BooleanDomain()), false )
		});
		
		//step 7
		observationDBN.add(new AssignmentProposition[]{
				new AssignmentProposition(new RandVar("Z", new BooleanDomain()), false )
		});
		
		//step 8
		observationDBN.add(new AssignmentProposition[]{
				new AssignmentProposition(new RandVar("Z", new BooleanDomain()), false )
		});
		
		//step 9
		observationDBN.add(new AssignmentProposition[]{
				new AssignmentProposition(new RandVar("Z", new BooleanDomain()), true )
		});

		observations.add(observationDBN);
		
		
		//****** EXPERIMENT 4 (asia) *******/
		networks.add(DynamicBayesNetExampleFactory.getAsiaNetwork());
		
		randVars = new TimeRandomVariable[]{
				//new RandVar("Asia_t-1", new BooleanDomain()),
				new RandVar("Asia", new BooleanDomain()) //per bug su particlefiltering
		};
		queryVars.add(randVars);
		
		
		observationDBN = new LinkedList<>();
		
		//step 1
		observationDBN.add(new AssignmentProposition[]{
				new AssignmentProposition(new RandVar("Either", new BooleanDomain()), true ),
				new AssignmentProposition(new RandVar("Bronc", new BooleanDomain()), false )
		});
		
		//step 2
		observationDBN.add(new AssignmentProposition[]{
				new AssignmentProposition(new RandVar("Either", new BooleanDomain()), true ),
				new AssignmentProposition(new RandVar("Bronc", new BooleanDomain()), true )
		});

		observations.add(observationDBN);
	}

}

----------------------------------- SOURCE END -------------------------------------
!STACK 0
java.lang.IllegalArgumentException
	at org.eclipse.jdt.core.dom.ASTNode.setSourceRange(ASTNode.java:2845)
	at org.eclipse.jdt.core.dom.ASTConverter.convert(ASTConverter.java:2208)
	at org.eclipse.jdt.core.dom.ASTConverter.convert(ASTConverter.java:1781)
	at org.eclipse.jdt.core.dom.ASTConverter.convertToParenthesizedExpression(ASTConverter.java:3238)
	at org.eclipse.jdt.core.dom.ASTConverter.convert(ASTConverter.java:1684)
	at org.eclipse.jdt.core.dom.ASTConverter.convert(ASTConverter.java:1091)
	at org.eclipse.jdt.core.dom.ASTConverter.convert(ASTConverter.java:1715)
	at org.eclipse.jdt.core.dom.ASTConverter.convert(ASTConverter.java:2758)
	at org.eclipse.jdt.core.dom.ASTConverter.convert(ASTConverter.java:639)
	at org.eclipse.jdt.core.dom.ASTConverter.buildBodyDeclarations(ASTConverter.java:195)
	at org.eclipse.jdt.core.dom.ASTConverter.convert(ASTConverter.java:2965)
	at org.eclipse.jdt.core.dom.ASTConverter.convert(ASTConverter.java:1374)
	at org.eclipse.jdt.core.dom.AST.convertCompilationUnit(AST.java:270)
	at org.eclipse.jdt.internal.core.ReconcileWorkingCopyOperation.makeConsistent(ReconcileWorkingCopyOperation.java:207)
	at org.eclipse.jdt.internal.core.ReconcileWorkingCopyOperation.executeOperation(ReconcileWorkingCopyOperation.java:90)
	at org.eclipse.jdt.internal.core.JavaModelOperation.run(JavaModelOperation.java:724)
	at org.eclipse.jdt.internal.core.JavaModelOperation.runOperation(JavaModelOperation.java:790)
	at org.eclipse.jdt.internal.core.CompilationUnit.reconcile(CompilationUnit.java:1250)
	at org.eclipse.jdt.internal.ui.text.java.JavaReconcilingStrategy.reconcile(JavaReconcilingStrategy.java:128)
	at org.eclipse.jdt.internal.ui.text.java.JavaReconcilingStrategy.access$0(JavaReconcilingStrategy.java:110)
	at org.eclipse.jdt.internal.ui.text.java.JavaReconcilingStrategy$1.run(JavaReconcilingStrategy.java:90)
	at org.eclipse.core.runtime.SafeRunner.run(SafeRunner.java:42)
	at org.eclipse.jdt.internal.ui.text.java.JavaReconcilingStrategy.reconcile(JavaReconcilingStrategy.java:87)
	at org.eclipse.jdt.internal.ui.text.java.JavaReconcilingStrategy.reconcile(JavaReconcilingStrategy.java:162)
	at org.eclipse.jdt.internal.ui.text.CompositeReconcilingStrategy.reconcile(CompositeReconcilingStrategy.java:77)
	at org.eclipse.jdt.internal.ui.text.JavaCompositeReconcilingStrategy.reconcile(JavaCompositeReconcilingStrategy.java:82)
	at org.eclipse.jface.text.reconciler.MonoReconciler.process(MonoReconciler.java:69)
	at org.eclipse.jface.text.reconciler.AbstractReconciler$BackgroundThread.run(AbstractReconciler.java:207)

!ENTRY org.eclipse.jdt.ui 4 0 2020-06-05 12:48:52.190
!MESSAGE Error in JDT Core during reconcile
!STACK 0
java.lang.IllegalArgumentException
	at org.eclipse.jdt.core.dom.ASTNode.setSourceRange(ASTNode.java:2845)
	at org.eclipse.jdt.core.dom.ASTConverter.convert(ASTConverter.java:2208)
	at org.eclipse.jdt.core.dom.ASTConverter.convert(ASTConverter.java:1781)
	at org.eclipse.jdt.core.dom.ASTConverter.convertToParenthesizedExpression(ASTConverter.java:3238)
	at org.eclipse.jdt.core.dom.ASTConverter.convert(ASTConverter.java:1684)
	at org.eclipse.jdt.core.dom.ASTConverter.convert(ASTConverter.java:1091)
	at org.eclipse.jdt.core.dom.ASTConverter.convert(ASTConverter.java:1715)
	at org.eclipse.jdt.core.dom.ASTConverter.convert(ASTConverter.java:2758)
	at org.eclipse.jdt.core.dom.ASTConverter.convert(ASTConverter.java:639)
	at org.eclipse.jdt.core.dom.ASTConverter.buildBodyDeclarations(ASTConverter.java:195)
	at org.eclipse.jdt.core.dom.ASTConverter.convert(ASTConverter.java:2965)
	at org.eclipse.jdt.core.dom.ASTConverter.convert(ASTConverter.java:1374)
	at org.eclipse.jdt.core.dom.AST.convertCompilationUnit(AST.java:270)
	at org.eclipse.jdt.internal.core.ReconcileWorkingCopyOperation.makeConsistent(ReconcileWorkingCopyOperation.java:207)
	at org.eclipse.jdt.internal.core.ReconcileWorkingCopyOperation.executeOperation(ReconcileWorkingCopyOperation.java:90)
	at org.eclipse.jdt.internal.core.JavaModelOperation.run(JavaModelOperation.java:724)
	at org.eclipse.jdt.internal.core.JavaModelOperation.runOperation(JavaModelOperation.java:790)
	at org.eclipse.jdt.internal.core.CompilationUnit.reconcile(CompilationUnit.java:1250)
	at org.eclipse.jdt.internal.ui.text.java.JavaReconcilingStrategy.reconcile(JavaReconcilingStrategy.java:128)
	at org.eclipse.jdt.internal.ui.text.java.JavaReconcilingStrategy.access$0(JavaReconcilingStrategy.java:110)
	at org.eclipse.jdt.internal.ui.text.java.JavaReconcilingStrategy$1.run(JavaReconcilingStrategy.java:90)
	at org.eclipse.core.runtime.SafeRunner.run(SafeRunner.java:42)
	at org.eclipse.jdt.internal.ui.text.java.JavaReconcilingStrategy.reconcile(JavaReconcilingStrategy.java:87)
	at org.eclipse.jdt.internal.ui.text.java.JavaReconcilingStrategy.reconcile(JavaReconcilingStrategy.java:162)
	at org.eclipse.jdt.internal.ui.text.CompositeReconcilingStrategy.reconcile(CompositeReconcilingStrategy.java:77)
	at org.eclipse.jdt.internal.ui.text.JavaCompositeReconcilingStrategy.reconcile(JavaCompositeReconcilingStrategy.java:82)
	at org.eclipse.jface.text.reconciler.MonoReconciler.process(MonoReconciler.java:69)
	at org.eclipse.jface.text.reconciler.AbstractReconciler$BackgroundThread.run(AbstractReconciler.java:207)

!ENTRY org.eclipse.jdt.core 4 4 2020-06-05 12:48:52.193
!MESSAGE Exception occurred during compilation unit conversion:
----------------------------------- SOURCE BEGIN -------------------------------------
package it.coluccia.ialab2020.torta.project;

import java.util.ArrayList;
import java.util.Arrays;
import java.util.HashSet;
import java.util.Iterator;
import java.util.LinkedList;
import java.util.List;
import java.util.Map;
import java.util.Set;

import aima.core.probability.Factor;
import aima.core.probability.RandomVariable;
import aima.core.probability.TimeRandomVariable;
import aima.core.probability.bayes.DynamicBayesianNetwork;
import aima.core.probability.bayes.Node;
import aima.core.probability.bayes.approx.ParticleFiltering;
import aima.core.probability.bayes.exact.EliminationAsk;
import aima.core.probability.bayes.impl.BayesNet;
import aima.core.probability.bayes.impl.DynamicBayesNet;
import aima.core.probability.bayes.impl.IalabDBN;
import aima.core.probability.domain.BooleanDomain;
import aima.core.probability.example.DynamicBayesNetExampleFactory;
import aima.core.probability.proposition.AssignmentProposition;
import aima.core.probability.util.ProbabilityTable;
import aima.core.probability.util.RandVar;

public class DynamicBNExercise {
	
	private static List<DynamicBayesianNetwork> networks;
	
	//queryVars[i] --> list of query vars for network i
	private static List<TimeRandomVariable[]> queryVars;
	
	//observations[i] --> list of array of observation for network experiment
	//observations[i][j] --> array of observation for experiment i at time j
	private static List<List<AssignmentProposition[]>> observations;
	
	public static void main(String[] args){
		generateNetworks();
		Iterator<TimeRandomVariable[]> queryIterator = queryVars.iterator();
		Iterator<List<AssignmentProposition[]>> obsIterator = observations.iterator();
		Iterator<DynamicBayesianNetwork> networkIterator = networks.iterator();
		
		EliminationAsk[] inferencesOrder = new EliminationAsk[]{
				new EliminationAsk(),
				new EliminationFill(),
				new EliminationMinDegree()
		};

		int experimentCounter = 0;
		
		//ogni ciclo è un esperimento
		while(networkIterator.hasNext()){
			System.out.println("********* EXPERIMENT "+experimentCounter+" *********");
			
			DynamicBayesianNetwork network = networkIterator.next();
			List<AssignmentProposition[]> observations = obsIterator.next();
			List<RandomVariable> queryVars = Arrays.asList(queryIterator.next());
			
			for(EliminationAsk inference : inferencesOrder){
				System.out.println("\tInference type: "+inference.getClass().getSimpleName());
				//creo IalabDBN
				Set<Node> rootNodes = ((BayesNet)network.getPriorNetwork()).getRootNodes();
				IalabDBN myNetwork = new IalabDBN(
													network.getPriorNetwork(), 
													network.getX_0_to_X_1(), 
													network.getE_1(), 
													rootNodes.toArray(new Node[rootNodes.size()]),
													(DynamicBayesNet)network);

				
				//eseguo algoritmo di VE
				ProbabilityTable values = variableElimination(myNetwork,observations,inference,queryVars);
				double sum = 0;
				for(double value : values.getValues()){
					System.out.println(value);
					sum+=value;
				}
				System.out.println(sum);
				
				//mostro risultati
				for(Node node : myNetwork.getLastCPTs().keySet()){
					if(queryVars.contains(node.getRandomVariable())){
						System.out.println("\tNode: "+node+" --> CPT: "+myNetwork.getLastCPTs().get(node));	
					}
				}
				
				//testo con particle filtering
				int N = 100;
				ParticleFiltering pf = new ParticleFiltering(N,network);
				AssignmentProposition[][] distApprox = null;
				
				for(AssignmentProposition[] obsAssign : observations){
					distApprox = pf.particleFiltering(obsAssign);
				}

				float numberTrue = 0f;	
				for(AssignmentProposition[] val : distApprox){
					for(AssignmentProposition valIn : val){
						if((Boolean)valIn.getValue() && queryVars.contains(valIn.getTermVariable())){
							numberTrue+=1f;
						}
					}
				}
				System.out.println("\tParticleFiltering (approx): "+numberTrue/100f+" , "+(1f-(numberTrue/100f)));
				System.out.println("---------");	
			}
			experimentCounter++;
		}
	}
	
	/**
	 * It applies VE algorithm to specified dbn applying rollup filtering until it reaches final time step
	 * @param myNetwork
	 * @param observations
	 */
	private static ProbabilityTable variableElimination(IalabDBN myNetwork,List<AssignmentProposition[]> observations,EliminationAsk inference, List<RandomVariable> queryVars){
		//per ogni observation faccio uno step forward della mia network
		Factor lastFactor = null;
		for(AssignmentProposition[] obs : observations){
			List<Factor> factorList = new ArrayList<Factor>(Arrays.asList(new Factor[]{}));
			if(lastFactor != null){
				factorList.add(lastFactor);
			}
			lastFactor = EliminationAsk.getProbTableFromFactors(myNetwork.forward(obs,inference,factorList,queryVars),queryVars);
			updateVariableReferenceToPreviousStep((ProbabilityTable)lastFactor,myNetwork.getCurrentSlice());
			
		}
		return (ProbabilityTable)lastFactor;
		//return EliminationAsk.getProbTableFromFactors(factors,queryVars);
		
	}
	
	private static void updateVariableReferenceToPreviousStep(ProbabilityTable lastFactor,DynamicBayesNet slice){
		Map<RandomVariable, RandomVariable> x1Toxo = slice.getX_1_to_X_0();
		Set<RandomVariable> origVariables = lastFactor.getArgumentVariables();
		Set<RandomVariable> updatedVariables = new HashSet<>();
		for(RandomVariable origVar : origVariables){
			updatedVariables.add(x1Toxo.get(origVar));
		}
		ProbabilityTable tmp = new ProbabilityTable(lastFactor.getValues(),updatedVariables.toArray(new ProbabilityTable[](updatedVariables.)));
		lastFactor.setRandomVarInfo(randomVarInfo);
	}

	
	/**
	 * It populates the Networks class variable with the DBN for the experiments
	 * It initializes also QueryVars class variable with the q
	 */
	private static void generateNetworks(){
		networks = new LinkedList<>();
		observations = new LinkedList<>();
		//il nome delle queryVars è fuorviante (è sempre lo stesso del tempo t0 in quanto mantengo la struttura degli slice)
		queryVars = new LinkedList<>(); 

		//****** EXPERIMENT 0 (umbrella) *******/
		networks.add(DynamicBayesNetExampleFactory.getUmbrellaWorldNetwork());
		
		TimeRandomVariable[] randVars = new TimeRandomVariable[]{
				//new RandVar("Rain_t-1", new BooleanDomain()),
				new RandVar("Rain_t", new BooleanDomain()) //per bug su particlefiltering
		};
		queryVars.add(randVars);
		
		
		List<AssignmentProposition[]> observationDBN = new LinkedList<>();
		
		//step 1
		observationDBN.add(new AssignmentProposition[]{
				new AssignmentProposition(new RandVar("Umbrella_t", new BooleanDomain()), true )
		});
		
		//step 2
		observationDBN.add(new AssignmentProposition[]{
				new AssignmentProposition(new RandVar("Umbrella_t", new BooleanDomain()), true )
		});

		observations.add(observationDBN);
		
		//****** EXPERIMENT 1 (umbrella) *******/
		networks.add(DynamicBayesNetExampleFactory.getUmbrellaWorldNetwork());
		
		randVars = new TimeRandomVariable[]{
				//new RandVar("Rain_t-1", new BooleanDomain()),
				new RandVar("Rain_t", new BooleanDomain()) //per bug su particlefiltering
		};
		queryVars.add(randVars);
		
		
		observationDBN = new LinkedList<>();
		
		//step 1
		observationDBN.add(new AssignmentProposition[]{
				new AssignmentProposition(new RandVar("Umbrella_t", new BooleanDomain()), false )
		});
		
		//step 2
		observationDBN.add(new AssignmentProposition[]{
				new AssignmentProposition(new RandVar("Umbrella_t", new BooleanDomain()), true )
		});
		
		//step 3
		observationDBN.add(new AssignmentProposition[]{
				new AssignmentProposition(new RandVar("Umbrella_t", new BooleanDomain()), true )
		});
		
		//step 4
		observationDBN.add(new AssignmentProposition[]{
				new AssignmentProposition(new RandVar("Umbrella_t", new BooleanDomain()), true )
		});
		
		//step 5
		observationDBN.add(new AssignmentProposition[]{
				new AssignmentProposition(new RandVar("Umbrella_t", new BooleanDomain()), false )
		});

		observations.add(observationDBN);
		
		//****** EXPERIMENT 2 (circuit) *******/
		networks.add(DynamicBayesNetExampleFactory.getDigitalCircuitNetExample());
		
		randVars = new TimeRandomVariable[]{
				//new RandVar("J_t-1", new BooleanDomain()),
				new RandVar("Y", new BooleanDomain())
		};
		queryVars.add(randVars);
		
		
		observationDBN = new LinkedList<>();
		
		//step 1
		observationDBN.add(new AssignmentProposition[]{
				new AssignmentProposition(new RandVar("Z", new BooleanDomain()), true )
		});
		
		//step 2
		observationDBN.add(new AssignmentProposition[]{
				new AssignmentProposition(new RandVar("Z", new BooleanDomain()), false )
		});

		observations.add(observationDBN);
		
		//****** EXPERIMENT 3 (circuit) *******/
		networks.add(DynamicBayesNetExampleFactory.getDigitalCircuitNetExample());
		
		randVars = new TimeRandomVariable[]{
				//new RandVar("I_t-1", new BooleanDomain()),
				new RandVar("I", new BooleanDomain()) //per bug su particlefiltering
		};
		queryVars.add(randVars);
		
		
		observationDBN = new LinkedList<>();
		
		//step 1
		observationDBN.add(new AssignmentProposition[]{
				new AssignmentProposition(new RandVar("Z", new BooleanDomain()), true )
		});
		
		//step 2
		observationDBN.add(new AssignmentProposition[]{
				new AssignmentProposition(new RandVar("Z", new BooleanDomain()), false )
		});
		
		//step 3
		observationDBN.add(new AssignmentProposition[]{
				new AssignmentProposition(new RandVar("Z", new BooleanDomain()), false )
		});
		
		//step 4
		observationDBN.add(new AssignmentProposition[]{
				new AssignmentProposition(new RandVar("Z", new BooleanDomain()), true )
		});
		
		//step 5
		observationDBN.add(new AssignmentProposition[]{
				new AssignmentProposition(new RandVar("Z", new BooleanDomain()), false )
		});
		
		//step 6
		observationDBN.add(new AssignmentProposition[]{
				new AssignmentProposition(new RandVar("Z", new BooleanDomain()), false )
		});
		
		//step 7
		observationDBN.add(new AssignmentProposition[]{
				new AssignmentProposition(new RandVar("Z", new BooleanDomain()), false )
		});
		
		//step 8
		observationDBN.add(new AssignmentProposition[]{
				new AssignmentProposition(new RandVar("Z", new BooleanDomain()), false )
		});
		
		//step 9
		observationDBN.add(new AssignmentProposition[]{
				new AssignmentProposition(new RandVar("Z", new BooleanDomain()), true )
		});

		observations.add(observationDBN);
		
		
		//****** EXPERIMENT 4 (asia) *******/
		networks.add(DynamicBayesNetExampleFactory.getAsiaNetwork());
		
		randVars = new TimeRandomVariable[]{
				//new RandVar("Asia_t-1", new BooleanDomain()),
				new RandVar("Asia", new BooleanDomain()) //per bug su particlefiltering
		};
		queryVars.add(randVars);
		
		
		observationDBN = new LinkedList<>();
		
		//step 1
		observationDBN.add(new AssignmentProposition[]{
				new AssignmentProposition(new RandVar("Either", new BooleanDomain()), true ),
				new AssignmentProposition(new RandVar("Bronc", new BooleanDomain()), false )
		});
		
		//step 2
		observationDBN.add(new AssignmentProposition[]{
				new AssignmentProposition(new RandVar("Either", new BooleanDomain()), true ),
				new AssignmentProposition(new RandVar("Bronc", new BooleanDomain()), true )
		});

		observations.add(observationDBN);
	}

}

----------------------------------- SOURCE END -------------------------------------
!STACK 0
java.lang.IllegalArgumentException
	at org.eclipse.jdt.core.dom.ASTNode.setSourceRange(ASTNode.java:2845)
	at org.eclipse.jdt.core.dom.ASTConverter.convert(ASTConverter.java:2208)
	at org.eclipse.jdt.core.dom.ASTConverter.convert(ASTConverter.java:1781)
	at org.eclipse.jdt.core.dom.ASTConverter.convertToParenthesizedExpression(ASTConverter.java:3238)
	at org.eclipse.jdt.core.dom.ASTConverter.convert(ASTConverter.java:1684)
	at org.eclipse.jdt.core.dom.ASTConverter.convert(ASTConverter.java:1091)
	at org.eclipse.jdt.core.dom.ASTConverter.convert(ASTConverter.java:1715)
	at org.eclipse.jdt.core.dom.ASTConverter.convert(ASTConverter.java:2758)
	at org.eclipse.jdt.core.dom.ASTConverter.convert(ASTConverter.java:639)
	at org.eclipse.jdt.core.dom.ASTConverter.buildBodyDeclarations(ASTConverter.java:195)
	at org.eclipse.jdt.core.dom.ASTConverter.convert(ASTConverter.java:2965)
	at org.eclipse.jdt.core.dom.ASTConverter.convert(ASTConverter.java:1374)
	at org.eclipse.jdt.core.dom.AST.convertCompilationUnit(AST.java:270)
	at org.eclipse.jdt.internal.core.ReconcileWorkingCopyOperation.makeConsistent(ReconcileWorkingCopyOperation.java:207)
	at org.eclipse.jdt.internal.core.ReconcileWorkingCopyOperation.executeOperation(ReconcileWorkingCopyOperation.java:90)
	at org.eclipse.jdt.internal.core.JavaModelOperation.run(JavaModelOperation.java:724)
	at org.eclipse.jdt.internal.core.JavaModelOperation.runOperation(JavaModelOperation.java:790)
	at org.eclipse.jdt.internal.core.CompilationUnit.reconcile(CompilationUnit.java:1250)
	at org.eclipse.jdt.internal.ui.text.java.JavaReconcilingStrategy.reconcile(JavaReconcilingStrategy.java:128)
	at org.eclipse.jdt.internal.ui.text.java.JavaReconcilingStrategy.access$0(JavaReconcilingStrategy.java:110)
	at org.eclipse.jdt.internal.ui.text.java.JavaReconcilingStrategy$1.run(JavaReconcilingStrategy.java:90)
	at org.eclipse.core.runtime.SafeRunner.run(SafeRunner.java:42)
	at org.eclipse.jdt.internal.ui.text.java.JavaReconcilingStrategy.reconcile(JavaReconcilingStrategy.java:87)
	at org.eclipse.jdt.internal.ui.text.java.JavaReconcilingStrategy.reconcile(JavaReconcilingStrategy.java:162)
	at org.eclipse.jdt.internal.ui.text.CompositeReconcilingStrategy.reconcile(CompositeReconcilingStrategy.java:77)
	at org.eclipse.jdt.internal.ui.text.JavaCompositeReconcilingStrategy.reconcile(JavaCompositeReconcilingStrategy.java:82)
	at org.eclipse.jface.text.reconciler.MonoReconciler.process(MonoReconciler.java:69)
	at org.eclipse.jface.text.reconciler.AbstractReconciler$BackgroundThread.run(AbstractReconciler.java:207)

!ENTRY org.eclipse.jdt.ui 4 2 2020-06-05 12:48:52.194
!MESSAGE Problems occurred when invoking code from plug-in: "org.eclipse.jdt.ui".
!STACK 0
java.lang.IllegalArgumentException
	at org.eclipse.jdt.core.dom.ASTNode.setSourceRange(ASTNode.java:2845)
	at org.eclipse.jdt.core.dom.ASTConverter.convert(ASTConverter.java:2208)
	at org.eclipse.jdt.core.dom.ASTConverter.convert(ASTConverter.java:1781)
	at org.eclipse.jdt.core.dom.ASTConverter.convertToParenthesizedExpression(ASTConverter.java:3238)
	at org.eclipse.jdt.core.dom.ASTConverter.convert(ASTConverter.java:1684)
	at org.eclipse.jdt.core.dom.ASTConverter.convert(ASTConverter.java:1091)
	at org.eclipse.jdt.core.dom.ASTConverter.convert(ASTConverter.java:1715)
	at org.eclipse.jdt.core.dom.ASTConverter.convert(ASTConverter.java:2758)
	at org.eclipse.jdt.core.dom.ASTConverter.convert(ASTConverter.java:639)
	at org.eclipse.jdt.core.dom.ASTConverter.buildBodyDeclarations(ASTConverter.java:195)
	at org.eclipse.jdt.core.dom.ASTConverter.convert(ASTConverter.java:2965)
	at org.eclipse.jdt.core.dom.ASTConverter.convert(ASTConverter.java:1374)
	at org.eclipse.jdt.core.dom.AST.convertCompilationUnit(AST.java:270)
	at org.eclipse.jdt.internal.core.ReconcileWorkingCopyOperation.makeConsistent(ReconcileWorkingCopyOperation.java:207)
	at org.eclipse.jdt.internal.core.ReconcileWorkingCopyOperation.executeOperation(ReconcileWorkingCopyOperation.java:90)
	at org.eclipse.jdt.internal.core.JavaModelOperation.run(JavaModelOperation.java:724)
	at org.eclipse.jdt.internal.core.JavaModelOperation.runOperation(JavaModelOperation.java:790)
	at org.eclipse.jdt.internal.core.CompilationUnit.reconcile(CompilationUnit.java:1250)
	at org.eclipse.jdt.internal.ui.text.java.JavaReconcilingStrategy.reconcile(JavaReconcilingStrategy.java:128)
	at org.eclipse.jdt.internal.ui.text.java.JavaReconcilingStrategy.access$0(JavaReconcilingStrategy.java:110)
	at org.eclipse.jdt.internal.ui.text.java.JavaReconcilingStrategy$1.run(JavaReconcilingStrategy.java:90)
	at org.eclipse.core.runtime.SafeRunner.run(SafeRunner.java:42)
	at org.eclipse.jdt.internal.ui.text.java.JavaReconcilingStrategy.reconcile(JavaReconcilingStrategy.java:87)
	at org.eclipse.jdt.internal.ui.text.java.JavaReconcilingStrategy.reconcile(JavaReconcilingStrategy.java:162)
	at org.eclipse.jdt.internal.ui.text.CompositeReconcilingStrategy.reconcile(CompositeReconcilingStrategy.java:77)
	at org.eclipse.jdt.internal.ui.text.JavaCompositeReconcilingStrategy.reconcile(JavaCompositeReconcilingStrategy.java:82)
	at org.eclipse.jface.text.reconciler.MonoReconciler.process(MonoReconciler.java:69)
	at org.eclipse.jface.text.reconciler.AbstractReconciler$BackgroundThread.run(AbstractReconciler.java:207)

!ENTRY org.eclipse.jdt.ui 4 0 2020-06-05 12:48:52.195
!MESSAGE Error in JDT Core during reconcile
!STACK 0
java.lang.IllegalArgumentException
	at org.eclipse.jdt.core.dom.ASTNode.setSourceRange(ASTNode.java:2845)
	at org.eclipse.jdt.core.dom.ASTConverter.convert(ASTConverter.java:2208)
	at org.eclipse.jdt.core.dom.ASTConverter.convert(ASTConverter.java:1781)
	at org.eclipse.jdt.core.dom.ASTConverter.convertToParenthesizedExpression(ASTConverter.java:3238)
	at org.eclipse.jdt.core.dom.ASTConverter.convert(ASTConverter.java:1684)
	at org.eclipse.jdt.core.dom.ASTConverter.convert(ASTConverter.java:1091)
	at org.eclipse.jdt.core.dom.ASTConverter.convert(ASTConverter.java:1715)
	at org.eclipse.jdt.core.dom.ASTConverter.convert(ASTConverter.java:2758)
	at org.eclipse.jdt.core.dom.ASTConverter.convert(ASTConverter.java:639)
	at org.eclipse.jdt.core.dom.ASTConverter.buildBodyDeclarations(ASTConverter.java:195)
	at org.eclipse.jdt.core.dom.ASTConverter.convert(ASTConverter.java:2965)
	at org.eclipse.jdt.core.dom.ASTConverter.convert(ASTConverter.java:1374)
	at org.eclipse.jdt.core.dom.AST.convertCompilationUnit(AST.java:270)
	at org.eclipse.jdt.internal.core.ReconcileWorkingCopyOperation.makeConsistent(ReconcileWorkingCopyOperation.java:207)
	at org.eclipse.jdt.internal.core.ReconcileWorkingCopyOperation.executeOperation(ReconcileWorkingCopyOperation.java:90)
	at org.eclipse.jdt.internal.core.JavaModelOperation.run(JavaModelOperation.java:724)
	at org.eclipse.jdt.internal.core.JavaModelOperation.runOperation(JavaModelOperation.java:790)
	at org.eclipse.jdt.internal.core.CompilationUnit.reconcile(CompilationUnit.java:1250)
	at org.eclipse.jdt.internal.ui.text.java.JavaReconcilingStrategy.reconcile(JavaReconcilingStrategy.java:128)
	at org.eclipse.jdt.internal.ui.text.java.JavaReconcilingStrategy.access$0(JavaReconcilingStrategy.java:110)
	at org.eclipse.jdt.internal.ui.text.java.JavaReconcilingStrategy$1.run(JavaReconcilingStrategy.java:90)
	at org.eclipse.core.runtime.SafeRunner.run(SafeRunner.java:42)
	at org.eclipse.jdt.internal.ui.text.java.JavaReconcilingStrategy.reconcile(JavaReconcilingStrategy.java:87)
	at org.eclipse.jdt.internal.ui.text.java.JavaReconcilingStrategy.reconcile(JavaReconcilingStrategy.java:162)
	at org.eclipse.jdt.internal.ui.text.CompositeReconcilingStrategy.reconcile(CompositeReconcilingStrategy.java:77)
	at org.eclipse.jdt.internal.ui.text.JavaCompositeReconcilingStrategy.reconcile(JavaCompositeReconcilingStrategy.java:82)
	at org.eclipse.jface.text.reconciler.MonoReconciler.process(MonoReconciler.java:69)
	at org.eclipse.jface.text.reconciler.AbstractReconciler$BackgroundThread.run(AbstractReconciler.java:207)

!ENTRY org.eclipse.jdt.ui 4 2 2020-06-05 12:48:52.197
!MESSAGE Problems occurred when invoking code from plug-in: "org.eclipse.jdt.ui".
!STACK 0
java.lang.IllegalArgumentException
	at org.eclipse.jdt.core.dom.ASTNode.setSourceRange(ASTNode.java:2845)
	at org.eclipse.jdt.core.dom.ASTConverter.convert(ASTConverter.java:2208)
	at org.eclipse.jdt.core.dom.ASTConverter.convert(ASTConverter.java:1781)
	at org.eclipse.jdt.core.dom.ASTConverter.convertToParenthesizedExpression(ASTConverter.java:3238)
	at org.eclipse.jdt.core.dom.ASTConverter.convert(ASTConverter.java:1684)
	at org.eclipse.jdt.core.dom.ASTConverter.convert(ASTConverter.java:1091)
	at org.eclipse.jdt.core.dom.ASTConverter.convert(ASTConverter.java:1715)
	at org.eclipse.jdt.core.dom.ASTConverter.convert(ASTConverter.java:2758)
	at org.eclipse.jdt.core.dom.ASTConverter.convert(ASTConverter.java:639)
	at org.eclipse.jdt.core.dom.ASTConverter.buildBodyDeclarations(ASTConverter.java:195)
	at org.eclipse.jdt.core.dom.ASTConverter.convert(ASTConverter.java:2965)
	at org.eclipse.jdt.core.dom.ASTConverter.convert(ASTConverter.java:1374)
	at org.eclipse.jdt.core.dom.AST.convertCompilationUnit(AST.java:270)
	at org.eclipse.jdt.internal.core.ReconcileWorkingCopyOperation.makeConsistent(ReconcileWorkingCopyOperation.java:207)
	at org.eclipse.jdt.internal.core.ReconcileWorkingCopyOperation.executeOperation(ReconcileWorkingCopyOperation.java:90)
	at org.eclipse.jdt.internal.core.JavaModelOperation.run(JavaModelOperation.java:724)
	at org.eclipse.jdt.internal.core.JavaModelOperation.runOperation(JavaModelOperation.java:790)
	at org.eclipse.jdt.internal.core.CompilationUnit.reconcile(CompilationUnit.java:1250)
	at org.eclipse.jdt.internal.ui.text.java.JavaReconcilingStrategy.reconcile(JavaReconcilingStrategy.java:128)
	at org.eclipse.jdt.internal.ui.text.java.JavaReconcilingStrategy.access$0(JavaReconcilingStrategy.java:110)
	at org.eclipse.jdt.internal.ui.text.java.JavaReconcilingStrategy$1.run(JavaReconcilingStrategy.java:90)
	at org.eclipse.core.runtime.SafeRunner.run(SafeRunner.java:42)
	at org.eclipse.jdt.internal.ui.text.java.JavaReconcilingStrategy.reconcile(JavaReconcilingStrategy.java:87)
	at org.eclipse.jdt.internal.ui.text.java.JavaReconcilingStrategy.reconcile(JavaReconcilingStrategy.java:162)
	at org.eclipse.jdt.internal.ui.text.CompositeReconcilingStrategy.reconcile(CompositeReconcilingStrategy.java:77)
	at org.eclipse.jdt.internal.ui.text.JavaCompositeReconcilingStrategy.reconcile(JavaCompositeReconcilingStrategy.java:82)
	at org.eclipse.jface.text.reconciler.MonoReconciler.process(MonoReconciler.java:69)
	at org.eclipse.jface.text.reconciler.AbstractReconciler$BackgroundThread.run(AbstractReconciler.java:207)

!ENTRY org.eclipse.jdt.ui 4 0 2020-06-05 12:48:52.198
!MESSAGE Error in JDT Core during reconcile
!STACK 0
java.lang.IllegalArgumentException
	at org.eclipse.jdt.core.dom.ASTNode.setSourceRange(ASTNode.java:2845)
	at org.eclipse.jdt.core.dom.ASTConverter.convert(ASTConverter.java:2208)
	at org.eclipse.jdt.core.dom.ASTConverter.convert(ASTConverter.java:1781)
	at org.eclipse.jdt.core.dom.ASTConverter.convertToParenthesizedExpression(ASTConverter.java:3238)
	at org.eclipse.jdt.core.dom.ASTConverter.convert(ASTConverter.java:1684)
	at org.eclipse.jdt.core.dom.ASTConverter.convert(ASTConverter.java:1091)
	at org.eclipse.jdt.core.dom.ASTConverter.convert(ASTConverter.java:1715)
	at org.eclipse.jdt.core.dom.ASTConverter.convert(ASTConverter.java:2758)
	at org.eclipse.jdt.core.dom.ASTConverter.convert(ASTConverter.java:639)
	at org.eclipse.jdt.core.dom.ASTConverter.buildBodyDeclarations(ASTConverter.java:195)
	at org.eclipse.jdt.core.dom.ASTConverter.convert(ASTConverter.java:2965)
	at org.eclipse.jdt.core.dom.ASTConverter.convert(ASTConverter.java:1374)
	at org.eclipse.jdt.core.dom.AST.convertCompilationUnit(AST.java:270)
	at org.eclipse.jdt.internal.core.ReconcileWorkingCopyOperation.makeConsistent(ReconcileWorkingCopyOperation.java:207)
	at org.eclipse.jdt.internal.core.ReconcileWorkingCopyOperation.executeOperation(ReconcileWorkingCopyOperation.java:90)
	at org.eclipse.jdt.internal.core.JavaModelOperation.run(JavaModelOperation.java:724)
	at org.eclipse.jdt.internal.core.JavaModelOperation.runOperation(JavaModelOperation.java:790)
	at org.eclipse.jdt.internal.core.CompilationUnit.reconcile(CompilationUnit.java:1250)
	at org.eclipse.jdt.internal.ui.text.java.JavaReconcilingStrategy.reconcile(JavaReconcilingStrategy.java:128)
	at org.eclipse.jdt.internal.ui.text.java.JavaReconcilingStrategy.access$0(JavaReconcilingStrategy.java:110)
	at org.eclipse.jdt.internal.ui.text.java.JavaReconcilingStrategy$1.run(JavaReconcilingStrategy.java:90)
	at org.eclipse.core.runtime.SafeRunner.run(SafeRunner.java:42)
	at org.eclipse.jdt.internal.ui.text.java.JavaReconcilingStrategy.reconcile(JavaReconcilingStrategy.java:87)
	at org.eclipse.jdt.internal.ui.text.java.JavaReconcilingStrategy.reconcile(JavaReconcilingStrategy.java:162)
	at org.eclipse.jdt.internal.ui.text.CompositeReconcilingStrategy.reconcile(CompositeReconcilingStrategy.java:77)
	at org.eclipse.jdt.internal.ui.text.JavaCompositeReconcilingStrategy.reconcile(JavaCompositeReconcilingStrategy.java:82)
	at org.eclipse.jface.text.reconciler.MonoReconciler.process(MonoReconciler.java:69)
	at org.eclipse.jface.text.reconciler.AbstractReconciler$BackgroundThread.run(AbstractReconciler.java:207)

!ENTRY org.eclipse.jdt.core 4 4 2020-06-05 12:48:52.211
!MESSAGE Exception occurred during compilation unit conversion:
----------------------------------- SOURCE BEGIN -------------------------------------
package it.coluccia.ialab2020.torta.project;

import java.util.ArrayList;
import java.util.Arrays;
import java.util.HashSet;
import java.util.Iterator;
import java.util.LinkedList;
import java.util.List;
import java.util.Map;
import java.util.Set;

import aima.core.probability.Factor;
import aima.core.probability.RandomVariable;
import aima.core.probability.TimeRandomVariable;
import aima.core.probability.bayes.DynamicBayesianNetwork;
import aima.core.probability.bayes.Node;
import aima.core.probability.bayes.approx.ParticleFiltering;
import aima.core.probability.bayes.exact.EliminationAsk;
import aima.core.probability.bayes.impl.BayesNet;
import aima.core.probability.bayes.impl.DynamicBayesNet;
import aima.core.probability.bayes.impl.IalabDBN;
import aima.core.probability.domain.BooleanDomain;
import aima.core.probability.example.DynamicBayesNetExampleFactory;
import aima.core.probability.proposition.AssignmentProposition;
import aima.core.probability.util.ProbabilityTable;
import aima.core.probability.util.RandVar;

public class DynamicBNExercise {
	
	private static List<DynamicBayesianNetwork> networks;
	
	//queryVars[i] --> list of query vars for network i
	private static List<TimeRandomVariable[]> queryVars;
	
	//observations[i] --> list of array of observation for network experiment
	//observations[i][j] --> array of observation for experiment i at time j
	private static List<List<AssignmentProposition[]>> observations;
	
	public static void main(String[] args){
		generateNetworks();
		Iterator<TimeRandomVariable[]> queryIterator = queryVars.iterator();
		Iterator<List<AssignmentProposition[]>> obsIterator = observations.iterator();
		Iterator<DynamicBayesianNetwork> networkIterator = networks.iterator();
		
		EliminationAsk[] inferencesOrder = new EliminationAsk[]{
				new EliminationAsk(),
				new EliminationFill(),
				new EliminationMinDegree()
		};

		int experimentCounter = 0;
		
		//ogni ciclo è un esperimento
		while(networkIterator.hasNext()){
			System.out.println("********* EXPERIMENT "+experimentCounter+" *********");
			
			DynamicBayesianNetwork network = networkIterator.next();
			List<AssignmentProposition[]> observations = obsIterator.next();
			List<RandomVariable> queryVars = Arrays.asList(queryIterator.next());
			
			for(EliminationAsk inference : inferencesOrder){
				System.out.println("\tInference type: "+inference.getClass().getSimpleName());
				//creo IalabDBN
				Set<Node> rootNodes = ((BayesNet)network.getPriorNetwork()).getRootNodes();
				IalabDBN myNetwork = new IalabDBN(
													network.getPriorNetwork(), 
													network.getX_0_to_X_1(), 
													network.getE_1(), 
													rootNodes.toArray(new Node[rootNodes.size()]),
													(DynamicBayesNet)network);

				
				//eseguo algoritmo di VE
				ProbabilityTable values = variableElimination(myNetwork,observations,inference,queryVars);
				double sum = 0;
				for(double value : values.getValues()){
					System.out.println(value);
					sum+=value;
				}
				System.out.println(sum);
				
				//mostro risultati
				for(Node node : myNetwork.getLastCPTs().keySet()){
					if(queryVars.contains(node.getRandomVariable())){
						System.out.println("\tNode: "+node+" --> CPT: "+myNetwork.getLastCPTs().get(node));	
					}
				}
				
				//testo con particle filtering
				int N = 100;
				ParticleFiltering pf = new ParticleFiltering(N,network);
				AssignmentProposition[][] distApprox = null;
				
				for(AssignmentProposition[] obsAssign : observations){
					distApprox = pf.particleFiltering(obsAssign);
				}

				float numberTrue = 0f;	
				for(AssignmentProposition[] val : distApprox){
					for(AssignmentProposition valIn : val){
						if((Boolean)valIn.getValue() && queryVars.contains(valIn.getTermVariable())){
							numberTrue+=1f;
						}
					}
				}
				System.out.println("\tParticleFiltering (approx): "+numberTrue/100f+" , "+(1f-(numberTrue/100f)));
				System.out.println("---------");	
			}
			experimentCounter++;
		}
	}
	
	/**
	 * It applies VE algorithm to specified dbn applying rollup filtering until it reaches final time step
	 * @param myNetwork
	 * @param observations
	 */
	private static ProbabilityTable variableElimination(IalabDBN myNetwork,List<AssignmentProposition[]> observations,EliminationAsk inference, List<RandomVariable> queryVars){
		//per ogni observation faccio uno step forward della mia network
		Factor lastFactor = null;
		for(AssignmentProposition[] obs : observations){
			List<Factor> factorList = new ArrayList<Factor>(Arrays.asList(new Factor[]{}));
			if(lastFactor != null){
				factorList.add(lastFactor);
			}
			lastFactor = EliminationAsk.getProbTableFromFactors(myNetwork.forward(obs,inference,factorList,queryVars),queryVars);
			updateVariableReferenceToPreviousStep((ProbabilityTable)lastFactor,myNetwork.getCurrentSlice());
			
		}
		return (ProbabilityTable)lastFactor;
		//return EliminationAsk.getProbTableFromFactors(factors,queryVars);
		
	}
	
	private static void updateVariableReferenceToPreviousStep(ProbabilityTable lastFactor,DynamicBayesNet slice){
		Map<RandomVariable, RandomVariable> x1Toxo = slice.getX_1_to_X_0();
		Set<RandomVariable> origVariables = lastFactor.getArgumentVariables();
		Set<RandomVariable> updatedVariables = new HashSet<>();
		for(RandomVariable origVar : origVariables){
			updatedVariables.add(x1Toxo.get(origVar));
		}
		ProbabilityTable tmp = new ProbabilityTable(lastFactor.getValues(),updatedVariables.toArray(new ProbabilityTable[](updatedVariables.)));
		lastFactor.setRandomVarInfo(randomVarInfo);
	}

	
	/**
	 * It populates the Networks class variable with the DBN for the experiments
	 * It initializes also QueryVars class variable with the q
	 */
	private static void generateNetworks(){
		networks = new LinkedList<>();
		observations = new LinkedList<>();
		//il nome delle queryVars è fuorviante (è sempre lo stesso del tempo t0 in quanto mantengo la struttura degli slice)
		queryVars = new LinkedList<>(); 

		//****** EXPERIMENT 0 (umbrella) *******/
		networks.add(DynamicBayesNetExampleFactory.getUmbrellaWorldNetwork());
		
		TimeRandomVariable[] randVars = new TimeRandomVariable[]{
				//new RandVar("Rain_t-1", new BooleanDomain()),
				new RandVar("Rain_t", new BooleanDomain()) //per bug su particlefiltering
		};
		queryVars.add(randVars);
		
		
		List<AssignmentProposition[]> observationDBN = new LinkedList<>();
		
		//step 1
		observationDBN.add(new AssignmentProposition[]{
				new AssignmentProposition(new RandVar("Umbrella_t", new BooleanDomain()), true )
		});
		
		//step 2
		observationDBN.add(new AssignmentProposition[]{
				new AssignmentProposition(new RandVar("Umbrella_t", new BooleanDomain()), true )
		});

		observations.add(observationDBN);
		
		//****** EXPERIMENT 1 (umbrella) *******/
		networks.add(DynamicBayesNetExampleFactory.getUmbrellaWorldNetwork());
		
		randVars = new TimeRandomVariable[]{
				//new RandVar("Rain_t-1", new BooleanDomain()),
				new RandVar("Rain_t", new BooleanDomain()) //per bug su particlefiltering
		};
		queryVars.add(randVars);
		
		
		observationDBN = new LinkedList<>();
		
		//step 1
		observationDBN.add(new AssignmentProposition[]{
				new AssignmentProposition(new RandVar("Umbrella_t", new BooleanDomain()), false )
		});
		
		//step 2
		observationDBN.add(new AssignmentProposition[]{
				new AssignmentProposition(new RandVar("Umbrella_t", new BooleanDomain()), true )
		});
		
		//step 3
		observationDBN.add(new AssignmentProposition[]{
				new AssignmentProposition(new RandVar("Umbrella_t", new BooleanDomain()), true )
		});
		
		//step 4
		observationDBN.add(new AssignmentProposition[]{
				new AssignmentProposition(new RandVar("Umbrella_t", new BooleanDomain()), true )
		});
		
		//step 5
		observationDBN.add(new AssignmentProposition[]{
				new AssignmentProposition(new RandVar("Umbrella_t", new BooleanDomain()), false )
		});

		observations.add(observationDBN);
		
		//****** EXPERIMENT 2 (circuit) *******/
		networks.add(DynamicBayesNetExampleFactory.getDigitalCircuitNetExample());
		
		randVars = new TimeRandomVariable[]{
				//new RandVar("J_t-1", new BooleanDomain()),
				new RandVar("Y", new BooleanDomain())
		};
		queryVars.add(randVars);
		
		
		observationDBN = new LinkedList<>();
		
		//step 1
		observationDBN.add(new AssignmentProposition[]{
				new AssignmentProposition(new RandVar("Z", new BooleanDomain()), true )
		});
		
		//step 2
		observationDBN.add(new AssignmentProposition[]{
				new AssignmentProposition(new RandVar("Z", new BooleanDomain()), false )
		});

		observations.add(observationDBN);
		
		//****** EXPERIMENT 3 (circuit) *******/
		networks.add(DynamicBayesNetExampleFactory.getDigitalCircuitNetExample());
		
		randVars = new TimeRandomVariable[]{
				//new RandVar("I_t-1", new BooleanDomain()),
				new RandVar("I", new BooleanDomain()) //per bug su particlefiltering
		};
		queryVars.add(randVars);
		
		
		observationDBN = new LinkedList<>();
		
		//step 1
		observationDBN.add(new AssignmentProposition[]{
				new AssignmentProposition(new RandVar("Z", new BooleanDomain()), true )
		});
		
		//step 2
		observationDBN.add(new AssignmentProposition[]{
				new AssignmentProposition(new RandVar("Z", new BooleanDomain()), false )
		});
		
		//step 3
		observationDBN.add(new AssignmentProposition[]{
				new AssignmentProposition(new RandVar("Z", new BooleanDomain()), false )
		});
		
		//step 4
		observationDBN.add(new AssignmentProposition[]{
				new AssignmentProposition(new RandVar("Z", new BooleanDomain()), true )
		});
		
		//step 5
		observationDBN.add(new AssignmentProposition[]{
				new AssignmentProposition(new RandVar("Z", new BooleanDomain()), false )
		});
		
		//step 6
		observationDBN.add(new AssignmentProposition[]{
				new AssignmentProposition(new RandVar("Z", new BooleanDomain()), false )
		});
		
		//step 7
		observationDBN.add(new AssignmentProposition[]{
				new AssignmentProposition(new RandVar("Z", new BooleanDomain()), false )
		});
		
		//step 8
		observationDBN.add(new AssignmentProposition[]{
				new AssignmentProposition(new RandVar("Z", new BooleanDomain()), false )
		});
		
		//step 9
		observationDBN.add(new AssignmentProposition[]{
				new AssignmentProposition(new RandVar("Z", new BooleanDomain()), true )
		});

		observations.add(observationDBN);
		
		
		//****** EXPERIMENT 4 (asia) *******/
		networks.add(DynamicBayesNetExampleFactory.getAsiaNetwork());
		
		randVars = new TimeRandomVariable[]{
				//new RandVar("Asia_t-1", new BooleanDomain()),
				new RandVar("Asia", new BooleanDomain()) //per bug su particlefiltering
		};
		queryVars.add(randVars);
		
		
		observationDBN = new LinkedList<>();
		
		//step 1
		observationDBN.add(new AssignmentProposition[]{
				new AssignmentProposition(new RandVar("Either", new BooleanDomain()), true ),
				new AssignmentProposition(new RandVar("Bronc", new BooleanDomain()), false )
		});
		
		//step 2
		observationDBN.add(new AssignmentProposition[]{
				new AssignmentProposition(new RandVar("Either", new BooleanDomain()), true ),
				new AssignmentProposition(new RandVar("Bronc", new BooleanDomain()), true )
		});

		observations.add(observationDBN);
	}

}

----------------------------------- SOURCE END -------------------------------------
!STACK 0
java.lang.IllegalArgumentException
	at org.eclipse.jdt.core.dom.ASTNode.setSourceRange(ASTNode.java:2845)
	at org.eclipse.jdt.core.dom.ASTConverter.convert(ASTConverter.java:2208)
	at org.eclipse.jdt.core.dom.ASTConverter.convert(ASTConverter.java:1781)
	at org.eclipse.jdt.core.dom.ASTConverter.convertToParenthesizedExpression(ASTConverter.java:3238)
	at org.eclipse.jdt.core.dom.ASTConverter.convert(ASTConverter.java:1684)
	at org.eclipse.jdt.core.dom.ASTConverter.convert(ASTConverter.java:1091)
	at org.eclipse.jdt.core.dom.ASTConverter.convert(ASTConverter.java:1715)
	at org.eclipse.jdt.core.dom.ASTConverter.convert(ASTConverter.java:2758)
	at org.eclipse.jdt.core.dom.ASTConverter.convert(ASTConverter.java:639)
	at org.eclipse.jdt.core.dom.ASTConverter.buildBodyDeclarations(ASTConverter.java:195)
	at org.eclipse.jdt.core.dom.ASTConverter.convert(ASTConverter.java:2965)
	at org.eclipse.jdt.core.dom.ASTConverter.convert(ASTConverter.java:1374)
	at org.eclipse.jdt.core.dom.AST.convertCompilationUnit(AST.java:270)
	at org.eclipse.jdt.internal.core.ReconcileWorkingCopyOperation.makeConsistent(ReconcileWorkingCopyOperation.java:207)
	at org.eclipse.jdt.internal.core.ReconcileWorkingCopyOperation.executeOperation(ReconcileWorkingCopyOperation.java:90)
	at org.eclipse.jdt.internal.core.JavaModelOperation.run(JavaModelOperation.java:724)
	at org.eclipse.jdt.internal.core.JavaModelOperation.runOperation(JavaModelOperation.java:790)
	at org.eclipse.jdt.internal.core.CompilationUnit.reconcile(CompilationUnit.java:1250)
	at org.eclipse.jdt.internal.ui.text.java.JavaReconcilingStrategy.reconcile(JavaReconcilingStrategy.java:128)
	at org.eclipse.jdt.internal.ui.text.java.JavaReconcilingStrategy.access$0(JavaReconcilingStrategy.java:110)
	at org.eclipse.jdt.internal.ui.text.java.JavaReconcilingStrategy$1.run(JavaReconcilingStrategy.java:90)
	at org.eclipse.core.runtime.SafeRunner.run(SafeRunner.java:42)
	at org.eclipse.jdt.internal.ui.text.java.JavaReconcilingStrategy.reconcile(JavaReconcilingStrategy.java:87)
	at org.eclipse.jdt.internal.ui.text.java.JavaReconcilingStrategy.reconcile(JavaReconcilingStrategy.java:162)
	at org.eclipse.jdt.internal.ui.text.CompositeReconcilingStrategy.reconcile(CompositeReconcilingStrategy.java:77)
	at org.eclipse.jdt.internal.ui.text.JavaCompositeReconcilingStrategy.reconcile(JavaCompositeReconcilingStrategy.java:82)
	at org.eclipse.jface.text.reconciler.MonoReconciler.process(MonoReconciler.java:69)
	at org.eclipse.jface.text.reconciler.AbstractReconciler$BackgroundThread.run(AbstractReconciler.java:207)

!ENTRY org.eclipse.jdt.ui 4 2 2020-06-05 12:48:52.213
!MESSAGE Problems occurred when invoking code from plug-in: "org.eclipse.jdt.ui".
!STACK 0
java.lang.IllegalArgumentException
	at org.eclipse.jdt.core.dom.ASTNode.setSourceRange(ASTNode.java:2845)
	at org.eclipse.jdt.core.dom.ASTConverter.convert(ASTConverter.java:2208)
	at org.eclipse.jdt.core.dom.ASTConverter.convert(ASTConverter.java:1781)
	at org.eclipse.jdt.core.dom.ASTConverter.convertToParenthesizedExpression(ASTConverter.java:3238)
	at org.eclipse.jdt.core.dom.ASTConverter.convert(ASTConverter.java:1684)
	at org.eclipse.jdt.core.dom.ASTConverter.convert(ASTConverter.java:1091)
	at org.eclipse.jdt.core.dom.ASTConverter.convert(ASTConverter.java:1715)
	at org.eclipse.jdt.core.dom.ASTConverter.convert(ASTConverter.java:2758)
	at org.eclipse.jdt.core.dom.ASTConverter.convert(ASTConverter.java:639)
	at org.eclipse.jdt.core.dom.ASTConverter.buildBodyDeclarations(ASTConverter.java:195)
	at org.eclipse.jdt.core.dom.ASTConverter.convert(ASTConverter.java:2965)
	at org.eclipse.jdt.core.dom.ASTConverter.convert(ASTConverter.java:1374)
	at org.eclipse.jdt.core.dom.AST.convertCompilationUnit(AST.java:270)
	at org.eclipse.jdt.internal.core.ReconcileWorkingCopyOperation.makeConsistent(ReconcileWorkingCopyOperation.java:207)
	at org.eclipse.jdt.internal.core.ReconcileWorkingCopyOperation.executeOperation(ReconcileWorkingCopyOperation.java:90)
	at org.eclipse.jdt.internal.core.JavaModelOperation.run(JavaModelOperation.java:724)
	at org.eclipse.jdt.internal.core.JavaModelOperation.runOperation(JavaModelOperation.java:790)
	at org.eclipse.jdt.internal.core.CompilationUnit.reconcile(CompilationUnit.java:1250)
	at org.eclipse.jdt.internal.ui.text.java.JavaReconcilingStrategy.reconcile(JavaReconcilingStrategy.java:128)
	at org.eclipse.jdt.internal.ui.text.java.JavaReconcilingStrategy.access$0(JavaReconcilingStrategy.java:110)
	at org.eclipse.jdt.internal.ui.text.java.JavaReconcilingStrategy$1.run(JavaReconcilingStrategy.java:90)
	at org.eclipse.core.runtime.SafeRunner.run(SafeRunner.java:42)
	at org.eclipse.jdt.internal.ui.text.java.JavaReconcilingStrategy.reconcile(JavaReconcilingStrategy.java:87)
	at org.eclipse.jdt.internal.ui.text.java.JavaReconcilingStrategy.reconcile(JavaReconcilingStrategy.java:162)
	at org.eclipse.jdt.internal.ui.text.CompositeReconcilingStrategy.reconcile(CompositeReconcilingStrategy.java:77)
	at org.eclipse.jdt.internal.ui.text.JavaCompositeReconcilingStrategy.reconcile(JavaCompositeReconcilingStrategy.java:82)
	at org.eclipse.jface.text.reconciler.MonoReconciler.process(MonoReconciler.java:69)
	at org.eclipse.jface.text.reconciler.AbstractReconciler$BackgroundThread.run(AbstractReconciler.java:207)

!ENTRY org.eclipse.jdt.ui 4 0 2020-06-05 12:48:52.213
!MESSAGE Error in JDT Core during reconcile
!STACK 0
java.lang.IllegalArgumentException
	at org.eclipse.jdt.core.dom.ASTNode.setSourceRange(ASTNode.java:2845)
	at org.eclipse.jdt.core.dom.ASTConverter.convert(ASTConverter.java:2208)
	at org.eclipse.jdt.core.dom.ASTConverter.convert(ASTConverter.java:1781)
	at org.eclipse.jdt.core.dom.ASTConverter.convertToParenthesizedExpression(ASTConverter.java:3238)
	at org.eclipse.jdt.core.dom.ASTConverter.convert(ASTConverter.java:1684)
	at org.eclipse.jdt.core.dom.ASTConverter.convert(ASTConverter.java:1091)
	at org.eclipse.jdt.core.dom.ASTConverter.convert(ASTConverter.java:1715)
	at org.eclipse.jdt.core.dom.ASTConverter.convert(ASTConverter.java:2758)
	at org.eclipse.jdt.core.dom.ASTConverter.convert(ASTConverter.java:639)
	at org.eclipse.jdt.core.dom.ASTConverter.buildBodyDeclarations(ASTConverter.java:195)
	at org.eclipse.jdt.core.dom.ASTConverter.convert(ASTConverter.java:2965)
	at org.eclipse.jdt.core.dom.ASTConverter.convert(ASTConverter.java:1374)
	at org.eclipse.jdt.core.dom.AST.convertCompilationUnit(AST.java:270)
	at org.eclipse.jdt.internal.core.ReconcileWorkingCopyOperation.makeConsistent(ReconcileWorkingCopyOperation.java:207)
	at org.eclipse.jdt.internal.core.ReconcileWorkingCopyOperation.executeOperation(ReconcileWorkingCopyOperation.java:90)
	at org.eclipse.jdt.internal.core.JavaModelOperation.run(JavaModelOperation.java:724)
	at org.eclipse.jdt.internal.core.JavaModelOperation.runOperation(JavaModelOperation.java:790)
	at org.eclipse.jdt.internal.core.CompilationUnit.reconcile(CompilationUnit.java:1250)
	at org.eclipse.jdt.internal.ui.text.java.JavaReconcilingStrategy.reconcile(JavaReconcilingStrategy.java:128)
	at org.eclipse.jdt.internal.ui.text.java.JavaReconcilingStrategy.access$0(JavaReconcilingStrategy.java:110)
	at org.eclipse.jdt.internal.ui.text.java.JavaReconcilingStrategy$1.run(JavaReconcilingStrategy.java:90)
	at org.eclipse.core.runtime.SafeRunner.run(SafeRunner.java:42)
	at org.eclipse.jdt.internal.ui.text.java.JavaReconcilingStrategy.reconcile(JavaReconcilingStrategy.java:87)
	at org.eclipse.jdt.internal.ui.text.java.JavaReconcilingStrategy.reconcile(JavaReconcilingStrategy.java:162)
	at org.eclipse.jdt.internal.ui.text.CompositeReconcilingStrategy.reconcile(CompositeReconcilingStrategy.java:77)
	at org.eclipse.jdt.internal.ui.text.JavaCompositeReconcilingStrategy.reconcile(JavaCompositeReconcilingStrategy.java:82)
	at org.eclipse.jface.text.reconciler.MonoReconciler.process(MonoReconciler.java:69)
	at org.eclipse.jface.text.reconciler.AbstractReconciler$BackgroundThread.run(AbstractReconciler.java:207)

!ENTRY org.eclipse.jdt.core 4 4 2020-06-05 12:48:52.215
!MESSAGE Exception occurred during compilation unit conversion:
----------------------------------- SOURCE BEGIN -------------------------------------
package it.coluccia.ialab2020.torta.project;

import java.util.ArrayList;
import java.util.Arrays;
import java.util.HashSet;
import java.util.Iterator;
import java.util.LinkedList;
import java.util.List;
import java.util.Map;
import java.util.Set;

import aima.core.probability.Factor;
import aima.core.probability.RandomVariable;
import aima.core.probability.TimeRandomVariable;
import aima.core.probability.bayes.DynamicBayesianNetwork;
import aima.core.probability.bayes.Node;
import aima.core.probability.bayes.approx.ParticleFiltering;
import aima.core.probability.bayes.exact.EliminationAsk;
import aima.core.probability.bayes.impl.BayesNet;
import aima.core.probability.bayes.impl.DynamicBayesNet;
import aima.core.probability.bayes.impl.IalabDBN;
import aima.core.probability.domain.BooleanDomain;
import aima.core.probability.example.DynamicBayesNetExampleFactory;
import aima.core.probability.proposition.AssignmentProposition;
import aima.core.probability.util.ProbabilityTable;
import aima.core.probability.util.RandVar;

public class DynamicBNExercise {
	
	private static List<DynamicBayesianNetwork> networks;
	
	//queryVars[i] --> list of query vars for network i
	private static List<TimeRandomVariable[]> queryVars;
	
	//observations[i] --> list of array of observation for network experiment
	//observations[i][j] --> array of observation for experiment i at time j
	private static List<List<AssignmentProposition[]>> observations;
	
	public static void main(String[] args){
		generateNetworks();
		Iterator<TimeRandomVariable[]> queryIterator = queryVars.iterator();
		Iterator<List<AssignmentProposition[]>> obsIterator = observations.iterator();
		Iterator<DynamicBayesianNetwork> networkIterator = networks.iterator();
		
		EliminationAsk[] inferencesOrder = new EliminationAsk[]{
				new EliminationAsk(),
				new EliminationFill(),
				new EliminationMinDegree()
		};

		int experimentCounter = 0;
		
		//ogni ciclo è un esperimento
		while(networkIterator.hasNext()){
			System.out.println("********* EXPERIMENT "+experimentCounter+" *********");
			
			DynamicBayesianNetwork network = networkIterator.next();
			List<AssignmentProposition[]> observations = obsIterator.next();
			List<RandomVariable> queryVars = Arrays.asList(queryIterator.next());
			
			for(EliminationAsk inference : inferencesOrder){
				System.out.println("\tInference type: "+inference.getClass().getSimpleName());
				//creo IalabDBN
				Set<Node> rootNodes = ((BayesNet)network.getPriorNetwork()).getRootNodes();
				IalabDBN myNetwork = new IalabDBN(
													network.getPriorNetwork(), 
													network.getX_0_to_X_1(), 
													network.getE_1(), 
													rootNodes.toArray(new Node[rootNodes.size()]),
													(DynamicBayesNet)network);

				
				//eseguo algoritmo di VE
				ProbabilityTable values = variableElimination(myNetwork,observations,inference,queryVars);
				double sum = 0;
				for(double value : values.getValues()){
					System.out.println(value);
					sum+=value;
				}
				System.out.println(sum);
				
				//mostro risultati
				for(Node node : myNetwork.getLastCPTs().keySet()){
					if(queryVars.contains(node.getRandomVariable())){
						System.out.println("\tNode: "+node+" --> CPT: "+myNetwork.getLastCPTs().get(node));	
					}
				}
				
				//testo con particle filtering
				int N = 100;
				ParticleFiltering pf = new ParticleFiltering(N,network);
				AssignmentProposition[][] distApprox = null;
				
				for(AssignmentProposition[] obsAssign : observations){
					distApprox = pf.particleFiltering(obsAssign);
				}

				float numberTrue = 0f;	
				for(AssignmentProposition[] val : distApprox){
					for(AssignmentProposition valIn : val){
						if((Boolean)valIn.getValue() && queryVars.contains(valIn.getTermVariable())){
							numberTrue+=1f;
						}
					}
				}
				System.out.println("\tParticleFiltering (approx): "+numberTrue/100f+" , "+(1f-(numberTrue/100f)));
				System.out.println("---------");	
			}
			experimentCounter++;
		}
	}
	
	/**
	 * It applies VE algorithm to specified dbn applying rollup filtering until it reaches final time step
	 * @param myNetwork
	 * @param observations
	 */
	private static ProbabilityTable variableElimination(IalabDBN myNetwork,List<AssignmentProposition[]> observations,EliminationAsk inference, List<RandomVariable> queryVars){
		//per ogni observation faccio uno step forward della mia network
		Factor lastFactor = null;
		for(AssignmentProposition[] obs : observations){
			List<Factor> factorList = new ArrayList<Factor>(Arrays.asList(new Factor[]{}));
			if(lastFactor != null){
				factorList.add(lastFactor);
			}
			lastFactor = EliminationAsk.getProbTableFromFactors(myNetwork.forward(obs,inference,factorList,queryVars),queryVars);
			updateVariableReferenceToPreviousStep((ProbabilityTable)lastFactor,myNetwork.getCurrentSlice());
			
		}
		return (ProbabilityTable)lastFactor;
		//return EliminationAsk.getProbTableFromFactors(factors,queryVars);
		
	}
	
	private static void updateVariableReferenceToPreviousStep(ProbabilityTable lastFactor,DynamicBayesNet slice){
		Map<RandomVariable, RandomVariable> x1Toxo = slice.getX_1_to_X_0();
		Set<RandomVariable> origVariables = lastFactor.getArgumentVariables();
		Set<RandomVariable> updatedVariables = new HashSet<>();
		for(RandomVariable origVar : origVariables){
			updatedVariables.add(x1Toxo.get(origVar));
		}
		ProbabilityTable tmp = new ProbabilityTable(lastFactor.getValues(),updatedVariables.toArray(new ProbabilityTable[](updatedVariables.)));
		lastFactor.setRandomVarInfo(randomVarInfo);
	}

	
	/**
	 * It populates the Networks class variable with the DBN for the experiments
	 * It initializes also QueryVars class variable with the q
	 */
	private static void generateNetworks(){
		networks = new LinkedList<>();
		observations = new LinkedList<>();
		//il nome delle queryVars è fuorviante (è sempre lo stesso del tempo t0 in quanto mantengo la struttura degli slice)
		queryVars = new LinkedList<>(); 

		//****** EXPERIMENT 0 (umbrella) *******/
		networks.add(DynamicBayesNetExampleFactory.getUmbrellaWorldNetwork());
		
		TimeRandomVariable[] randVars = new TimeRandomVariable[]{
				//new RandVar("Rain_t-1", new BooleanDomain()),
				new RandVar("Rain_t", new BooleanDomain()) //per bug su particlefiltering
		};
		queryVars.add(randVars);
		
		
		List<AssignmentProposition[]> observationDBN = new LinkedList<>();
		
		//step 1
		observationDBN.add(new AssignmentProposition[]{
				new AssignmentProposition(new RandVar("Umbrella_t", new BooleanDomain()), true )
		});
		
		//step 2
		observationDBN.add(new AssignmentProposition[]{
				new AssignmentProposition(new RandVar("Umbrella_t", new BooleanDomain()), true )
		});

		observations.add(observationDBN);
		
		//****** EXPERIMENT 1 (umbrella) *******/
		networks.add(DynamicBayesNetExampleFactory.getUmbrellaWorldNetwork());
		
		randVars = new TimeRandomVariable[]{
				//new RandVar("Rain_t-1", new BooleanDomain()),
				new RandVar("Rain_t", new BooleanDomain()) //per bug su particlefiltering
		};
		queryVars.add(randVars);
		
		
		observationDBN = new LinkedList<>();
		
		//step 1
		observationDBN.add(new AssignmentProposition[]{
				new AssignmentProposition(new RandVar("Umbrella_t", new BooleanDomain()), false )
		});
		
		//step 2
		observationDBN.add(new AssignmentProposition[]{
				new AssignmentProposition(new RandVar("Umbrella_t", new BooleanDomain()), true )
		});
		
		//step 3
		observationDBN.add(new AssignmentProposition[]{
				new AssignmentProposition(new RandVar("Umbrella_t", new BooleanDomain()), true )
		});
		
		//step 4
		observationDBN.add(new AssignmentProposition[]{
				new AssignmentProposition(new RandVar("Umbrella_t", new BooleanDomain()), true )
		});
		
		//step 5
		observationDBN.add(new AssignmentProposition[]{
				new AssignmentProposition(new RandVar("Umbrella_t", new BooleanDomain()), false )
		});

		observations.add(observationDBN);
		
		//****** EXPERIMENT 2 (circuit) *******/
		networks.add(DynamicBayesNetExampleFactory.getDigitalCircuitNetExample());
		
		randVars = new TimeRandomVariable[]{
				//new RandVar("J_t-1", new BooleanDomain()),
				new RandVar("Y", new BooleanDomain())
		};
		queryVars.add(randVars);
		
		
		observationDBN = new LinkedList<>();
		
		//step 1
		observationDBN.add(new AssignmentProposition[]{
				new AssignmentProposition(new RandVar("Z", new BooleanDomain()), true )
		});
		
		//step 2
		observationDBN.add(new AssignmentProposition[]{
				new AssignmentProposition(new RandVar("Z", new BooleanDomain()), false )
		});

		observations.add(observationDBN);
		
		//****** EXPERIMENT 3 (circuit) *******/
		networks.add(DynamicBayesNetExampleFactory.getDigitalCircuitNetExample());
		
		randVars = new TimeRandomVariable[]{
				//new RandVar("I_t-1", new BooleanDomain()),
				new RandVar("I", new BooleanDomain()) //per bug su particlefiltering
		};
		queryVars.add(randVars);
		
		
		observationDBN = new LinkedList<>();
		
		//step 1
		observationDBN.add(new AssignmentProposition[]{
				new AssignmentProposition(new RandVar("Z", new BooleanDomain()), true )
		});
		
		//step 2
		observationDBN.add(new AssignmentProposition[]{
				new AssignmentProposition(new RandVar("Z", new BooleanDomain()), false )
		});
		
		//step 3
		observationDBN.add(new AssignmentProposition[]{
				new AssignmentProposition(new RandVar("Z", new BooleanDomain()), false )
		});
		
		//step 4
		observationDBN.add(new AssignmentProposition[]{
				new AssignmentProposition(new RandVar("Z", new BooleanDomain()), true )
		});
		
		//step 5
		observationDBN.add(new AssignmentProposition[]{
				new AssignmentProposition(new RandVar("Z", new BooleanDomain()), false )
		});
		
		//step 6
		observationDBN.add(new AssignmentProposition[]{
				new AssignmentProposition(new RandVar("Z", new BooleanDomain()), false )
		});
		
		//step 7
		observationDBN.add(new AssignmentProposition[]{
				new AssignmentProposition(new RandVar("Z", new BooleanDomain()), false )
		});
		
		//step 8
		observationDBN.add(new AssignmentProposition[]{
				new AssignmentProposition(new RandVar("Z", new BooleanDomain()), false )
		});
		
		//step 9
		observationDBN.add(new AssignmentProposition[]{
				new AssignmentProposition(new RandVar("Z", new BooleanDomain()), true )
		});

		observations.add(observationDBN);
		
		
		//****** EXPERIMENT 4 (asia) *******/
		networks.add(DynamicBayesNetExampleFactory.getAsiaNetwork());
		
		randVars = new TimeRandomVariable[]{
				//new RandVar("Asia_t-1", new BooleanDomain()),
				new RandVar("Asia", new BooleanDomain()) //per bug su particlefiltering
		};
		queryVars.add(randVars);
		
		
		observationDBN = new LinkedList<>();
		
		//step 1
		observationDBN.add(new AssignmentProposition[]{
				new AssignmentProposition(new RandVar("Either", new BooleanDomain()), true ),
				new AssignmentProposition(new RandVar("Bronc", new BooleanDomain()), false )
		});
		
		//step 2
		observationDBN.add(new AssignmentProposition[]{
				new AssignmentProposition(new RandVar("Either", new BooleanDomain()), true ),
				new AssignmentProposition(new RandVar("Bronc", new BooleanDomain()), true )
		});

		observations.add(observationDBN);
	}

}

----------------------------------- SOURCE END -------------------------------------
!STACK 0
java.lang.IllegalArgumentException
	at org.eclipse.jdt.core.dom.ASTNode.setSourceRange(ASTNode.java:2845)
	at org.eclipse.jdt.core.dom.ASTConverter.convert(ASTConverter.java:2208)
	at org.eclipse.jdt.core.dom.ASTConverter.convert(ASTConverter.java:1781)
	at org.eclipse.jdt.core.dom.ASTConverter.convertToParenthesizedExpression(ASTConverter.java:3238)
	at org.eclipse.jdt.core.dom.ASTConverter.convert(ASTConverter.java:1684)
	at org.eclipse.jdt.core.dom.ASTConverter.convert(ASTConverter.java:1091)
	at org.eclipse.jdt.core.dom.ASTConverter.convert(ASTConverter.java:1715)
	at org.eclipse.jdt.core.dom.ASTConverter.convert(ASTConverter.java:2758)
	at org.eclipse.jdt.core.dom.ASTConverter.convert(ASTConverter.java:639)
	at org.eclipse.jdt.core.dom.ASTConverter.buildBodyDeclarations(ASTConverter.java:195)
	at org.eclipse.jdt.core.dom.ASTConverter.convert(ASTConverter.java:2965)
	at org.eclipse.jdt.core.dom.ASTConverter.convert(ASTConverter.java:1374)
	at org.eclipse.jdt.core.dom.AST.convertCompilationUnit(AST.java:270)
	at org.eclipse.jdt.internal.core.ReconcileWorkingCopyOperation.makeConsistent(ReconcileWorkingCopyOperation.java:207)
	at org.eclipse.jdt.internal.core.ReconcileWorkingCopyOperation.executeOperation(ReconcileWorkingCopyOperation.java:90)
	at org.eclipse.jdt.internal.core.JavaModelOperation.run(JavaModelOperation.java:724)
	at org.eclipse.jdt.internal.core.JavaModelOperation.runOperation(JavaModelOperation.java:790)
	at org.eclipse.jdt.internal.core.CompilationUnit.reconcile(CompilationUnit.java:1250)
	at org.eclipse.jdt.internal.ui.text.java.JavaReconcilingStrategy.reconcile(JavaReconcilingStrategy.java:128)
	at org.eclipse.jdt.internal.ui.text.java.JavaReconcilingStrategy.access$0(JavaReconcilingStrategy.java:110)
	at org.eclipse.jdt.internal.ui.text.java.JavaReconcilingStrategy$1.run(JavaReconcilingStrategy.java:90)
	at org.eclipse.core.runtime.SafeRunner.run(SafeRunner.java:42)
	at org.eclipse.jdt.internal.ui.text.java.JavaReconcilingStrategy.reconcile(JavaReconcilingStrategy.java:87)
	at org.eclipse.jdt.internal.ui.text.java.JavaReconcilingStrategy.reconcile(JavaReconcilingStrategy.java:162)
	at org.eclipse.jdt.internal.ui.text.CompositeReconcilingStrategy.reconcile(CompositeReconcilingStrategy.java:77)
	at org.eclipse.jdt.internal.ui.text.JavaCompositeReconcilingStrategy.reconcile(JavaCompositeReconcilingStrategy.java:82)
	at org.eclipse.jface.text.reconciler.MonoReconciler.process(MonoReconciler.java:69)
	at org.eclipse.jface.text.reconciler.AbstractReconciler$BackgroundThread.run(AbstractReconciler.java:207)

!ENTRY org.eclipse.jdt.ui 4 2 2020-06-05 12:48:52.217
!MESSAGE Problems occurred when invoking code from plug-in: "org.eclipse.jdt.ui".
!STACK 0
java.lang.IllegalArgumentException
	at org.eclipse.jdt.core.dom.ASTNode.setSourceRange(ASTNode.java:2845)
	at org.eclipse.jdt.core.dom.ASTConverter.convert(ASTConverter.java:2208)
	at org.eclipse.jdt.core.dom.ASTConverter.convert(ASTConverter.java:1781)
	at org.eclipse.jdt.core.dom.ASTConverter.convertToParenthesizedExpression(ASTConverter.java:3238)
	at org.eclipse.jdt.core.dom.ASTConverter.convert(ASTConverter.java:1684)
	at org.eclipse.jdt.core.dom.ASTConverter.convert(ASTConverter.java:1091)
	at org.eclipse.jdt.core.dom.ASTConverter.convert(ASTConverter.java:1715)
	at org.eclipse.jdt.core.dom.ASTConverter.convert(ASTConverter.java:2758)
	at org.eclipse.jdt.core.dom.ASTConverter.convert(ASTConverter.java:639)
	at org.eclipse.jdt.core.dom.ASTConverter.buildBodyDeclarations(ASTConverter.java:195)
	at org.eclipse.jdt.core.dom.ASTConverter.convert(ASTConverter.java:2965)
	at org.eclipse.jdt.core.dom.ASTConverter.convert(ASTConverter.java:1374)
	at org.eclipse.jdt.core.dom.AST.convertCompilationUnit(AST.java:270)
	at org.eclipse.jdt.internal.core.ReconcileWorkingCopyOperation.makeConsistent(ReconcileWorkingCopyOperation.java:207)
	at org.eclipse.jdt.internal.core.ReconcileWorkingCopyOperation.executeOperation(ReconcileWorkingCopyOperation.java:90)
	at org.eclipse.jdt.internal.core.JavaModelOperation.run(JavaModelOperation.java:724)
	at org.eclipse.jdt.internal.core.JavaModelOperation.runOperation(JavaModelOperation.java:790)
	at org.eclipse.jdt.internal.core.CompilationUnit.reconcile(CompilationUnit.java:1250)
	at org.eclipse.jdt.internal.ui.text.java.JavaReconcilingStrategy.reconcile(JavaReconcilingStrategy.java:128)
	at org.eclipse.jdt.internal.ui.text.java.JavaReconcilingStrategy.access$0(JavaReconcilingStrategy.java:110)
	at org.eclipse.jdt.internal.ui.text.java.JavaReconcilingStrategy$1.run(JavaReconcilingStrategy.java:90)
	at org.eclipse.core.runtime.SafeRunner.run(SafeRunner.java:42)
	at org.eclipse.jdt.internal.ui.text.java.JavaReconcilingStrategy.reconcile(JavaReconcilingStrategy.java:87)
	at org.eclipse.jdt.internal.ui.text.java.JavaReconcilingStrategy.reconcile(JavaReconcilingStrategy.java:162)
	at org.eclipse.jdt.internal.ui.text.CompositeReconcilingStrategy.reconcile(CompositeReconcilingStrategy.java:77)
	at org.eclipse.jdt.internal.ui.text.JavaCompositeReconcilingStrategy.reconcile(JavaCompositeReconcilingStrategy.java:82)
	at org.eclipse.jface.text.reconciler.MonoReconciler.process(MonoReconciler.java:69)
	at org.eclipse.jface.text.reconciler.AbstractReconciler$BackgroundThread.run(AbstractReconciler.java:207)

!ENTRY org.eclipse.jdt.ui 4 0 2020-06-05 12:48:52.217
!MESSAGE Error in JDT Core during reconcile
!STACK 0
java.lang.IllegalArgumentException
	at org.eclipse.jdt.core.dom.ASTNode.setSourceRange(ASTNode.java:2845)
	at org.eclipse.jdt.core.dom.ASTConverter.convert(ASTConverter.java:2208)
	at org.eclipse.jdt.core.dom.ASTConverter.convert(ASTConverter.java:1781)
	at org.eclipse.jdt.core.dom.ASTConverter.convertToParenthesizedExpression(ASTConverter.java:3238)
	at org.eclipse.jdt.core.dom.ASTConverter.convert(ASTConverter.java:1684)
	at org.eclipse.jdt.core.dom.ASTConverter.convert(ASTConverter.java:1091)
	at org.eclipse.jdt.core.dom.ASTConverter.convert(ASTConverter.java:1715)
	at org.eclipse.jdt.core.dom.ASTConverter.convert(ASTConverter.java:2758)
	at org.eclipse.jdt.core.dom.ASTConverter.convert(ASTConverter.java:639)
	at org.eclipse.jdt.core.dom.ASTConverter.buildBodyDeclarations(ASTConverter.java:195)
	at org.eclipse.jdt.core.dom.ASTConverter.convert(ASTConverter.java:2965)
	at org.eclipse.jdt.core.dom.ASTConverter.convert(ASTConverter.java:1374)
	at org.eclipse.jdt.core.dom.AST.convertCompilationUnit(AST.java:270)
	at org.eclipse.jdt.internal.core.ReconcileWorkingCopyOperation.makeConsistent(ReconcileWorkingCopyOperation.java:207)
	at org.eclipse.jdt.internal.core.ReconcileWorkingCopyOperation.executeOperation(ReconcileWorkingCopyOperation.java:90)
	at org.eclipse.jdt.internal.core.JavaModelOperation.run(JavaModelOperation.java:724)
	at org.eclipse.jdt.internal.core.JavaModelOperation.runOperation(JavaModelOperation.java:790)
	at org.eclipse.jdt.internal.core.CompilationUnit.reconcile(CompilationUnit.java:1250)
	at org.eclipse.jdt.internal.ui.text.java.JavaReconcilingStrategy.reconcile(JavaReconcilingStrategy.java:128)
	at org.eclipse.jdt.internal.ui.text.java.JavaReconcilingStrategy.access$0(JavaReconcilingStrategy.java:110)
	at org.eclipse.jdt.internal.ui.text.java.JavaReconcilingStrategy$1.run(JavaReconcilingStrategy.java:90)
	at org.eclipse.core.runtime.SafeRunner.run(SafeRunner.java:42)
	at org.eclipse.jdt.internal.ui.text.java.JavaReconcilingStrategy.reconcile(JavaReconcilingStrategy.java:87)
	at org.eclipse.jdt.internal.ui.text.java.JavaReconcilingStrategy.reconcile(JavaReconcilingStrategy.java:162)
	at org.eclipse.jdt.internal.ui.text.CompositeReconcilingStrategy.reconcile(CompositeReconcilingStrategy.java:77)
	at org.eclipse.jdt.internal.ui.text.JavaCompositeReconcilingStrategy.reconcile(JavaCompositeReconcilingStrategy.java:82)
	at org.eclipse.jface.text.reconciler.MonoReconciler.process(MonoReconciler.java:69)
	at org.eclipse.jface.text.reconciler.AbstractReconciler$BackgroundThread.run(AbstractReconciler.java:207)

!ENTRY org.eclipse.jdt.core 4 4 2020-06-05 12:48:52.247
!MESSAGE Exception occurred during compilation unit conversion:
----------------------------------- SOURCE BEGIN -------------------------------------
package it.coluccia.ialab2020.torta.project;

import java.util.ArrayList;
import java.util.Arrays;
import java.util.HashSet;
import java.util.Iterator;
import java.util.LinkedList;
import java.util.List;
import java.util.Map;
import java.util.Set;

import aima.core.probability.Factor;
import aima.core.probability.RandomVariable;
import aima.core.probability.TimeRandomVariable;
import aima.core.probability.bayes.DynamicBayesianNetwork;
import aima.core.probability.bayes.Node;
import aima.core.probability.bayes.approx.ParticleFiltering;
import aima.core.probability.bayes.exact.EliminationAsk;
import aima.core.probability.bayes.impl.BayesNet;
import aima.core.probability.bayes.impl.DynamicBayesNet;
import aima.core.probability.bayes.impl.IalabDBN;
import aima.core.probability.domain.BooleanDomain;
import aima.core.probability.example.DynamicBayesNetExampleFactory;
import aima.core.probability.proposition.AssignmentProposition;
import aima.core.probability.util.ProbabilityTable;
import aima.core.probability.util.RandVar;

public class DynamicBNExercise {
	
	private static List<DynamicBayesianNetwork> networks;
	
	//queryVars[i] --> list of query vars for network i
	private static List<TimeRandomVariable[]> queryVars;
	
	//observations[i] --> list of array of observation for network experiment
	//observations[i][j] --> array of observation for experiment i at time j
	private static List<List<AssignmentProposition[]>> observations;
	
	public static void main(String[] args){
		generateNetworks();
		Iterator<TimeRandomVariable[]> queryIterator = queryVars.iterator();
		Iterator<List<AssignmentProposition[]>> obsIterator = observations.iterator();
		Iterator<DynamicBayesianNetwork> networkIterator = networks.iterator();
		
		EliminationAsk[] inferencesOrder = new EliminationAsk[]{
				new EliminationAsk(),
				new EliminationFill(),
				new EliminationMinDegree()
		};

		int experimentCounter = 0;
		
		//ogni ciclo è un esperimento
		while(networkIterator.hasNext()){
			System.out.println("********* EXPERIMENT "+experimentCounter+" *********");
			
			DynamicBayesianNetwork network = networkIterator.next();
			List<AssignmentProposition[]> observations = obsIterator.next();
			List<RandomVariable> queryVars = Arrays.asList(queryIterator.next());
			
			for(EliminationAsk inference : inferencesOrder){
				System.out.println("\tInference type: "+inference.getClass().getSimpleName());
				//creo IalabDBN
				Set<Node> rootNodes = ((BayesNet)network.getPriorNetwork()).getRootNodes();
				IalabDBN myNetwork = new IalabDBN(
													network.getPriorNetwork(), 
													network.getX_0_to_X_1(), 
													network.getE_1(), 
													rootNodes.toArray(new Node[rootNodes.size()]),
													(DynamicBayesNet)network);

				
				//eseguo algoritmo di VE
				ProbabilityTable values = variableElimination(myNetwork,observations,inference,queryVars);
				double sum = 0;
				for(double value : values.getValues()){
					System.out.println(value);
					sum+=value;
				}
				System.out.println(sum);
				
				//mostro risultati
				for(Node node : myNetwork.getLastCPTs().keySet()){
					if(queryVars.contains(node.getRandomVariable())){
						System.out.println("\tNode: "+node+" --> CPT: "+myNetwork.getLastCPTs().get(node));	
					}
				}
				
				//testo con particle filtering
				int N = 100;
				ParticleFiltering pf = new ParticleFiltering(N,network);
				AssignmentProposition[][] distApprox = null;
				
				for(AssignmentProposition[] obsAssign : observations){
					distApprox = pf.particleFiltering(obsAssign);
				}

				float numberTrue = 0f;	
				for(AssignmentProposition[] val : distApprox){
					for(AssignmentProposition valIn : val){
						if((Boolean)valIn.getValue() && queryVars.contains(valIn.getTermVariable())){
							numberTrue+=1f;
						}
					}
				}
				System.out.println("\tParticleFiltering (approx): "+numberTrue/100f+" , "+(1f-(numberTrue/100f)));
				System.out.println("---------");	
			}
			experimentCounter++;
		}
	}
	
	/**
	 * It applies VE algorithm to specified dbn applying rollup filtering until it reaches final time step
	 * @param myNetwork
	 * @param observations
	 */
	private static ProbabilityTable variableElimination(IalabDBN myNetwork,List<AssignmentProposition[]> observations,EliminationAsk inference, List<RandomVariable> queryVars){
		//per ogni observation faccio uno step forward della mia network
		Factor lastFactor = null;
		for(AssignmentProposition[] obs : observations){
			List<Factor> factorList = new ArrayList<Factor>(Arrays.asList(new Factor[]{}));
			if(lastFactor != null){
				factorList.add(lastFactor);
			}
			lastFactor = EliminationAsk.getProbTableFromFactors(myNetwork.forward(obs,inference,factorList,queryVars),queryVars);
			updateVariableReferenceToPreviousStep((ProbabilityTable)lastFactor,myNetwork.getCurrentSlice());
			
		}
		return (ProbabilityTable)lastFactor;
		//return EliminationAsk.getProbTableFromFactors(factors,queryVars);
		
	}
	
	private static void updateVariableReferenceToPreviousStep(ProbabilityTable lastFactor,DynamicBayesNet slice){
		Map<RandomVariable, RandomVariable> x1Toxo = slice.getX_1_to_X_0();
		Set<RandomVariable> origVariables = lastFactor.getArgumentVariables();
		Set<RandomVariable> updatedVariables = new HashSet<>();
		for(RandomVariable origVar : origVariables){
			updatedVariables.add(x1Toxo.get(origVar));
		}
		ProbabilityTable tmp = new ProbabilityTable(lastFactor.getValues(),updatedVariables.toArray(new ProbabilityTable[](updatedVariables.)));
		lastFactor.setRandomVarInfo(randomVarInfo);
	}

	
	/**
	 * It populates the Networks class variable with the DBN for the experiments
	 * It initializes also QueryVars class variable with the q
	 */
	private static void generateNetworks(){
		networks = new LinkedList<>();
		observations = new LinkedList<>();
		//il nome delle queryVars è fuorviante (è sempre lo stesso del tempo t0 in quanto mantengo la struttura degli slice)
		queryVars = new LinkedList<>(); 

		//****** EXPERIMENT 0 (umbrella) *******/
		networks.add(DynamicBayesNetExampleFactory.getUmbrellaWorldNetwork());
		
		TimeRandomVariable[] randVars = new TimeRandomVariable[]{
				//new RandVar("Rain_t-1", new BooleanDomain()),
				new RandVar("Rain_t", new BooleanDomain()) //per bug su particlefiltering
		};
		queryVars.add(randVars);
		
		
		List<AssignmentProposition[]> observationDBN = new LinkedList<>();
		
		//step 1
		observationDBN.add(new AssignmentProposition[]{
				new AssignmentProposition(new RandVar("Umbrella_t", new BooleanDomain()), true )
		});
		
		//step 2
		observationDBN.add(new AssignmentProposition[]{
				new AssignmentProposition(new RandVar("Umbrella_t", new BooleanDomain()), true )
		});

		observations.add(observationDBN);
		
		//****** EXPERIMENT 1 (umbrella) *******/
		networks.add(DynamicBayesNetExampleFactory.getUmbrellaWorldNetwork());
		
		randVars = new TimeRandomVariable[]{
				//new RandVar("Rain_t-1", new BooleanDomain()),
				new RandVar("Rain_t", new BooleanDomain()) //per bug su particlefiltering
		};
		queryVars.add(randVars);
		
		
		observationDBN = new LinkedList<>();
		
		//step 1
		observationDBN.add(new AssignmentProposition[]{
				new AssignmentProposition(new RandVar("Umbrella_t", new BooleanDomain()), false )
		});
		
		//step 2
		observationDBN.add(new AssignmentProposition[]{
				new AssignmentProposition(new RandVar("Umbrella_t", new BooleanDomain()), true )
		});
		
		//step 3
		observationDBN.add(new AssignmentProposition[]{
				new AssignmentProposition(new RandVar("Umbrella_t", new BooleanDomain()), true )
		});
		
		//step 4
		observationDBN.add(new AssignmentProposition[]{
				new AssignmentProposition(new RandVar("Umbrella_t", new BooleanDomain()), true )
		});
		
		//step 5
		observationDBN.add(new AssignmentProposition[]{
				new AssignmentProposition(new RandVar("Umbrella_t", new BooleanDomain()), false )
		});

		observations.add(observationDBN);
		
		//****** EXPERIMENT 2 (circuit) *******/
		networks.add(DynamicBayesNetExampleFactory.getDigitalCircuitNetExample());
		
		randVars = new TimeRandomVariable[]{
				//new RandVar("J_t-1", new BooleanDomain()),
				new RandVar("Y", new BooleanDomain())
		};
		queryVars.add(randVars);
		
		
		observationDBN = new LinkedList<>();
		
		//step 1
		observationDBN.add(new AssignmentProposition[]{
				new AssignmentProposition(new RandVar("Z", new BooleanDomain()), true )
		});
		
		//step 2
		observationDBN.add(new AssignmentProposition[]{
				new AssignmentProposition(new RandVar("Z", new BooleanDomain()), false )
		});

		observations.add(observationDBN);
		
		//****** EXPERIMENT 3 (circuit) *******/
		networks.add(DynamicBayesNetExampleFactory.getDigitalCircuitNetExample());
		
		randVars = new TimeRandomVariable[]{
				//new RandVar("I_t-1", new BooleanDomain()),
				new RandVar("I", new BooleanDomain()) //per bug su particlefiltering
		};
		queryVars.add(randVars);
		
		
		observationDBN = new LinkedList<>();
		
		//step 1
		observationDBN.add(new AssignmentProposition[]{
				new AssignmentProposition(new RandVar("Z", new BooleanDomain()), true )
		});
		
		//step 2
		observationDBN.add(new AssignmentProposition[]{
				new AssignmentProposition(new RandVar("Z", new BooleanDomain()), false )
		});
		
		//step 3
		observationDBN.add(new AssignmentProposition[]{
				new AssignmentProposition(new RandVar("Z", new BooleanDomain()), false )
		});
		
		//step 4
		observationDBN.add(new AssignmentProposition[]{
				new AssignmentProposition(new RandVar("Z", new BooleanDomain()), true )
		});
		
		//step 5
		observationDBN.add(new AssignmentProposition[]{
				new AssignmentProposition(new RandVar("Z", new BooleanDomain()), false )
		});
		
		//step 6
		observationDBN.add(new AssignmentProposition[]{
				new AssignmentProposition(new RandVar("Z", new BooleanDomain()), false )
		});
		
		//step 7
		observationDBN.add(new AssignmentProposition[]{
				new AssignmentProposition(new RandVar("Z", new BooleanDomain()), false )
		});
		
		//step 8
		observationDBN.add(new AssignmentProposition[]{
				new AssignmentProposition(new RandVar("Z", new BooleanDomain()), false )
		});
		
		//step 9
		observationDBN.add(new AssignmentProposition[]{
				new AssignmentProposition(new RandVar("Z", new BooleanDomain()), true )
		});

		observations.add(observationDBN);
		
		
		//****** EXPERIMENT 4 (asia) *******/
		networks.add(DynamicBayesNetExampleFactory.getAsiaNetwork());
		
		randVars = new TimeRandomVariable[]{
				//new RandVar("Asia_t-1", new BooleanDomain()),
				new RandVar("Asia", new BooleanDomain()) //per bug su particlefiltering
		};
		queryVars.add(randVars);
		
		
		observationDBN = new LinkedList<>();
		
		//step 1
		observationDBN.add(new AssignmentProposition[]{
				new AssignmentProposition(new RandVar("Either", new BooleanDomain()), true ),
				new AssignmentProposition(new RandVar("Bronc", new BooleanDomain()), false )
		});
		
		//step 2
		observationDBN.add(new AssignmentProposition[]{
				new AssignmentProposition(new RandVar("Either", new BooleanDomain()), true ),
				new AssignmentProposition(new RandVar("Bronc", new BooleanDomain()), true )
		});

		observations.add(observationDBN);
	}

}

----------------------------------- SOURCE END -------------------------------------
!STACK 0
java.lang.IllegalArgumentException
	at org.eclipse.jdt.core.dom.ASTNode.setSourceRange(ASTNode.java:2845)
	at org.eclipse.jdt.core.dom.ASTConverter.convert(ASTConverter.java:2208)
	at org.eclipse.jdt.core.dom.ASTConverter.convert(ASTConverter.java:1781)
	at org.eclipse.jdt.core.dom.ASTConverter.convertToParenthesizedExpression(ASTConverter.java:3238)
	at org.eclipse.jdt.core.dom.ASTConverter.convert(ASTConverter.java:1684)
	at org.eclipse.jdt.core.dom.ASTConverter.convert(ASTConverter.java:1091)
	at org.eclipse.jdt.core.dom.ASTConverter.convert(ASTConverter.java:1715)
	at org.eclipse.jdt.core.dom.ASTConverter.convert(ASTConverter.java:2758)
	at org.eclipse.jdt.core.dom.ASTConverter.convert(ASTConverter.java:639)
	at org.eclipse.jdt.core.dom.ASTConverter.buildBodyDeclarations(ASTConverter.java:195)
	at org.eclipse.jdt.core.dom.ASTConverter.convert(ASTConverter.java:2965)
	at org.eclipse.jdt.core.dom.ASTConverter.convert(ASTConverter.java:1374)
	at org.eclipse.jdt.core.dom.AST.convertCompilationUnit(AST.java:270)
	at org.eclipse.jdt.internal.core.ReconcileWorkingCopyOperation.makeConsistent(ReconcileWorkingCopyOperation.java:207)
	at org.eclipse.jdt.internal.core.ReconcileWorkingCopyOperation.executeOperation(ReconcileWorkingCopyOperation.java:90)
	at org.eclipse.jdt.internal.core.JavaModelOperation.run(JavaModelOperation.java:724)
	at org.eclipse.jdt.internal.core.JavaModelOperation.runOperation(JavaModelOperation.java:790)
	at org.eclipse.jdt.internal.core.CompilationUnit.reconcile(CompilationUnit.java:1250)
	at org.eclipse.jdt.internal.ui.text.java.JavaReconcilingStrategy.reconcile(JavaReconcilingStrategy.java:128)
	at org.eclipse.jdt.internal.ui.text.java.JavaReconcilingStrategy.access$0(JavaReconcilingStrategy.java:110)
	at org.eclipse.jdt.internal.ui.text.java.JavaReconcilingStrategy$1.run(JavaReconcilingStrategy.java:90)
	at org.eclipse.core.runtime.SafeRunner.run(SafeRunner.java:42)
	at org.eclipse.jdt.internal.ui.text.java.JavaReconcilingStrategy.reconcile(JavaReconcilingStrategy.java:87)
	at org.eclipse.jdt.internal.ui.text.java.JavaReconcilingStrategy.reconcile(JavaReconcilingStrategy.java:162)
	at org.eclipse.jdt.internal.ui.text.CompositeReconcilingStrategy.reconcile(CompositeReconcilingStrategy.java:77)
	at org.eclipse.jdt.internal.ui.text.JavaCompositeReconcilingStrategy.reconcile(JavaCompositeReconcilingStrategy.java:82)
	at org.eclipse.jface.text.reconciler.MonoReconciler.process(MonoReconciler.java:69)
	at org.eclipse.jface.text.reconciler.AbstractReconciler$BackgroundThread.run(AbstractReconciler.java:207)

!ENTRY org.eclipse.jdt.ui 4 2 2020-06-05 12:48:52.248
!MESSAGE Problems occurred when invoking code from plug-in: "org.eclipse.jdt.ui".
!STACK 0
java.lang.IllegalArgumentException
	at org.eclipse.jdt.core.dom.ASTNode.setSourceRange(ASTNode.java:2845)
	at org.eclipse.jdt.core.dom.ASTConverter.convert(ASTConverter.java:2208)
	at org.eclipse.jdt.core.dom.ASTConverter.convert(ASTConverter.java:1781)
	at org.eclipse.jdt.core.dom.ASTConverter.convertToParenthesizedExpression(ASTConverter.java:3238)
	at org.eclipse.jdt.core.dom.ASTConverter.convert(ASTConverter.java:1684)
	at org.eclipse.jdt.core.dom.ASTConverter.convert(ASTConverter.java:1091)
	at org.eclipse.jdt.core.dom.ASTConverter.convert(ASTConverter.java:1715)
	at org.eclipse.jdt.core.dom.ASTConverter.convert(ASTConverter.java:2758)
	at org.eclipse.jdt.core.dom.ASTConverter.convert(ASTConverter.java:639)
	at org.eclipse.jdt.core.dom.ASTConverter.buildBodyDeclarations(ASTConverter.java:195)
	at org.eclipse.jdt.core.dom.ASTConverter.convert(ASTConverter.java:2965)
	at org.eclipse.jdt.core.dom.ASTConverter.convert(ASTConverter.java:1374)
	at org.eclipse.jdt.core.dom.AST.convertCompilationUnit(AST.java:270)
	at org.eclipse.jdt.internal.core.ReconcileWorkingCopyOperation.makeConsistent(ReconcileWorkingCopyOperation.java:207)
	at org.eclipse.jdt.internal.core.ReconcileWorkingCopyOperation.executeOperation(ReconcileWorkingCopyOperation.java:90)
	at org.eclipse.jdt.internal.core.JavaModelOperation.run(JavaModelOperation.java:724)
	at org.eclipse.jdt.internal.core.JavaModelOperation.runOperation(JavaModelOperation.java:790)
	at org.eclipse.jdt.internal.core.CompilationUnit.reconcile(CompilationUnit.java:1250)
	at org.eclipse.jdt.internal.ui.text.java.JavaReconcilingStrategy.reconcile(JavaReconcilingStrategy.java:128)
	at org.eclipse.jdt.internal.ui.text.java.JavaReconcilingStrategy.access$0(JavaReconcilingStrategy.java:110)
	at org.eclipse.jdt.internal.ui.text.java.JavaReconcilingStrategy$1.run(JavaReconcilingStrategy.java:90)
	at org.eclipse.core.runtime.SafeRunner.run(SafeRunner.java:42)
	at org.eclipse.jdt.internal.ui.text.java.JavaReconcilingStrategy.reconcile(JavaReconcilingStrategy.java:87)
	at org.eclipse.jdt.internal.ui.text.java.JavaReconcilingStrategy.reconcile(JavaReconcilingStrategy.java:162)
	at org.eclipse.jdt.internal.ui.text.CompositeReconcilingStrategy.reconcile(CompositeReconcilingStrategy.java:77)
	at org.eclipse.jdt.internal.ui.text.JavaCompositeReconcilingStrategy.reconcile(JavaCompositeReconcilingStrategy.java:82)
	at org.eclipse.jface.text.reconciler.MonoReconciler.process(MonoReconciler.java:69)
	at org.eclipse.jface.text.reconciler.AbstractReconciler$BackgroundThread.run(AbstractReconciler.java:207)

!ENTRY org.eclipse.jdt.ui 4 0 2020-06-05 12:48:52.248
!MESSAGE Error in JDT Core during reconcile
!STACK 0
java.lang.IllegalArgumentException
	at org.eclipse.jdt.core.dom.ASTNode.setSourceRange(ASTNode.java:2845)
	at org.eclipse.jdt.core.dom.ASTConverter.convert(ASTConverter.java:2208)
	at org.eclipse.jdt.core.dom.ASTConverter.convert(ASTConverter.java:1781)
	at org.eclipse.jdt.core.dom.ASTConverter.convertToParenthesizedExpression(ASTConverter.java:3238)
	at org.eclipse.jdt.core.dom.ASTConverter.convert(ASTConverter.java:1684)
	at org.eclipse.jdt.core.dom.ASTConverter.convert(ASTConverter.java:1091)
	at org.eclipse.jdt.core.dom.ASTConverter.convert(ASTConverter.java:1715)
	at org.eclipse.jdt.core.dom.ASTConverter.convert(ASTConverter.java:2758)
	at org.eclipse.jdt.core.dom.ASTConverter.convert(ASTConverter.java:639)
	at org.eclipse.jdt.core.dom.ASTConverter.buildBodyDeclarations(ASTConverter.java:195)
	at org.eclipse.jdt.core.dom.ASTConverter.convert(ASTConverter.java:2965)
	at org.eclipse.jdt.core.dom.ASTConverter.convert(ASTConverter.java:1374)
	at org.eclipse.jdt.core.dom.AST.convertCompilationUnit(AST.java:270)
	at org.eclipse.jdt.internal.core.ReconcileWorkingCopyOperation.makeConsistent(ReconcileWorkingCopyOperation.java:207)
	at org.eclipse.jdt.internal.core.ReconcileWorkingCopyOperation.executeOperation(ReconcileWorkingCopyOperation.java:90)
	at org.eclipse.jdt.internal.core.JavaModelOperation.run(JavaModelOperation.java:724)
	at org.eclipse.jdt.internal.core.JavaModelOperation.runOperation(JavaModelOperation.java:790)
	at org.eclipse.jdt.internal.core.CompilationUnit.reconcile(CompilationUnit.java:1250)
	at org.eclipse.jdt.internal.ui.text.java.JavaReconcilingStrategy.reconcile(JavaReconcilingStrategy.java:128)
	at org.eclipse.jdt.internal.ui.text.java.JavaReconcilingStrategy.access$0(JavaReconcilingStrategy.java:110)
	at org.eclipse.jdt.internal.ui.text.java.JavaReconcilingStrategy$1.run(JavaReconcilingStrategy.java:90)
	at org.eclipse.core.runtime.SafeRunner.run(SafeRunner.java:42)
	at org.eclipse.jdt.internal.ui.text.java.JavaReconcilingStrategy.reconcile(JavaReconcilingStrategy.java:87)
	at org.eclipse.jdt.internal.ui.text.java.JavaReconcilingStrategy.reconcile(JavaReconcilingStrategy.java:162)
	at org.eclipse.jdt.internal.ui.text.CompositeReconcilingStrategy.reconcile(CompositeReconcilingStrategy.java:77)
	at org.eclipse.jdt.internal.ui.text.JavaCompositeReconcilingStrategy.reconcile(JavaCompositeReconcilingStrategy.java:82)
	at org.eclipse.jface.text.reconciler.MonoReconciler.process(MonoReconciler.java:69)
	at org.eclipse.jface.text.reconciler.AbstractReconciler$BackgroundThread.run(AbstractReconciler.java:207)

!ENTRY org.eclipse.jdt.core 4 4 2020-06-05 12:48:52.269
!MESSAGE Exception occurred during compilation unit conversion:
----------------------------------- SOURCE BEGIN -------------------------------------
package it.coluccia.ialab2020.torta.project;

import java.util.ArrayList;
import java.util.Arrays;
import java.util.HashSet;
import java.util.Iterator;
import java.util.LinkedList;
import java.util.List;
import java.util.Map;
import java.util.Set;

import aima.core.probability.Factor;
import aima.core.probability.RandomVariable;
import aima.core.probability.TimeRandomVariable;
import aima.core.probability.bayes.DynamicBayesianNetwork;
import aima.core.probability.bayes.Node;
import aima.core.probability.bayes.approx.ParticleFiltering;
import aima.core.probability.bayes.exact.EliminationAsk;
import aima.core.probability.bayes.impl.BayesNet;
import aima.core.probability.bayes.impl.DynamicBayesNet;
import aima.core.probability.bayes.impl.IalabDBN;
import aima.core.probability.domain.BooleanDomain;
import aima.core.probability.example.DynamicBayesNetExampleFactory;
import aima.core.probability.proposition.AssignmentProposition;
import aima.core.probability.util.ProbabilityTable;
import aima.core.probability.util.RandVar;

public class DynamicBNExercise {
	
	private static List<DynamicBayesianNetwork> networks;
	
	//queryVars[i] --> list of query vars for network i
	private static List<TimeRandomVariable[]> queryVars;
	
	//observations[i] --> list of array of observation for network experiment
	//observations[i][j] --> array of observation for experiment i at time j
	private static List<List<AssignmentProposition[]>> observations;
	
	public static void main(String[] args){
		generateNetworks();
		Iterator<TimeRandomVariable[]> queryIterator = queryVars.iterator();
		Iterator<List<AssignmentProposition[]>> obsIterator = observations.iterator();
		Iterator<DynamicBayesianNetwork> networkIterator = networks.iterator();
		
		EliminationAsk[] inferencesOrder = new EliminationAsk[]{
				new EliminationAsk(),
				new EliminationFill(),
				new EliminationMinDegree()
		};

		int experimentCounter = 0;
		
		//ogni ciclo è un esperimento
		while(networkIterator.hasNext()){
			System.out.println("********* EXPERIMENT "+experimentCounter+" *********");
			
			DynamicBayesianNetwork network = networkIterator.next();
			List<AssignmentProposition[]> observations = obsIterator.next();
			List<RandomVariable> queryVars = Arrays.asList(queryIterator.next());
			
			for(EliminationAsk inference : inferencesOrder){
				System.out.println("\tInference type: "+inference.getClass().getSimpleName());
				//creo IalabDBN
				Set<Node> rootNodes = ((BayesNet)network.getPriorNetwork()).getRootNodes();
				IalabDBN myNetwork = new IalabDBN(
													network.getPriorNetwork(), 
													network.getX_0_to_X_1(), 
													network.getE_1(), 
													rootNodes.toArray(new Node[rootNodes.size()]),
													(DynamicBayesNet)network);

				
				//eseguo algoritmo di VE
				ProbabilityTable values = variableElimination(myNetwork,observations,inference,queryVars);
				double sum = 0;
				for(double value : values.getValues()){
					System.out.println(value);
					sum+=value;
				}
				System.out.println(sum);
				
				//mostro risultati
				for(Node node : myNetwork.getLastCPTs().keySet()){
					if(queryVars.contains(node.getRandomVariable())){
						System.out.println("\tNode: "+node+" --> CPT: "+myNetwork.getLastCPTs().get(node));	
					}
				}
				
				//testo con particle filtering
				int N = 100;
				ParticleFiltering pf = new ParticleFiltering(N,network);
				AssignmentProposition[][] distApprox = null;
				
				for(AssignmentProposition[] obsAssign : observations){
					distApprox = pf.particleFiltering(obsAssign);
				}

				float numberTrue = 0f;	
				for(AssignmentProposition[] val : distApprox){
					for(AssignmentProposition valIn : val){
						if((Boolean)valIn.getValue() && queryVars.contains(valIn.getTermVariable())){
							numberTrue+=1f;
						}
					}
				}
				System.out.println("\tParticleFiltering (approx): "+numberTrue/100f+" , "+(1f-(numberTrue/100f)));
				System.out.println("---------");	
			}
			experimentCounter++;
		}
	}
	
	/**
	 * It applies VE algorithm to specified dbn applying rollup filtering until it reaches final time step
	 * @param myNetwork
	 * @param observations
	 */
	private static ProbabilityTable variableElimination(IalabDBN myNetwork,List<AssignmentProposition[]> observations,EliminationAsk inference, List<RandomVariable> queryVars){
		//per ogni observation faccio uno step forward della mia network
		Factor lastFactor = null;
		for(AssignmentProposition[] obs : observations){
			List<Factor> factorList = new ArrayList<Factor>(Arrays.asList(new Factor[]{}));
			if(lastFactor != null){
				factorList.add(lastFactor);
			}
			lastFactor = EliminationAsk.getProbTableFromFactors(myNetwork.forward(obs,inference,factorList,queryVars),queryVars);
			updateVariableReferenceToPreviousStep((ProbabilityTable)lastFactor,myNetwork.getCurrentSlice());
			
		}
		return (ProbabilityTable)lastFactor;
		//return EliminationAsk.getProbTableFromFactors(factors,queryVars);
		
	}
	
	private static void updateVariableReferenceToPreviousStep(ProbabilityTable lastFactor,DynamicBayesNet slice){
		Map<RandomVariable, RandomVariable> x1Toxo = slice.getX_1_to_X_0();
		Set<RandomVariable> origVariables = lastFactor.getArgumentVariables();
		Set<RandomVariable> updatedVariables = new HashSet<>();
		for(RandomVariable origVar : origVariables){
			updatedVariables.add(x1Toxo.get(origVar));
		}
		ProbabilityTable tmp = new ProbabilityTable(lastFactor.getValues(),updatedVariables.toArray(new ProbabilityTable[](updatedVariables.)));
		lastFactor.setRandomVarInfo(randomVarInfo);
	}

	
	/**
	 * It populates the Networks class variable with the DBN for the experiments
	 * It initializes also QueryVars class variable with the q
	 */
	private static void generateNetworks(){
		networks = new LinkedList<>();
		observations = new LinkedList<>();
		//il nome delle queryVars è fuorviante (è sempre lo stesso del tempo t0 in quanto mantengo la struttura degli slice)
		queryVars = new LinkedList<>(); 

		//****** EXPERIMENT 0 (umbrella) *******/
		networks.add(DynamicBayesNetExampleFactory.getUmbrellaWorldNetwork());
		
		TimeRandomVariable[] randVars = new TimeRandomVariable[]{
				//new RandVar("Rain_t-1", new BooleanDomain()),
				new RandVar("Rain_t", new BooleanDomain()) //per bug su particlefiltering
		};
		queryVars.add(randVars);
		
		
		List<AssignmentProposition[]> observationDBN = new LinkedList<>();
		
		//step 1
		observationDBN.add(new AssignmentProposition[]{
				new AssignmentProposition(new RandVar("Umbrella_t", new BooleanDomain()), true )
		});
		
		//step 2
		observationDBN.add(new AssignmentProposition[]{
				new AssignmentProposition(new RandVar("Umbrella_t", new BooleanDomain()), true )
		});

		observations.add(observationDBN);
		
		//****** EXPERIMENT 1 (umbrella) *******/
		networks.add(DynamicBayesNetExampleFactory.getUmbrellaWorldNetwork());
		
		randVars = new TimeRandomVariable[]{
				//new RandVar("Rain_t-1", new BooleanDomain()),
				new RandVar("Rain_t", new BooleanDomain()) //per bug su particlefiltering
		};
		queryVars.add(randVars);
		
		
		observationDBN = new LinkedList<>();
		
		//step 1
		observationDBN.add(new AssignmentProposition[]{
				new AssignmentProposition(new RandVar("Umbrella_t", new BooleanDomain()), false )
		});
		
		//step 2
		observationDBN.add(new AssignmentProposition[]{
				new AssignmentProposition(new RandVar("Umbrella_t", new BooleanDomain()), true )
		});
		
		//step 3
		observationDBN.add(new AssignmentProposition[]{
				new AssignmentProposition(new RandVar("Umbrella_t", new BooleanDomain()), true )
		});
		
		//step 4
		observationDBN.add(new AssignmentProposition[]{
				new AssignmentProposition(new RandVar("Umbrella_t", new BooleanDomain()), true )
		});
		
		//step 5
		observationDBN.add(new AssignmentProposition[]{
				new AssignmentProposition(new RandVar("Umbrella_t", new BooleanDomain()), false )
		});

		observations.add(observationDBN);
		
		//****** EXPERIMENT 2 (circuit) *******/
		networks.add(DynamicBayesNetExampleFactory.getDigitalCircuitNetExample());
		
		randVars = new TimeRandomVariable[]{
				//new RandVar("J_t-1", new BooleanDomain()),
				new RandVar("Y", new BooleanDomain())
		};
		queryVars.add(randVars);
		
		
		observationDBN = new LinkedList<>();
		
		//step 1
		observationDBN.add(new AssignmentProposition[]{
				new AssignmentProposition(new RandVar("Z", new BooleanDomain()), true )
		});
		
		//step 2
		observationDBN.add(new AssignmentProposition[]{
				new AssignmentProposition(new RandVar("Z", new BooleanDomain()), false )
		});

		observations.add(observationDBN);
		
		//****** EXPERIMENT 3 (circuit) *******/
		networks.add(DynamicBayesNetExampleFactory.getDigitalCircuitNetExample());
		
		randVars = new TimeRandomVariable[]{
				//new RandVar("I_t-1", new BooleanDomain()),
				new RandVar("I", new BooleanDomain()) //per bug su particlefiltering
		};
		queryVars.add(randVars);
		
		
		observationDBN = new LinkedList<>();
		
		//step 1
		observationDBN.add(new AssignmentProposition[]{
				new AssignmentProposition(new RandVar("Z", new BooleanDomain()), true )
		});
		
		//step 2
		observationDBN.add(new AssignmentProposition[]{
				new AssignmentProposition(new RandVar("Z", new BooleanDomain()), false )
		});
		
		//step 3
		observationDBN.add(new AssignmentProposition[]{
				new AssignmentProposition(new RandVar("Z", new BooleanDomain()), false )
		});
		
		//step 4
		observationDBN.add(new AssignmentProposition[]{
				new AssignmentProposition(new RandVar("Z", new BooleanDomain()), true )
		});
		
		//step 5
		observationDBN.add(new AssignmentProposition[]{
				new AssignmentProposition(new RandVar("Z", new BooleanDomain()), false )
		});
		
		//step 6
		observationDBN.add(new AssignmentProposition[]{
				new AssignmentProposition(new RandVar("Z", new BooleanDomain()), false )
		});
		
		//step 7
		observationDBN.add(new AssignmentProposition[]{
				new AssignmentProposition(new RandVar("Z", new BooleanDomain()), false )
		});
		
		//step 8
		observationDBN.add(new AssignmentProposition[]{
				new AssignmentProposition(new RandVar("Z", new BooleanDomain()), false )
		});
		
		//step 9
		observationDBN.add(new AssignmentProposition[]{
				new AssignmentProposition(new RandVar("Z", new BooleanDomain()), true )
		});

		observations.add(observationDBN);
		
		
		//****** EXPERIMENT 4 (asia) *******/
		networks.add(DynamicBayesNetExampleFactory.getAsiaNetwork());
		
		randVars = new TimeRandomVariable[]{
				//new RandVar("Asia_t-1", new BooleanDomain()),
				new RandVar("Asia", new BooleanDomain()) //per bug su particlefiltering
		};
		queryVars.add(randVars);
		
		
		observationDBN = new LinkedList<>();
		
		//step 1
		observationDBN.add(new AssignmentProposition[]{
				new AssignmentProposition(new RandVar("Either", new BooleanDomain()), true ),
				new AssignmentProposition(new RandVar("Bronc", new BooleanDomain()), false )
		});
		
		//step 2
		observationDBN.add(new AssignmentProposition[]{
				new AssignmentProposition(new RandVar("Either", new BooleanDomain()), true ),
				new AssignmentProposition(new RandVar("Bronc", new BooleanDomain()), true )
		});

		observations.add(observationDBN);
	}

}

----------------------------------- SOURCE END -------------------------------------
!STACK 0
java.lang.IllegalArgumentException
	at org.eclipse.jdt.core.dom.ASTNode.setSourceRange(ASTNode.java:2845)
	at org.eclipse.jdt.core.dom.ASTConverter.convert(ASTConverter.java:2208)
	at org.eclipse.jdt.core.dom.ASTConverter.convert(ASTConverter.java:1781)
	at org.eclipse.jdt.core.dom.ASTConverter.convertToParenthesizedExpression(ASTConverter.java:3238)
	at org.eclipse.jdt.core.dom.ASTConverter.convert(ASTConverter.java:1684)
	at org.eclipse.jdt.core.dom.ASTConverter.convert(ASTConverter.java:1091)
	at org.eclipse.jdt.core.dom.ASTConverter.convert(ASTConverter.java:1715)
	at org.eclipse.jdt.core.dom.ASTConverter.convert(ASTConverter.java:2758)
	at org.eclipse.jdt.core.dom.ASTConverter.convert(ASTConverter.java:639)
	at org.eclipse.jdt.core.dom.ASTConverter.buildBodyDeclarations(ASTConverter.java:195)
	at org.eclipse.jdt.core.dom.ASTConverter.convert(ASTConverter.java:2965)
	at org.eclipse.jdt.core.dom.ASTConverter.convert(ASTConverter.java:1374)
	at org.eclipse.jdt.core.dom.AST.convertCompilationUnit(AST.java:270)
	at org.eclipse.jdt.internal.core.ReconcileWorkingCopyOperation.makeConsistent(ReconcileWorkingCopyOperation.java:207)
	at org.eclipse.jdt.internal.core.ReconcileWorkingCopyOperation.executeOperation(ReconcileWorkingCopyOperation.java:90)
	at org.eclipse.jdt.internal.core.JavaModelOperation.run(JavaModelOperation.java:724)
	at org.eclipse.jdt.internal.core.JavaModelOperation.runOperation(JavaModelOperation.java:790)
	at org.eclipse.jdt.internal.core.CompilationUnit.reconcile(CompilationUnit.java:1250)
	at org.eclipse.jdt.internal.ui.text.java.JavaReconcilingStrategy.reconcile(JavaReconcilingStrategy.java:128)
	at org.eclipse.jdt.internal.ui.text.java.JavaReconcilingStrategy.access$0(JavaReconcilingStrategy.java:110)
	at org.eclipse.jdt.internal.ui.text.java.JavaReconcilingStrategy$1.run(JavaReconcilingStrategy.java:90)
	at org.eclipse.core.runtime.SafeRunner.run(SafeRunner.java:42)
	at org.eclipse.jdt.internal.ui.text.java.JavaReconcilingStrategy.reconcile(JavaReconcilingStrategy.java:87)
	at org.eclipse.jdt.internal.ui.text.java.JavaReconcilingStrategy.reconcile(JavaReconcilingStrategy.java:162)
	at org.eclipse.jdt.internal.ui.text.CompositeReconcilingStrategy.reconcile(CompositeReconcilingStrategy.java:77)
	at org.eclipse.jdt.internal.ui.text.JavaCompositeReconcilingStrategy.reconcile(JavaCompositeReconcilingStrategy.java:82)
	at org.eclipse.jface.text.reconciler.MonoReconciler.process(MonoReconciler.java:69)
	at org.eclipse.jface.text.reconciler.AbstractReconciler$BackgroundThread.run(AbstractReconciler.java:207)

!ENTRY org.eclipse.jdt.ui 4 2 2020-06-05 12:48:52.277
!MESSAGE Problems occurred when invoking code from plug-in: "org.eclipse.jdt.ui".
!STACK 0
java.lang.IllegalArgumentException
	at org.eclipse.jdt.core.dom.ASTNode.setSourceRange(ASTNode.java:2845)
	at org.eclipse.jdt.core.dom.ASTConverter.convert(ASTConverter.java:2208)
	at org.eclipse.jdt.core.dom.ASTConverter.convert(ASTConverter.java:1781)
	at org.eclipse.jdt.core.dom.ASTConverter.convertToParenthesizedExpression(ASTConverter.java:3238)
	at org.eclipse.jdt.core.dom.ASTConverter.convert(ASTConverter.java:1684)
	at org.eclipse.jdt.core.dom.ASTConverter.convert(ASTConverter.java:1091)
	at org.eclipse.jdt.core.dom.ASTConverter.convert(ASTConverter.java:1715)
	at org.eclipse.jdt.core.dom.ASTConverter.convert(ASTConverter.java:2758)
	at org.eclipse.jdt.core.dom.ASTConverter.convert(ASTConverter.java:639)
	at org.eclipse.jdt.core.dom.ASTConverter.buildBodyDeclarations(ASTConverter.java:195)
	at org.eclipse.jdt.core.dom.ASTConverter.convert(ASTConverter.java:2965)
	at org.eclipse.jdt.core.dom.ASTConverter.convert(ASTConverter.java:1374)
	at org.eclipse.jdt.core.dom.AST.convertCompilationUnit(AST.java:270)
	at org.eclipse.jdt.internal.core.ReconcileWorkingCopyOperation.makeConsistent(ReconcileWorkingCopyOperation.java:207)
	at org.eclipse.jdt.internal.core.ReconcileWorkingCopyOperation.executeOperation(ReconcileWorkingCopyOperation.java:90)
	at org.eclipse.jdt.internal.core.JavaModelOperation.run(JavaModelOperation.java:724)
	at org.eclipse.jdt.internal.core.JavaModelOperation.runOperation(JavaModelOperation.java:790)
	at org.eclipse.jdt.internal.core.CompilationUnit.reconcile(CompilationUnit.java:1250)
	at org.eclipse.jdt.internal.ui.text.java.JavaReconcilingStrategy.reconcile(JavaReconcilingStrategy.java:128)
	at org.eclipse.jdt.internal.ui.text.java.JavaReconcilingStrategy.access$0(JavaReconcilingStrategy.java:110)
	at org.eclipse.jdt.internal.ui.text.java.JavaReconcilingStrategy$1.run(JavaReconcilingStrategy.java:90)
	at org.eclipse.core.runtime.SafeRunner.run(SafeRunner.java:42)
	at org.eclipse.jdt.internal.ui.text.java.JavaReconcilingStrategy.reconcile(JavaReconcilingStrategy.java:87)
	at org.eclipse.jdt.internal.ui.text.java.JavaReconcilingStrategy.reconcile(JavaReconcilingStrategy.java:162)
	at org.eclipse.jdt.internal.ui.text.CompositeReconcilingStrategy.reconcile(CompositeReconcilingStrategy.java:77)
	at org.eclipse.jdt.internal.ui.text.JavaCompositeReconcilingStrategy.reconcile(JavaCompositeReconcilingStrategy.java:82)
	at org.eclipse.jface.text.reconciler.MonoReconciler.process(MonoReconciler.java:69)
	at org.eclipse.jface.text.reconciler.AbstractReconciler$BackgroundThread.run(AbstractReconciler.java:207)

!ENTRY org.eclipse.jdt.ui 4 0 2020-06-05 12:48:52.278
!MESSAGE Error in JDT Core during reconcile
!STACK 0
java.lang.IllegalArgumentException
	at org.eclipse.jdt.core.dom.ASTNode.setSourceRange(ASTNode.java:2845)
	at org.eclipse.jdt.core.dom.ASTConverter.convert(ASTConverter.java:2208)
	at org.eclipse.jdt.core.dom.ASTConverter.convert(ASTConverter.java:1781)
	at org.eclipse.jdt.core.dom.ASTConverter.convertToParenthesizedExpression(ASTConverter.java:3238)
	at org.eclipse.jdt.core.dom.ASTConverter.convert(ASTConverter.java:1684)
	at org.eclipse.jdt.core.dom.ASTConverter.convert(ASTConverter.java:1091)
	at org.eclipse.jdt.core.dom.ASTConverter.convert(ASTConverter.java:1715)
	at org.eclipse.jdt.core.dom.ASTConverter.convert(ASTConverter.java:2758)
	at org.eclipse.jdt.core.dom.ASTConverter.convert(ASTConverter.java:639)
	at org.eclipse.jdt.core.dom.ASTConverter.buildBodyDeclarations(ASTConverter.java:195)
	at org.eclipse.jdt.core.dom.ASTConverter.convert(ASTConverter.java:2965)
	at org.eclipse.jdt.core.dom.ASTConverter.convert(ASTConverter.java:1374)
	at org.eclipse.jdt.core.dom.AST.convertCompilationUnit(AST.java:270)
	at org.eclipse.jdt.internal.core.ReconcileWorkingCopyOperation.makeConsistent(ReconcileWorkingCopyOperation.java:207)
	at org.eclipse.jdt.internal.core.ReconcileWorkingCopyOperation.executeOperation(ReconcileWorkingCopyOperation.java:90)
	at org.eclipse.jdt.internal.core.JavaModelOperation.run(JavaModelOperation.java:724)
	at org.eclipse.jdt.internal.core.JavaModelOperation.runOperation(JavaModelOperation.java:790)
	at org.eclipse.jdt.internal.core.CompilationUnit.reconcile(CompilationUnit.java:1250)
	at org.eclipse.jdt.internal.ui.text.java.JavaReconcilingStrategy.reconcile(JavaReconcilingStrategy.java:128)
	at org.eclipse.jdt.internal.ui.text.java.JavaReconcilingStrategy.access$0(JavaReconcilingStrategy.java:110)
	at org.eclipse.jdt.internal.ui.text.java.JavaReconcilingStrategy$1.run(JavaReconcilingStrategy.java:90)
	at org.eclipse.core.runtime.SafeRunner.run(SafeRunner.java:42)
	at org.eclipse.jdt.internal.ui.text.java.JavaReconcilingStrategy.reconcile(JavaReconcilingStrategy.java:87)
	at org.eclipse.jdt.internal.ui.text.java.JavaReconcilingStrategy.reconcile(JavaReconcilingStrategy.java:162)
	at org.eclipse.jdt.internal.ui.text.CompositeReconcilingStrategy.reconcile(CompositeReconcilingStrategy.java:77)
	at org.eclipse.jdt.internal.ui.text.JavaCompositeReconcilingStrategy.reconcile(JavaCompositeReconcilingStrategy.java:82)
	at org.eclipse.jface.text.reconciler.MonoReconciler.process(MonoReconciler.java:69)
	at org.eclipse.jface.text.reconciler.AbstractReconciler$BackgroundThread.run(AbstractReconciler.java:207)

!ENTRY org.eclipse.jdt.core 4 4 2020-06-05 12:48:52.287
!MESSAGE Exception occurred during compilation unit conversion:
----------------------------------- SOURCE BEGIN -------------------------------------
package it.coluccia.ialab2020.torta.project;

import java.util.ArrayList;
import java.util.Arrays;
import java.util.HashSet;
import java.util.Iterator;
import java.util.LinkedList;
import java.util.List;
import java.util.Map;
import java.util.Set;

import aima.core.probability.Factor;
import aima.core.probability.RandomVariable;
import aima.core.probability.TimeRandomVariable;
import aima.core.probability.bayes.DynamicBayesianNetwork;
import aima.core.probability.bayes.Node;
import aima.core.probability.bayes.approx.ParticleFiltering;
import aima.core.probability.bayes.exact.EliminationAsk;
import aima.core.probability.bayes.impl.BayesNet;
import aima.core.probability.bayes.impl.DynamicBayesNet;
import aima.core.probability.bayes.impl.IalabDBN;
import aima.core.probability.domain.BooleanDomain;
import aima.core.probability.example.DynamicBayesNetExampleFactory;
import aima.core.probability.proposition.AssignmentProposition;
import aima.core.probability.util.ProbabilityTable;
import aima.core.probability.util.RandVar;

public class DynamicBNExercise {
	
	private static List<DynamicBayesianNetwork> networks;
	
	//queryVars[i] --> list of query vars for network i
	private static List<TimeRandomVariable[]> queryVars;
	
	//observations[i] --> list of array of observation for network experiment
	//observations[i][j] --> array of observation for experiment i at time j
	private static List<List<AssignmentProposition[]>> observations;
	
	public static void main(String[] args){
		generateNetworks();
		Iterator<TimeRandomVariable[]> queryIterator = queryVars.iterator();
		Iterator<List<AssignmentProposition[]>> obsIterator = observations.iterator();
		Iterator<DynamicBayesianNetwork> networkIterator = networks.iterator();
		
		EliminationAsk[] inferencesOrder = new EliminationAsk[]{
				new EliminationAsk(),
				new EliminationFill(),
				new EliminationMinDegree()
		};

		int experimentCounter = 0;
		
		//ogni ciclo è un esperimento
		while(networkIterator.hasNext()){
			System.out.println("********* EXPERIMENT "+experimentCounter+" *********");
			
			DynamicBayesianNetwork network = networkIterator.next();
			List<AssignmentProposition[]> observations = obsIterator.next();
			List<RandomVariable> queryVars = Arrays.asList(queryIterator.next());
			
			for(EliminationAsk inference : inferencesOrder){
				System.out.println("\tInference type: "+inference.getClass().getSimpleName());
				//creo IalabDBN
				Set<Node> rootNodes = ((BayesNet)network.getPriorNetwork()).getRootNodes();
				IalabDBN myNetwork = new IalabDBN(
													network.getPriorNetwork(), 
													network.getX_0_to_X_1(), 
													network.getE_1(), 
													rootNodes.toArray(new Node[rootNodes.size()]),
													(DynamicBayesNet)network);

				
				//eseguo algoritmo di VE
				ProbabilityTable values = variableElimination(myNetwork,observations,inference,queryVars);
				double sum = 0;
				for(double value : values.getValues()){
					System.out.println(value);
					sum+=value;
				}
				System.out.println(sum);
				
				//mostro risultati
				for(Node node : myNetwork.getLastCPTs().keySet()){
					if(queryVars.contains(node.getRandomVariable())){
						System.out.println("\tNode: "+node+" --> CPT: "+myNetwork.getLastCPTs().get(node));	
					}
				}
				
				//testo con particle filtering
				int N = 100;
				ParticleFiltering pf = new ParticleFiltering(N,network);
				AssignmentProposition[][] distApprox = null;
				
				for(AssignmentProposition[] obsAssign : observations){
					distApprox = pf.particleFiltering(obsAssign);
				}

				float numberTrue = 0f;	
				for(AssignmentProposition[] val : distApprox){
					for(AssignmentProposition valIn : val){
						if((Boolean)valIn.getValue() && queryVars.contains(valIn.getTermVariable())){
							numberTrue+=1f;
						}
					}
				}
				System.out.println("\tParticleFiltering (approx): "+numberTrue/100f+" , "+(1f-(numberTrue/100f)));
				System.out.println("---------");	
			}
			experimentCounter++;
		}
	}
	
	/**
	 * It applies VE algorithm to specified dbn applying rollup filtering until it reaches final time step
	 * @param myNetwork
	 * @param observations
	 */
	private static ProbabilityTable variableElimination(IalabDBN myNetwork,List<AssignmentProposition[]> observations,EliminationAsk inference, List<RandomVariable> queryVars){
		//per ogni observation faccio uno step forward della mia network
		Factor lastFactor = null;
		for(AssignmentProposition[] obs : observations){
			List<Factor> factorList = new ArrayList<Factor>(Arrays.asList(new Factor[]{}));
			if(lastFactor != null){
				factorList.add(lastFactor);
			}
			lastFactor = EliminationAsk.getProbTableFromFactors(myNetwork.forward(obs,inference,factorList,queryVars),queryVars);
			updateVariableReferenceToPreviousStep((ProbabilityTable)lastFactor,myNetwork.getCurrentSlice());
			
		}
		return (ProbabilityTable)lastFactor;
		//return EliminationAsk.getProbTableFromFactors(factors,queryVars);
		
	}
	
	private static void updateVariableReferenceToPreviousStep(ProbabilityTable lastFactor,DynamicBayesNet slice){
		Map<RandomVariable, RandomVariable> x1Toxo = slice.getX_1_to_X_0();
		Set<RandomVariable> origVariables = lastFactor.getArgumentVariables();
		Set<RandomVariable> updatedVariables = new HashSet<>();
		for(RandomVariable origVar : origVariables){
			updatedVariables.add(x1Toxo.get(origVar));
		}
		ProbabilityTable tmp = new ProbabilityTable(lastFactor.getValues(),updatedVariables.toArray(new ProbabilityTable[](updatedVariables.)));
		lastFactor.setRandomVarInfo(randomVarInfo);
	}

	
	/**
	 * It populates the Networks class variable with the DBN for the experiments
	 * It initializes also QueryVars class variable with the q
	 */
	private static void generateNetworks(){
		networks = new LinkedList<>();
		observations = new LinkedList<>();
		//il nome delle queryVars è fuorviante (è sempre lo stesso del tempo t0 in quanto mantengo la struttura degli slice)
		queryVars = new LinkedList<>(); 

		//****** EXPERIMENT 0 (umbrella) *******/
		networks.add(DynamicBayesNetExampleFactory.getUmbrellaWorldNetwork());
		
		TimeRandomVariable[] randVars = new TimeRandomVariable[]{
				//new RandVar("Rain_t-1", new BooleanDomain()),
				new RandVar("Rain_t", new BooleanDomain()) //per bug su particlefiltering
		};
		queryVars.add(randVars);
		
		
		List<AssignmentProposition[]> observationDBN = new LinkedList<>();
		
		//step 1
		observationDBN.add(new AssignmentProposition[]{
				new AssignmentProposition(new RandVar("Umbrella_t", new BooleanDomain()), true )
		});
		
		//step 2
		observationDBN.add(new AssignmentProposition[]{
				new AssignmentProposition(new RandVar("Umbrella_t", new BooleanDomain()), true )
		});

		observations.add(observationDBN);
		
		//****** EXPERIMENT 1 (umbrella) *******/
		networks.add(DynamicBayesNetExampleFactory.getUmbrellaWorldNetwork());
		
		randVars = new TimeRandomVariable[]{
				//new RandVar("Rain_t-1", new BooleanDomain()),
				new RandVar("Rain_t", new BooleanDomain()) //per bug su particlefiltering
		};
		queryVars.add(randVars);
		
		
		observationDBN = new LinkedList<>();
		
		//step 1
		observationDBN.add(new AssignmentProposition[]{
				new AssignmentProposition(new RandVar("Umbrella_t", new BooleanDomain()), false )
		});
		
		//step 2
		observationDBN.add(new AssignmentProposition[]{
				new AssignmentProposition(new RandVar("Umbrella_t", new BooleanDomain()), true )
		});
		
		//step 3
		observationDBN.add(new AssignmentProposition[]{
				new AssignmentProposition(new RandVar("Umbrella_t", new BooleanDomain()), true )
		});
		
		//step 4
		observationDBN.add(new AssignmentProposition[]{
				new AssignmentProposition(new RandVar("Umbrella_t", new BooleanDomain()), true )
		});
		
		//step 5
		observationDBN.add(new AssignmentProposition[]{
				new AssignmentProposition(new RandVar("Umbrella_t", new BooleanDomain()), false )
		});

		observations.add(observationDBN);
		
		//****** EXPERIMENT 2 (circuit) *******/
		networks.add(DynamicBayesNetExampleFactory.getDigitalCircuitNetExample());
		
		randVars = new TimeRandomVariable[]{
				//new RandVar("J_t-1", new BooleanDomain()),
				new RandVar("Y", new BooleanDomain())
		};
		queryVars.add(randVars);
		
		
		observationDBN = new LinkedList<>();
		
		//step 1
		observationDBN.add(new AssignmentProposition[]{
				new AssignmentProposition(new RandVar("Z", new BooleanDomain()), true )
		});
		
		//step 2
		observationDBN.add(new AssignmentProposition[]{
				new AssignmentProposition(new RandVar("Z", new BooleanDomain()), false )
		});

		observations.add(observationDBN);
		
		//****** EXPERIMENT 3 (circuit) *******/
		networks.add(DynamicBayesNetExampleFactory.getDigitalCircuitNetExample());
		
		randVars = new TimeRandomVariable[]{
				//new RandVar("I_t-1", new BooleanDomain()),
				new RandVar("I", new BooleanDomain()) //per bug su particlefiltering
		};
		queryVars.add(randVars);
		
		
		observationDBN = new LinkedList<>();
		
		//step 1
		observationDBN.add(new AssignmentProposition[]{
				new AssignmentProposition(new RandVar("Z", new BooleanDomain()), true )
		});
		
		//step 2
		observationDBN.add(new AssignmentProposition[]{
				new AssignmentProposition(new RandVar("Z", new BooleanDomain()), false )
		});
		
		//step 3
		observationDBN.add(new AssignmentProposition[]{
				new AssignmentProposition(new RandVar("Z", new BooleanDomain()), false )
		});
		
		//step 4
		observationDBN.add(new AssignmentProposition[]{
				new AssignmentProposition(new RandVar("Z", new BooleanDomain()), true )
		});
		
		//step 5
		observationDBN.add(new AssignmentProposition[]{
				new AssignmentProposition(new RandVar("Z", new BooleanDomain()), false )
		});
		
		//step 6
		observationDBN.add(new AssignmentProposition[]{
				new AssignmentProposition(new RandVar("Z", new BooleanDomain()), false )
		});
		
		//step 7
		observationDBN.add(new AssignmentProposition[]{
				new AssignmentProposition(new RandVar("Z", new BooleanDomain()), false )
		});
		
		//step 8
		observationDBN.add(new AssignmentProposition[]{
				new AssignmentProposition(new RandVar("Z", new BooleanDomain()), false )
		});
		
		//step 9
		observationDBN.add(new AssignmentProposition[]{
				new AssignmentProposition(new RandVar("Z", new BooleanDomain()), true )
		});

		observations.add(observationDBN);
		
		
		//****** EXPERIMENT 4 (asia) *******/
		networks.add(DynamicBayesNetExampleFactory.getAsiaNetwork());
		
		randVars = new TimeRandomVariable[]{
				//new RandVar("Asia_t-1", new BooleanDomain()),
				new RandVar("Asia", new BooleanDomain()) //per bug su particlefiltering
		};
		queryVars.add(randVars);
		
		
		observationDBN = new LinkedList<>();
		
		//step 1
		observationDBN.add(new AssignmentProposition[]{
				new AssignmentProposition(new RandVar("Either", new BooleanDomain()), true ),
				new AssignmentProposition(new RandVar("Bronc", new BooleanDomain()), false )
		});
		
		//step 2
		observationDBN.add(new AssignmentProposition[]{
				new AssignmentProposition(new RandVar("Either", new BooleanDomain()), true ),
				new AssignmentProposition(new RandVar("Bronc", new BooleanDomain()), true )
		});

		observations.add(observationDBN);
	}

}

----------------------------------- SOURCE END -------------------------------------
!STACK 0
java.lang.IllegalArgumentException
	at org.eclipse.jdt.core.dom.ASTNode.setSourceRange(ASTNode.java:2845)
	at org.eclipse.jdt.core.dom.ASTConverter.convert(ASTConverter.java:2208)
	at org.eclipse.jdt.core.dom.ASTConverter.convert(ASTConverter.java:1781)
	at org.eclipse.jdt.core.dom.ASTConverter.convertToParenthesizedExpression(ASTConverter.java:3238)
	at org.eclipse.jdt.core.dom.ASTConverter.convert(ASTConverter.java:1684)
	at org.eclipse.jdt.core.dom.ASTConverter.convert(ASTConverter.java:1091)
	at org.eclipse.jdt.core.dom.ASTConverter.convert(ASTConverter.java:1715)
	at org.eclipse.jdt.core.dom.ASTConverter.convert(ASTConverter.java:2758)
	at org.eclipse.jdt.core.dom.ASTConverter.convert(ASTConverter.java:639)
	at org.eclipse.jdt.core.dom.ASTConverter.buildBodyDeclarations(ASTConverter.java:195)
	at org.eclipse.jdt.core.dom.ASTConverter.convert(ASTConverter.java:2965)
	at org.eclipse.jdt.core.dom.ASTConverter.convert(ASTConverter.java:1374)
	at org.eclipse.jdt.core.dom.AST.convertCompilationUnit(AST.java:270)
	at org.eclipse.jdt.internal.core.ReconcileWorkingCopyOperation.makeConsistent(ReconcileWorkingCopyOperation.java:207)
	at org.eclipse.jdt.internal.core.ReconcileWorkingCopyOperation.executeOperation(ReconcileWorkingCopyOperation.java:90)
	at org.eclipse.jdt.internal.core.JavaModelOperation.run(JavaModelOperation.java:724)
	at org.eclipse.jdt.internal.core.JavaModelOperation.runOperation(JavaModelOperation.java:790)
	at org.eclipse.jdt.internal.core.CompilationUnit.reconcile(CompilationUnit.java:1250)
	at org.eclipse.jdt.internal.ui.text.java.JavaReconcilingStrategy.reconcile(JavaReconcilingStrategy.java:128)
	at org.eclipse.jdt.internal.ui.text.java.JavaReconcilingStrategy.access$0(JavaReconcilingStrategy.java:110)
	at org.eclipse.jdt.internal.ui.text.java.JavaReconcilingStrategy$1.run(JavaReconcilingStrategy.java:90)
	at org.eclipse.core.runtime.SafeRunner.run(SafeRunner.java:42)
	at org.eclipse.jdt.internal.ui.text.java.JavaReconcilingStrategy.reconcile(JavaReconcilingStrategy.java:87)
	at org.eclipse.jdt.internal.ui.text.java.JavaReconcilingStrategy.reconcile(JavaReconcilingStrategy.java:162)
	at org.eclipse.jdt.internal.ui.text.CompositeReconcilingStrategy.reconcile(CompositeReconcilingStrategy.java:77)
	at org.eclipse.jdt.internal.ui.text.JavaCompositeReconcilingStrategy.reconcile(JavaCompositeReconcilingStrategy.java:82)
	at org.eclipse.jface.text.reconciler.MonoReconciler.process(MonoReconciler.java:69)
	at org.eclipse.jface.text.reconciler.AbstractReconciler$BackgroundThread.run(AbstractReconciler.java:207)

!ENTRY org.eclipse.jdt.ui 4 2 2020-06-05 12:48:52.288
!MESSAGE Problems occurred when invoking code from plug-in: "org.eclipse.jdt.ui".
!STACK 0
java.lang.IllegalArgumentException
	at org.eclipse.jdt.core.dom.ASTNode.setSourceRange(ASTNode.java:2845)
	at org.eclipse.jdt.core.dom.ASTConverter.convert(ASTConverter.java:2208)
	at org.eclipse.jdt.core.dom.ASTConverter.convert(ASTConverter.java:1781)
	at org.eclipse.jdt.core.dom.ASTConverter.convertToParenthesizedExpression(ASTConverter.java:3238)
	at org.eclipse.jdt.core.dom.ASTConverter.convert(ASTConverter.java:1684)
	at org.eclipse.jdt.core.dom.ASTConverter.convert(ASTConverter.java:1091)
	at org.eclipse.jdt.core.dom.ASTConverter.convert(ASTConverter.java:1715)
	at org.eclipse.jdt.core.dom.ASTConverter.convert(ASTConverter.java:2758)
	at org.eclipse.jdt.core.dom.ASTConverter.convert(ASTConverter.java:639)
	at org.eclipse.jdt.core.dom.ASTConverter.buildBodyDeclarations(ASTConverter.java:195)
	at org.eclipse.jdt.core.dom.ASTConverter.convert(ASTConverter.java:2965)
	at org.eclipse.jdt.core.dom.ASTConverter.convert(ASTConverter.java:1374)
	at org.eclipse.jdt.core.dom.AST.convertCompilationUnit(AST.java:270)
	at org.eclipse.jdt.internal.core.ReconcileWorkingCopyOperation.makeConsistent(ReconcileWorkingCopyOperation.java:207)
	at org.eclipse.jdt.internal.core.ReconcileWorkingCopyOperation.executeOperation(ReconcileWorkingCopyOperation.java:90)
	at org.eclipse.jdt.internal.core.JavaModelOperation.run(JavaModelOperation.java:724)
	at org.eclipse.jdt.internal.core.JavaModelOperation.runOperation(JavaModelOperation.java:790)
	at org.eclipse.jdt.internal.core.CompilationUnit.reconcile(CompilationUnit.java:1250)
	at org.eclipse.jdt.internal.ui.text.java.JavaReconcilingStrategy.reconcile(JavaReconcilingStrategy.java:128)
	at org.eclipse.jdt.internal.ui.text.java.JavaReconcilingStrategy.access$0(JavaReconcilingStrategy.java:110)
	at org.eclipse.jdt.internal.ui.text.java.JavaReconcilingStrategy$1.run(JavaReconcilingStrategy.java:90)
	at org.eclipse.core.runtime.SafeRunner.run(SafeRunner.java:42)
	at org.eclipse.jdt.internal.ui.text.java.JavaReconcilingStrategy.reconcile(JavaReconcilingStrategy.java:87)
	at org.eclipse.jdt.internal.ui.text.java.JavaReconcilingStrategy.reconcile(JavaReconcilingStrategy.java:162)
	at org.eclipse.jdt.internal.ui.text.CompositeReconcilingStrategy.reconcile(CompositeReconcilingStrategy.java:77)
	at org.eclipse.jdt.internal.ui.text.JavaCompositeReconcilingStrategy.reconcile(JavaCompositeReconcilingStrategy.java:82)
	at org.eclipse.jface.text.reconciler.MonoReconciler.process(MonoReconciler.java:69)
	at org.eclipse.jface.text.reconciler.AbstractReconciler$BackgroundThread.run(AbstractReconciler.java:207)

!ENTRY org.eclipse.jdt.ui 4 0 2020-06-05 12:48:52.289
!MESSAGE Error in JDT Core during reconcile
!STACK 0
java.lang.IllegalArgumentException
	at org.eclipse.jdt.core.dom.ASTNode.setSourceRange(ASTNode.java:2845)
	at org.eclipse.jdt.core.dom.ASTConverter.convert(ASTConverter.java:2208)
	at org.eclipse.jdt.core.dom.ASTConverter.convert(ASTConverter.java:1781)
	at org.eclipse.jdt.core.dom.ASTConverter.convertToParenthesizedExpression(ASTConverter.java:3238)
	at org.eclipse.jdt.core.dom.ASTConverter.convert(ASTConverter.java:1684)
	at org.eclipse.jdt.core.dom.ASTConverter.convert(ASTConverter.java:1091)
	at org.eclipse.jdt.core.dom.ASTConverter.convert(ASTConverter.java:1715)
	at org.eclipse.jdt.core.dom.ASTConverter.convert(ASTConverter.java:2758)
	at org.eclipse.jdt.core.dom.ASTConverter.convert(ASTConverter.java:639)
	at org.eclipse.jdt.core.dom.ASTConverter.buildBodyDeclarations(ASTConverter.java:195)
	at org.eclipse.jdt.core.dom.ASTConverter.convert(ASTConverter.java:2965)
	at org.eclipse.jdt.core.dom.ASTConverter.convert(ASTConverter.java:1374)
	at org.eclipse.jdt.core.dom.AST.convertCompilationUnit(AST.java:270)
	at org.eclipse.jdt.internal.core.ReconcileWorkingCopyOperation.makeConsistent(ReconcileWorkingCopyOperation.java:207)
	at org.eclipse.jdt.internal.core.ReconcileWorkingCopyOperation.executeOperation(ReconcileWorkingCopyOperation.java:90)
	at org.eclipse.jdt.internal.core.JavaModelOperation.run(JavaModelOperation.java:724)
	at org.eclipse.jdt.internal.core.JavaModelOperation.runOperation(JavaModelOperation.java:790)
	at org.eclipse.jdt.internal.core.CompilationUnit.reconcile(CompilationUnit.java:1250)
	at org.eclipse.jdt.internal.ui.text.java.JavaReconcilingStrategy.reconcile(JavaReconcilingStrategy.java:128)
	at org.eclipse.jdt.internal.ui.text.java.JavaReconcilingStrategy.access$0(JavaReconcilingStrategy.java:110)
	at org.eclipse.jdt.internal.ui.text.java.JavaReconcilingStrategy$1.run(JavaReconcilingStrategy.java:90)
	at org.eclipse.core.runtime.SafeRunner.run(SafeRunner.java:42)
	at org.eclipse.jdt.internal.ui.text.java.JavaReconcilingStrategy.reconcile(JavaReconcilingStrategy.java:87)
	at org.eclipse.jdt.internal.ui.text.java.JavaReconcilingStrategy.reconcile(JavaReconcilingStrategy.java:162)
	at org.eclipse.jdt.internal.ui.text.CompositeReconcilingStrategy.reconcile(CompositeReconcilingStrategy.java:77)
	at org.eclipse.jdt.internal.ui.text.JavaCompositeReconcilingStrategy.reconcile(JavaCompositeReconcilingStrategy.java:82)
	at org.eclipse.jface.text.reconciler.MonoReconciler.process(MonoReconciler.java:69)
	at org.eclipse.jface.text.reconciler.AbstractReconciler$BackgroundThread.run(AbstractReconciler.java:207)

!ENTRY org.eclipse.jdt.core 4 4 2020-06-05 12:48:52.404
!MESSAGE Exception occurred during compilation unit conversion:
----------------------------------- SOURCE BEGIN -------------------------------------
package it.coluccia.ialab2020.torta.project;

import java.util.ArrayList;
import java.util.Arrays;
import java.util.HashSet;
import java.util.Iterator;
import java.util.LinkedList;
import java.util.List;
import java.util.Map;
import java.util.Set;

import aima.core.probability.Factor;
import aima.core.probability.RandomVariable;
import aima.core.probability.TimeRandomVariable;
import aima.core.probability.bayes.DynamicBayesianNetwork;
import aima.core.probability.bayes.Node;
import aima.core.probability.bayes.approx.ParticleFiltering;
import aima.core.probability.bayes.exact.EliminationAsk;
import aima.core.probability.bayes.impl.BayesNet;
import aima.core.probability.bayes.impl.DynamicBayesNet;
import aima.core.probability.bayes.impl.IalabDBN;
import aima.core.probability.domain.BooleanDomain;
import aima.core.probability.example.DynamicBayesNetExampleFactory;
import aima.core.probability.proposition.AssignmentProposition;
import aima.core.probability.util.ProbabilityTable;
import aima.core.probability.util.RandVar;

public class DynamicBNExercise {
	
	private static List<DynamicBayesianNetwork> networks;
	
	//queryVars[i] --> list of query vars for network i
	private static List<TimeRandomVariable[]> queryVars;
	
	//observations[i] --> list of array of observation for network experiment
	//observations[i][j] --> array of observation for experiment i at time j
	private static List<List<AssignmentProposition[]>> observations;
	
	public static void main(String[] args){
		generateNetworks();
		Iterator<TimeRandomVariable[]> queryIterator = queryVars.iterator();
		Iterator<List<AssignmentProposition[]>> obsIterator = observations.iterator();
		Iterator<DynamicBayesianNetwork> networkIterator = networks.iterator();
		
		EliminationAsk[] inferencesOrder = new EliminationAsk[]{
				new EliminationAsk(),
				new EliminationFill(),
				new EliminationMinDegree()
		};

		int experimentCounter = 0;
		
		//ogni ciclo è un esperimento
		while(networkIterator.hasNext()){
			System.out.println("********* EXPERIMENT "+experimentCounter+" *********");
			
			DynamicBayesianNetwork network = networkIterator.next();
			List<AssignmentProposition[]> observations = obsIterator.next();
			List<RandomVariable> queryVars = Arrays.asList(queryIterator.next());
			
			for(EliminationAsk inference : inferencesOrder){
				System.out.println("\tInference type: "+inference.getClass().getSimpleName());
				//creo IalabDBN
				Set<Node> rootNodes = ((BayesNet)network.getPriorNetwork()).getRootNodes();
				IalabDBN myNetwork = new IalabDBN(
													network.getPriorNetwork(), 
													network.getX_0_to_X_1(), 
													network.getE_1(), 
													rootNodes.toArray(new Node[rootNodes.size()]),
													(DynamicBayesNet)network);

				
				//eseguo algoritmo di VE
				ProbabilityTable values = variableElimination(myNetwork,observations,inference,queryVars);
				double sum = 0;
				for(double value : values.getValues()){
					System.out.println(value);
					sum+=value;
				}
				System.out.println(sum);
				
				//mostro risultati
				for(Node node : myNetwork.getLastCPTs().keySet()){
					if(queryVars.contains(node.getRandomVariable())){
						System.out.println("\tNode: "+node+" --> CPT: "+myNetwork.getLastCPTs().get(node));	
					}
				}
				
				//testo con particle filtering
				int N = 100;
				ParticleFiltering pf = new ParticleFiltering(N,network);
				AssignmentProposition[][] distApprox = null;
				
				for(AssignmentProposition[] obsAssign : observations){
					distApprox = pf.particleFiltering(obsAssign);
				}

				float numberTrue = 0f;	
				for(AssignmentProposition[] val : distApprox){
					for(AssignmentProposition valIn : val){
						if((Boolean)valIn.getValue() && queryVars.contains(valIn.getTermVariable())){
							numberTrue+=1f;
						}
					}
				}
				System.out.println("\tParticleFiltering (approx): "+numberTrue/100f+" , "+(1f-(numberTrue/100f)));
				System.out.println("---------");	
			}
			experimentCounter++;
		}
	}
	
	/**
	 * It applies VE algorithm to specified dbn applying rollup filtering until it reaches final time step
	 * @param myNetwork
	 * @param observations
	 */
	private static ProbabilityTable variableElimination(IalabDBN myNetwork,List<AssignmentProposition[]> observations,EliminationAsk inference, List<RandomVariable> queryVars){
		//per ogni observation faccio uno step forward della mia network
		Factor lastFactor = null;
		for(AssignmentProposition[] obs : observations){
			List<Factor> factorList = new ArrayList<Factor>(Arrays.asList(new Factor[]{}));
			if(lastFactor != null){
				factorList.add(lastFactor);
			}
			lastFactor = EliminationAsk.getProbTableFromFactors(myNetwork.forward(obs,inference,factorList,queryVars),queryVars);
			updateVariableReferenceToPreviousStep((ProbabilityTable)lastFactor,myNetwork.getCurrentSlice());
			
		}
		return (ProbabilityTable)lastFactor;
		//return EliminationAsk.getProbTableFromFactors(factors,queryVars);
		
	}
	
	private static void updateVariableReferenceToPreviousStep(ProbabilityTable lastFactor,DynamicBayesNet slice){
		Map<RandomVariable, RandomVariable> x1Toxo = slice.getX_1_to_X_0();
		Set<RandomVariable> origVariables = lastFactor.getArgumentVariables();
		Set<RandomVariable> updatedVariables = new HashSet<>();
		for(RandomVariable origVar : origVariables){
			updatedVariables.add(x1Toxo.get(origVar));
		}
		ProbabilityTable tmp = new ProbabilityTable(lastFactor.getValues(),updatedVariables.toArray(new ProbabilityTable[](updatedVariables.)));
		lastFactor.setRandomVarInfo(randomVarInfo);
	}

	
	/**
	 * It populates the Networks class variable with the DBN for the experiments
	 * It initializes also QueryVars class variable with the q
	 */
	private static void generateNetworks(){
		networks = new LinkedList<>();
		observations = new LinkedList<>();
		//il nome delle queryVars è fuorviante (è sempre lo stesso del tempo t0 in quanto mantengo la struttura degli slice)
		queryVars = new LinkedList<>(); 

		//****** EXPERIMENT 0 (umbrella) *******/
		networks.add(DynamicBayesNetExampleFactory.getUmbrellaWorldNetwork());
		
		TimeRandomVariable[] randVars = new TimeRandomVariable[]{
				//new RandVar("Rain_t-1", new BooleanDomain()),
				new RandVar("Rain_t", new BooleanDomain()) //per bug su particlefiltering
		};
		queryVars.add(randVars);
		
		
		List<AssignmentProposition[]> observationDBN = new LinkedList<>();
		
		//step 1
		observationDBN.add(new AssignmentProposition[]{
				new AssignmentProposition(new RandVar("Umbrella_t", new BooleanDomain()), true )
		});
		
		//step 2
		observationDBN.add(new AssignmentProposition[]{
				new AssignmentProposition(new RandVar("Umbrella_t", new BooleanDomain()), true )
		});

		observations.add(observationDBN);
		
		//****** EXPERIMENT 1 (umbrella) *******/
		networks.add(DynamicBayesNetExampleFactory.getUmbrellaWorldNetwork());
		
		randVars = new TimeRandomVariable[]{
				//new RandVar("Rain_t-1", new BooleanDomain()),
				new RandVar("Rain_t", new BooleanDomain()) //per bug su particlefiltering
		};
		queryVars.add(randVars);
		
		
		observationDBN = new LinkedList<>();
		
		//step 1
		observationDBN.add(new AssignmentProposition[]{
				new AssignmentProposition(new RandVar("Umbrella_t", new BooleanDomain()), false )
		});
		
		//step 2
		observationDBN.add(new AssignmentProposition[]{
				new AssignmentProposition(new RandVar("Umbrella_t", new BooleanDomain()), true )
		});
		
		//step 3
		observationDBN.add(new AssignmentProposition[]{
				new AssignmentProposition(new RandVar("Umbrella_t", new BooleanDomain()), true )
		});
		
		//step 4
		observationDBN.add(new AssignmentProposition[]{
				new AssignmentProposition(new RandVar("Umbrella_t", new BooleanDomain()), true )
		});
		
		//step 5
		observationDBN.add(new AssignmentProposition[]{
				new AssignmentProposition(new RandVar("Umbrella_t", new BooleanDomain()), false )
		});

		observations.add(observationDBN);
		
		//****** EXPERIMENT 2 (circuit) *******/
		networks.add(DynamicBayesNetExampleFactory.getDigitalCircuitNetExample());
		
		randVars = new TimeRandomVariable[]{
				//new RandVar("J_t-1", new BooleanDomain()),
				new RandVar("Y", new BooleanDomain())
		};
		queryVars.add(randVars);
		
		
		observationDBN = new LinkedList<>();
		
		//step 1
		observationDBN.add(new AssignmentProposition[]{
				new AssignmentProposition(new RandVar("Z", new BooleanDomain()), true )
		});
		
		//step 2
		observationDBN.add(new AssignmentProposition[]{
				new AssignmentProposition(new RandVar("Z", new BooleanDomain()), false )
		});

		observations.add(observationDBN);
		
		//****** EXPERIMENT 3 (circuit) *******/
		networks.add(DynamicBayesNetExampleFactory.getDigitalCircuitNetExample());
		
		randVars = new TimeRandomVariable[]{
				//new RandVar("I_t-1", new BooleanDomain()),
				new RandVar("I", new BooleanDomain()) //per bug su particlefiltering
		};
		queryVars.add(randVars);
		
		
		observationDBN = new LinkedList<>();
		
		//step 1
		observationDBN.add(new AssignmentProposition[]{
				new AssignmentProposition(new RandVar("Z", new BooleanDomain()), true )
		});
		
		//step 2
		observationDBN.add(new AssignmentProposition[]{
				new AssignmentProposition(new RandVar("Z", new BooleanDomain()), false )
		});
		
		//step 3
		observationDBN.add(new AssignmentProposition[]{
				new AssignmentProposition(new RandVar("Z", new BooleanDomain()), false )
		});
		
		//step 4
		observationDBN.add(new AssignmentProposition[]{
				new AssignmentProposition(new RandVar("Z", new BooleanDomain()), true )
		});
		
		//step 5
		observationDBN.add(new AssignmentProposition[]{
				new AssignmentProposition(new RandVar("Z", new BooleanDomain()), false )
		});
		
		//step 6
		observationDBN.add(new AssignmentProposition[]{
				new AssignmentProposition(new RandVar("Z", new BooleanDomain()), false )
		});
		
		//step 7
		observationDBN.add(new AssignmentProposition[]{
				new AssignmentProposition(new RandVar("Z", new BooleanDomain()), false )
		});
		
		//step 8
		observationDBN.add(new AssignmentProposition[]{
				new AssignmentProposition(new RandVar("Z", new BooleanDomain()), false )
		});
		
		//step 9
		observationDBN.add(new AssignmentProposition[]{
				new AssignmentProposition(new RandVar("Z", new BooleanDomain()), true )
		});

		observations.add(observationDBN);
		
		
		//****** EXPERIMENT 4 (asia) *******/
		networks.add(DynamicBayesNetExampleFactory.getAsiaNetwork());
		
		randVars = new TimeRandomVariable[]{
				//new RandVar("Asia_t-1", new BooleanDomain()),
				new RandVar("Asia", new BooleanDomain()) //per bug su particlefiltering
		};
		queryVars.add(randVars);
		
		
		observationDBN = new LinkedList<>();
		
		//step 1
		observationDBN.add(new AssignmentProposition[]{
				new AssignmentProposition(new RandVar("Either", new BooleanDomain()), true ),
				new AssignmentProposition(new RandVar("Bronc", new BooleanDomain()), false )
		});
		
		//step 2
		observationDBN.add(new AssignmentProposition[]{
				new AssignmentProposition(new RandVar("Either", new BooleanDomain()), true ),
				new AssignmentProposition(new RandVar("Bronc", new BooleanDomain()), true )
		});

		observations.add(observationDBN);
	}

}

----------------------------------- SOURCE END -------------------------------------
!STACK 0
java.lang.IllegalArgumentException
	at org.eclipse.jdt.core.dom.ASTNode.setSourceRange(ASTNode.java:2845)
	at org.eclipse.jdt.core.dom.ASTConverter.convert(ASTConverter.java:2208)
	at org.eclipse.jdt.core.dom.ASTConverter.convert(ASTConverter.java:1781)
	at org.eclipse.jdt.core.dom.ASTConverter.convertToParenthesizedExpression(ASTConverter.java:3238)
	at org.eclipse.jdt.core.dom.ASTConverter.convert(ASTConverter.java:1684)
	at org.eclipse.jdt.core.dom.ASTConverter.convert(ASTConverter.java:1091)
	at org.eclipse.jdt.core.dom.ASTConverter.convert(ASTConverter.java:1715)
	at org.eclipse.jdt.core.dom.ASTConverter.convert(ASTConverter.java:2758)
	at org.eclipse.jdt.core.dom.ASTConverter.convert(ASTConverter.java:639)
	at org.eclipse.jdt.core.dom.ASTConverter.buildBodyDeclarations(ASTConverter.java:195)
	at org.eclipse.jdt.core.dom.ASTConverter.convert(ASTConverter.java:2965)
	at org.eclipse.jdt.core.dom.ASTConverter.convert(ASTConverter.java:1374)
	at org.eclipse.jdt.core.dom.AST.convertCompilationUnit(AST.java:270)
	at org.eclipse.jdt.internal.core.ReconcileWorkingCopyOperation.makeConsistent(ReconcileWorkingCopyOperation.java:207)
	at org.eclipse.jdt.internal.core.ReconcileWorkingCopyOperation.executeOperation(ReconcileWorkingCopyOperation.java:90)
	at org.eclipse.jdt.internal.core.JavaModelOperation.run(JavaModelOperation.java:724)
	at org.eclipse.jdt.internal.core.JavaModelOperation.runOperation(JavaModelOperation.java:790)
	at org.eclipse.jdt.internal.core.CompilationUnit.reconcile(CompilationUnit.java:1250)
	at org.eclipse.jdt.internal.ui.text.java.JavaReconcilingStrategy.reconcile(JavaReconcilingStrategy.java:128)
	at org.eclipse.jdt.internal.ui.text.java.JavaReconcilingStrategy.access$0(JavaReconcilingStrategy.java:110)
	at org.eclipse.jdt.internal.ui.text.java.JavaReconcilingStrategy$1.run(JavaReconcilingStrategy.java:90)
	at org.eclipse.core.runtime.SafeRunner.run(SafeRunner.java:42)
	at org.eclipse.jdt.internal.ui.text.java.JavaReconcilingStrategy.reconcile(JavaReconcilingStrategy.java:87)
	at org.eclipse.jdt.internal.ui.text.java.JavaReconcilingStrategy.reconcile(JavaReconcilingStrategy.java:154)
	at org.eclipse.jdt.internal.ui.text.CompositeReconcilingStrategy.reconcile(CompositeReconcilingStrategy.java:89)
	at org.eclipse.jdt.internal.ui.text.JavaCompositeReconcilingStrategy.reconcile(JavaCompositeReconcilingStrategy.java:104)
	at org.eclipse.jface.text.reconciler.MonoReconciler.process(MonoReconciler.java:73)
	at org.eclipse.jface.text.reconciler.AbstractReconciler$BackgroundThread.run(AbstractReconciler.java:207)

!ENTRY org.eclipse.jdt.ui 4 2 2020-06-05 12:48:52.405
!MESSAGE Problems occurred when invoking code from plug-in: "org.eclipse.jdt.ui".
!STACK 0
java.lang.IllegalArgumentException
	at org.eclipse.jdt.core.dom.ASTNode.setSourceRange(ASTNode.java:2845)
	at org.eclipse.jdt.core.dom.ASTConverter.convert(ASTConverter.java:2208)
	at org.eclipse.jdt.core.dom.ASTConverter.convert(ASTConverter.java:1781)
	at org.eclipse.jdt.core.dom.ASTConverter.convertToParenthesizedExpression(ASTConverter.java:3238)
	at org.eclipse.jdt.core.dom.ASTConverter.convert(ASTConverter.java:1684)
	at org.eclipse.jdt.core.dom.ASTConverter.convert(ASTConverter.java:1091)
	at org.eclipse.jdt.core.dom.ASTConverter.convert(ASTConverter.java:1715)
	at org.eclipse.jdt.core.dom.ASTConverter.convert(ASTConverter.java:2758)
	at org.eclipse.jdt.core.dom.ASTConverter.convert(ASTConverter.java:639)
	at org.eclipse.jdt.core.dom.ASTConverter.buildBodyDeclarations(ASTConverter.java:195)
	at org.eclipse.jdt.core.dom.ASTConverter.convert(ASTConverter.java:2965)
	at org.eclipse.jdt.core.dom.ASTConverter.convert(ASTConverter.java:1374)
	at org.eclipse.jdt.core.dom.AST.convertCompilationUnit(AST.java:270)
	at org.eclipse.jdt.internal.core.ReconcileWorkingCopyOperation.makeConsistent(ReconcileWorkingCopyOperation.java:207)
	at org.eclipse.jdt.internal.core.ReconcileWorkingCopyOperation.executeOperation(ReconcileWorkingCopyOperation.java:90)
	at org.eclipse.jdt.internal.core.JavaModelOperation.run(JavaModelOperation.java:724)
	at org.eclipse.jdt.internal.core.JavaModelOperation.runOperation(JavaModelOperation.java:790)
	at org.eclipse.jdt.internal.core.CompilationUnit.reconcile(CompilationUnit.java:1250)
	at org.eclipse.jdt.internal.ui.text.java.JavaReconcilingStrategy.reconcile(JavaReconcilingStrategy.java:128)
	at org.eclipse.jdt.internal.ui.text.java.JavaReconcilingStrategy.access$0(JavaReconcilingStrategy.java:110)
	at org.eclipse.jdt.internal.ui.text.java.JavaReconcilingStrategy$1.run(JavaReconcilingStrategy.java:90)
	at org.eclipse.core.runtime.SafeRunner.run(SafeRunner.java:42)
	at org.eclipse.jdt.internal.ui.text.java.JavaReconcilingStrategy.reconcile(JavaReconcilingStrategy.java:87)
	at org.eclipse.jdt.internal.ui.text.java.JavaReconcilingStrategy.reconcile(JavaReconcilingStrategy.java:154)
	at org.eclipse.jdt.internal.ui.text.CompositeReconcilingStrategy.reconcile(CompositeReconcilingStrategy.java:89)
	at org.eclipse.jdt.internal.ui.text.JavaCompositeReconcilingStrategy.reconcile(JavaCompositeReconcilingStrategy.java:104)
	at org.eclipse.jface.text.reconciler.MonoReconciler.process(MonoReconciler.java:73)
	at org.eclipse.jface.text.reconciler.AbstractReconciler$BackgroundThread.run(AbstractReconciler.java:207)

!ENTRY org.eclipse.jdt.ui 4 0 2020-06-05 12:48:52.405
!MESSAGE Error in JDT Core during reconcile
!STACK 0
java.lang.IllegalArgumentException
	at org.eclipse.jdt.core.dom.ASTNode.setSourceRange(ASTNode.java:2845)
	at org.eclipse.jdt.core.dom.ASTConverter.convert(ASTConverter.java:2208)
	at org.eclipse.jdt.core.dom.ASTConverter.convert(ASTConverter.java:1781)
	at org.eclipse.jdt.core.dom.ASTConverter.convertToParenthesizedExpression(ASTConverter.java:3238)
	at org.eclipse.jdt.core.dom.ASTConverter.convert(ASTConverter.java:1684)
	at org.eclipse.jdt.core.dom.ASTConverter.convert(ASTConverter.java:1091)
	at org.eclipse.jdt.core.dom.ASTConverter.convert(ASTConverter.java:1715)
	at org.eclipse.jdt.core.dom.ASTConverter.convert(ASTConverter.java:2758)
	at org.eclipse.jdt.core.dom.ASTConverter.convert(ASTConverter.java:639)
	at org.eclipse.jdt.core.dom.ASTConverter.buildBodyDeclarations(ASTConverter.java:195)
	at org.eclipse.jdt.core.dom.ASTConverter.convert(ASTConverter.java:2965)
	at org.eclipse.jdt.core.dom.ASTConverter.convert(ASTConverter.java:1374)
	at org.eclipse.jdt.core.dom.AST.convertCompilationUnit(AST.java:270)
	at org.eclipse.jdt.internal.core.ReconcileWorkingCopyOperation.makeConsistent(ReconcileWorkingCopyOperation.java:207)
	at org.eclipse.jdt.internal.core.ReconcileWorkingCopyOperation.executeOperation(ReconcileWorkingCopyOperation.java:90)
	at org.eclipse.jdt.internal.core.JavaModelOperation.run(JavaModelOperation.java:724)
	at org.eclipse.jdt.internal.core.JavaModelOperation.runOperation(JavaModelOperation.java:790)
	at org.eclipse.jdt.internal.core.CompilationUnit.reconcile(CompilationUnit.java:1250)
	at org.eclipse.jdt.internal.ui.text.java.JavaReconcilingStrategy.reconcile(JavaReconcilingStrategy.java:128)
	at org.eclipse.jdt.internal.ui.text.java.JavaReconcilingStrategy.access$0(JavaReconcilingStrategy.java:110)
	at org.eclipse.jdt.internal.ui.text.java.JavaReconcilingStrategy$1.run(JavaReconcilingStrategy.java:90)
	at org.eclipse.core.runtime.SafeRunner.run(SafeRunner.java:42)
	at org.eclipse.jdt.internal.ui.text.java.JavaReconcilingStrategy.reconcile(JavaReconcilingStrategy.java:87)
	at org.eclipse.jdt.internal.ui.text.java.JavaReconcilingStrategy.reconcile(JavaReconcilingStrategy.java:154)
	at org.eclipse.jdt.internal.ui.text.CompositeReconcilingStrategy.reconcile(CompositeReconcilingStrategy.java:89)
	at org.eclipse.jdt.internal.ui.text.JavaCompositeReconcilingStrategy.reconcile(JavaCompositeReconcilingStrategy.java:104)
	at org.eclipse.jface.text.reconciler.MonoReconciler.process(MonoReconciler.java:73)
	at org.eclipse.jface.text.reconciler.AbstractReconciler$BackgroundThread.run(AbstractReconciler.java:207)

!ENTRY org.eclipse.ui 2 2 2020-06-06 01:55:52.446
!MESSAGE Invalid preference category path: org.jboss.tools.common.model.ui.MainPreferencePage (bundle: org.jboss.tools.common.jdt.debug.ui, page: org.jboss.tools.common.jdt.debug.ui.preferences.RemoteDebugPreferencePage)

!ENTRY org.eclipse.ui 2 2 2020-06-06 01:55:52.447
!MESSAGE Invalid preference category path: org.jboss.tools.common.model.ui.MainPreferencePage (bundle: org.jboss.tools.foundation.ui, page: org.jboss.tools.foundation.ui.internal.credentials.CredentialPreferencePage)

!ENTRY org.eclipse.ui 2 2 2020-06-06 01:55:52.447
!MESSAGE Invalid preference category path: org.jboss.tools.common.model.ui.MainPreferencePage (bundle: org.jboss.tools.openshift.express.ui, page: org.jboss.tools.openshift.express.ui.preferences.OpenShiftPreferencePage)

!ENTRY org.eclipse.ui 2 2 2020-06-06 01:55:52.448
!MESSAGE Invalid preference category path: org.jboss.tools.common.model.ui.MainPreferencePage (bundle: org.jboss.tools.openshift.ui, page: org.jboss.tools.openshift.ui.preferences.OpenShiftPreferencePage)

!ENTRY org.eclipse.ui 2 2 2020-06-06 01:55:52.448
!MESSAGE Invalid preference category path: org.jboss.tools.common.model.ui.MainPreferencePage (bundle: org.jboss.tools.runtime.ui, page: org.jboss.tools.runtime.preferences.RuntimePreferencePage)

!ENTRY org.eclipse.ui 2 2 2020-06-06 01:55:52.449
!MESSAGE Invalid preference category path: org.jboss.tools.common.model.ui.MainPreferencePage (bundle: org.jboss.tools.usage, page: org.jboss.tools.usage.analytics.preferences.UsageAnalyticsPreferencePage)
!SESSION 2020-06-08 23:59:34.470 -----------------------------------------------
eclipse.buildId=4.6.1.M20160907-1200
java.version=1.8.0_112
java.vendor=Oracle Corporation
BootLoader constants: OS=win32, ARCH=x86_64, WS=win32, NL=it_IT
Framework arguments:  -product org.eclipse.epp.package.jee.product
Command-line arguments:  -os win32 -ws win32 -arch x86_64 -product org.eclipse.epp.package.jee.product

!ENTRY org.eclipse.egit.ui 2 0 2020-06-09 00:00:21.785
!MESSAGE Warning: The environment variable HOME is not set. The following directory will be used to store the Git
user global configuration and to define the default location to store repositories: 'C:\Users\Miggianox94'. If this is
not correct please set the HOME environment variable and restart Eclipse. Otherwise Git for Windows and
EGit might behave differently since they see different configuration options.
This warning can be switched off on the Team > Git > Confirmations and Warnings preference page.

!ENTRY org.eclipse.osgi 2 0 2020-06-09 00:00:22.796
!MESSAGE While loading class "org.eclipse.m2e.jdt.internal.MavenClasspathContainerInitializer", thread "Thread[Worker-5,5,main]" timed out waiting (5159ms) for thread "Thread[org.eclipse.jdt.internal.ui.text.JavaReconciler,1,main]" to finish starting bundle "org.eclipse.m2e.jdt_1.7.0.20160603-1933 [559]". To avoid deadlock, thread "Thread[Worker-5,5,main]" is proceeding but "org.eclipse.m2e.jdt.internal.MavenClasspathContainerInitializer" may not be fully initialized.
!STACK 0
org.osgi.framework.BundleException: Unable to acquire the state change lock for the module: osgi.identity; type="osgi.bundle"; version:Version="1.7.0.20160603-1933"; osgi.identity="org.eclipse.m2e.jdt"; singleton:="true" [id=559] STARTED [STARTED]
	at org.eclipse.osgi.container.Module.lockStateChange(Module.java:337)
	at org.eclipse.osgi.container.Module.start(Module.java:401)
	at org.eclipse.osgi.framework.util.SecureAction.start(SecureAction.java:470)
	at org.eclipse.osgi.internal.hooks.EclipseLazyStarter.postFindLocalClass(EclipseLazyStarter.java:107)
	at org.eclipse.osgi.internal.loader.classpath.ClasspathManager.findLocalClass(ClasspathManager.java:529)
	at org.eclipse.osgi.internal.loader.ModuleClassLoader.findLocalClass(ModuleClassLoader.java:325)
	at org.eclipse.osgi.internal.loader.BundleLoader.findLocalClass(BundleLoader.java:345)
	at org.eclipse.osgi.internal.loader.BundleLoader.findClassInternal(BundleLoader.java:423)
	at org.eclipse.osgi.internal.loader.BundleLoader.findClass(BundleLoader.java:372)
	at org.eclipse.osgi.internal.loader.BundleLoader.findClass(BundleLoader.java:364)
	at org.eclipse.osgi.internal.loader.ModuleClassLoader.loadClass(ModuleClassLoader.java:161)
	at java.lang.ClassLoader.loadClass(Unknown Source)
	at org.eclipse.osgi.internal.framework.EquinoxBundle.loadClass(EquinoxBundle.java:564)
	at org.eclipse.core.internal.registry.osgi.RegistryStrategyOSGI.createExecutableExtension(RegistryStrategyOSGI.java:174)
	at org.eclipse.core.internal.registry.ExtensionRegistry.createExecutableExtension(ExtensionRegistry.java:905)
	at org.eclipse.core.internal.registry.ConfigurationElement.createExecutableExtension(ConfigurationElement.java:243)
	at org.eclipse.core.internal.registry.ConfigurationElementHandle.createExecutableExtension(ConfigurationElementHandle.java:55)
	at org.eclipse.jdt.core.JavaCore.computeClasspathContainerInitializer(JavaCore.java:3471)
	at org.eclipse.jdt.core.JavaCore.getClasspathContainerInitializer(JavaCore.java:3447)
	at org.eclipse.jdt.internal.core.JavaModelManager.initializeContainer(JavaModelManager.java:2920)
	at org.eclipse.jdt.internal.core.JavaModelManager.getClasspathContainer(JavaModelManager.java:1970)
	at org.eclipse.jdt.core.JavaCore.getClasspathContainer(JavaCore.java:3424)
	at org.eclipse.jdt.internal.core.JavaProject.resolveClasspath(JavaProject.java:2693)
	at org.eclipse.jdt.internal.core.JavaProject.resolveClasspath(JavaProject.java:2857)
	at org.eclipse.jdt.internal.core.JavaProject.getResolvedClasspath(JavaProject.java:1962)
	at org.eclipse.jdt.internal.core.JavaProject.isOnClasspath(JavaProject.java:2240)
	at org.eclipse.jdt.internal.ui.BuildpathIndicatorLabelDecorator.getOverlay(BuildpathIndicatorLabelDecorator.java:45)
	at org.eclipse.jdt.internal.ui.BuildpathIndicatorLabelDecorator.decorate(BuildpathIndicatorLabelDecorator.java:32)
	at org.eclipse.ui.internal.decorators.LightweightDecoratorDefinition.decorate(LightweightDecoratorDefinition.java:260)
	at org.eclipse.ui.internal.decorators.LightweightDecoratorManager$LightweightRunnable.run(LightweightDecoratorManager.java:100)
	at org.eclipse.core.runtime.SafeRunner.run(SafeRunner.java:42)
	at org.eclipse.ui.internal.decorators.LightweightDecoratorManager.decorate(LightweightDecoratorManager.java:383)
	at org.eclipse.ui.internal.decorators.LightweightDecoratorManager.getDecorations(LightweightDecoratorManager.java:365)
	at org.eclipse.ui.internal.decorators.DecorationScheduler$1.ensureResultCached(DecorationScheduler.java:367)
	at org.eclipse.ui.internal.decorators.DecorationScheduler$1.run(DecorationScheduler.java:327)
	at org.eclipse.core.internal.jobs.Worker.run(Worker.java:55)
Caused by: java.util.concurrent.TimeoutException: Timeout after waiting 5 seconds to acquire the lock.
	at org.eclipse.osgi.container.Module.lockStateChange(Module.java:334)
	... 35 more
Root exception:
java.util.concurrent.TimeoutException: Timeout after waiting 5 seconds to acquire the lock.
	at org.eclipse.osgi.container.Module.lockStateChange(Module.java:334)
	at org.eclipse.osgi.container.Module.start(Module.java:401)
	at org.eclipse.osgi.framework.util.SecureAction.start(SecureAction.java:470)
	at org.eclipse.osgi.internal.hooks.EclipseLazyStarter.postFindLocalClass(EclipseLazyStarter.java:107)
	at org.eclipse.osgi.internal.loader.classpath.ClasspathManager.findLocalClass(ClasspathManager.java:529)
	at org.eclipse.osgi.internal.loader.ModuleClassLoader.findLocalClass(ModuleClassLoader.java:325)
	at org.eclipse.osgi.internal.loader.BundleLoader.findLocalClass(BundleLoader.java:345)
	at org.eclipse.osgi.internal.loader.BundleLoader.findClassInternal(BundleLoader.java:423)
	at org.eclipse.osgi.internal.loader.BundleLoader.findClass(BundleLoader.java:372)
	at org.eclipse.osgi.internal.loader.BundleLoader.findClass(BundleLoader.java:364)
	at org.eclipse.osgi.internal.loader.ModuleClassLoader.loadClass(ModuleClassLoader.java:161)
	at java.lang.ClassLoader.loadClass(Unknown Source)
	at org.eclipse.osgi.internal.framework.EquinoxBundle.loadClass(EquinoxBundle.java:564)
	at org.eclipse.core.internal.registry.osgi.RegistryStrategyOSGI.createExecutableExtension(RegistryStrategyOSGI.java:174)
	at org.eclipse.core.internal.registry.ExtensionRegistry.createExecutableExtension(ExtensionRegistry.java:905)
	at org.eclipse.core.internal.registry.ConfigurationElement.createExecutableExtension(ConfigurationElement.java:243)
	at org.eclipse.core.internal.registry.ConfigurationElementHandle.createExecutableExtension(ConfigurationElementHandle.java:55)
	at org.eclipse.jdt.core.JavaCore.computeClasspathContainerInitializer(JavaCore.java:3471)
	at org.eclipse.jdt.core.JavaCore.getClasspathContainerInitializer(JavaCore.java:3447)
	at org.eclipse.jdt.internal.core.JavaModelManager.initializeContainer(JavaModelManager.java:2920)
	at org.eclipse.jdt.internal.core.JavaModelManager.getClasspathContainer(JavaModelManager.java:1970)
	at org.eclipse.jdt.core.JavaCore.getClasspathContainer(JavaCore.java:3424)
	at org.eclipse.jdt.internal.core.JavaProject.resolveClasspath(JavaProject.java:2693)
	at org.eclipse.jdt.internal.core.JavaProject.resolveClasspath(JavaProject.java:2857)
	at org.eclipse.jdt.internal.core.JavaProject.getResolvedClasspath(JavaProject.java:1962)
	at org.eclipse.jdt.internal.core.JavaProject.isOnClasspath(JavaProject.java:2240)
	at org.eclipse.jdt.internal.ui.BuildpathIndicatorLabelDecorator.getOverlay(BuildpathIndicatorLabelDecorator.java:45)
	at org.eclipse.jdt.internal.ui.BuildpathIndicatorLabelDecorator.decorate(BuildpathIndicatorLabelDecorator.java:32)
	at org.eclipse.ui.internal.decorators.LightweightDecoratorDefinition.decorate(LightweightDecoratorDefinition.java:260)
	at org.eclipse.ui.internal.decorators.LightweightDecoratorManager$LightweightRunnable.run(LightweightDecoratorManager.java:100)
	at org.eclipse.core.runtime.SafeRunner.run(SafeRunner.java:42)
	at org.eclipse.ui.internal.decorators.LightweightDecoratorManager.decorate(LightweightDecoratorManager.java:383)
	at org.eclipse.ui.internal.decorators.LightweightDecoratorManager.getDecorations(LightweightDecoratorManager.java:365)
	at org.eclipse.ui.internal.decorators.DecorationScheduler$1.ensureResultCached(DecorationScheduler.java:367)
	at org.eclipse.ui.internal.decorators.DecorationScheduler$1.run(DecorationScheduler.java:327)
	at org.eclipse.core.internal.jobs.Worker.run(Worker.java:55)

!ENTRY org.eclipse.epp.logging.aeri.ide 2 16 2020-06-09 00:00:22.928
!MESSAGE Server ‘org.jboss.tools’ failed with exception: redhat.ctrlflow.com. ; version: 2.0.3.v20160905-1331
!STACK 0
java.net.UnknownHostException: redhat.ctrlflow.com
	at java.net.Inet6AddressImpl.lookupAllHostAddr(Native Method)
	at java.net.InetAddress$2.lookupAllHostAddr(Unknown Source)
	at java.net.InetAddress.getAddressesFromNameService(Unknown Source)
	at java.net.InetAddress.getAllByName0(Unknown Source)
	at java.net.InetAddress.getAllByName(Unknown Source)
	at java.net.InetAddress.getAllByName(Unknown Source)
	at org.apache.http.impl.conn.SystemDefaultDnsResolver.resolve(SystemDefaultDnsResolver.java:44)
	at org.apache.http.impl.conn.HttpClientConnectionOperator.connect(HttpClientConnectionOperator.java:102)
	at org.apache.http.impl.conn.PoolingHttpClientConnectionManager.connect(PoolingHttpClientConnectionManager.java:319)
	at org.apache.http.impl.execchain.MainClientExec.establishRoute(MainClientExec.java:363)
	at org.apache.http.impl.execchain.MainClientExec.execute(MainClientExec.java:219)
	at org.apache.http.impl.execchain.ProtocolExec.execute(ProtocolExec.java:195)
	at org.apache.http.impl.execchain.RetryExec.execute(RetryExec.java:86)
	at org.apache.http.impl.execchain.RedirectExec.execute(RedirectExec.java:108)
	at org.apache.http.impl.client.InternalHttpClient.doExecute(InternalHttpClient.java:184)
	at org.apache.http.impl.client.CloseableHttpClient.execute(CloseableHttpClient.java:82)
	at org.apache.http.impl.client.CloseableHttpClient.execute(CloseableHttpClient.java:57)
	at org.apache.http.client.fluent.Executor.execute(Executor.java:206)
	at org.eclipse.epp.internal.logging.aeri.ide.server.mars.IO.request(IO.java:205)
	at org.eclipse.epp.internal.logging.aeri.ide.server.mars.IO.refreshConfiguration(IO.java:68)
	at org.eclipse.epp.internal.logging.aeri.ide.server.mars.ServerConnection.startUp(ServerConnection.java:103)
	at com.google.common.util.concurrent.AbstractIdleService$2$1.run(AbstractIdleService.java:54)
	at com.google.common.util.concurrent.Callables$3.run(Callables.java:93)
	at java.lang.Thread.run(Unknown Source)

!ENTRY org.eclipse.epp.logging.aeri.ide 2 16 2020-06-09 00:00:24.811
!MESSAGE Server ‘org.eclipse.epp.logging.aeri.ide.server’ failed with exception: java.lang.IllegalStateException: Expected BEGIN_OBJECT but was STRING at line 1 column 1. ; version: 2.0.3.v20160905-1331
!STACK 0
com.google.gson.JsonSyntaxException: java.lang.IllegalStateException: Expected BEGIN_OBJECT but was STRING at line 1 column 1
	at com.google.gson.internal.bind.ReflectiveTypeAdapterFactory$Adapter.read(ReflectiveTypeAdapterFactory.java:176)
	at com.google.gson.Gson.fromJson(Gson.java:803)
	at com.google.gson.Gson.fromJson(Gson.java:768)
	at com.google.gson.Gson.fromJson(Gson.java:717)
	at org.eclipse.epp.internal.logging.aeri.ide.server.json.Json.deserialize(Json.java:93)
	at org.eclipse.epp.internal.logging.aeri.ide.server.mars.IO.refreshConfiguration(IO.java:70)
	at org.eclipse.epp.internal.logging.aeri.ide.server.mars.ServerConnection.startUp(ServerConnection.java:103)
	at com.google.common.util.concurrent.AbstractIdleService$2$1.run(AbstractIdleService.java:54)
	at com.google.common.util.concurrent.Callables$3.run(Callables.java:93)
	at java.lang.Thread.run(Unknown Source)
Caused by: java.lang.IllegalStateException: Expected BEGIN_OBJECT but was STRING at line 1 column 1
	at com.google.gson.stream.JsonReader.beginObject(JsonReader.java:374)
	at com.google.gson.internal.bind.ReflectiveTypeAdapterFactory$Adapter.read(ReflectiveTypeAdapterFactory.java:165)
	... 9 more

!ENTRY org.eclipse.osgi 2 0 2020-06-09 00:00:26.754
!MESSAGE While loading class "org.eclipse.m2e.jdt.internal.MavenClasspathContainerInitializer", thread "Thread[Worker-2,5,main]" timed out waiting (5031ms) for thread "Thread[org.eclipse.jdt.internal.ui.text.JavaReconciler,1,main]" to finish starting bundle "org.eclipse.m2e.jdt_1.7.0.20160603-1933 [559]". To avoid deadlock, thread "Thread[Worker-2,5,main]" is proceeding but "org.eclipse.m2e.jdt.internal.MavenClasspathContainerInitializer" may not be fully initialized.
!STACK 0
org.osgi.framework.BundleException: Unable to acquire the state change lock for the module: osgi.identity; type="osgi.bundle"; version:Version="1.7.0.20160603-1933"; osgi.identity="org.eclipse.m2e.jdt"; singleton:="true" [id=559] STARTED [STARTED]
	at org.eclipse.osgi.container.Module.lockStateChange(Module.java:337)
	at org.eclipse.osgi.container.Module.start(Module.java:401)
	at org.eclipse.osgi.framework.util.SecureAction.start(SecureAction.java:470)
	at org.eclipse.osgi.internal.hooks.EclipseLazyStarter.postFindLocalClass(EclipseLazyStarter.java:107)
	at org.eclipse.osgi.internal.loader.classpath.ClasspathManager.findLocalClass(ClasspathManager.java:529)
	at org.eclipse.osgi.internal.loader.ModuleClassLoader.findLocalClass(ModuleClassLoader.java:325)
	at org.eclipse.osgi.internal.loader.BundleLoader.findLocalClass(BundleLoader.java:345)
	at org.eclipse.osgi.internal.loader.BundleLoader.findClassInternal(BundleLoader.java:423)
	at org.eclipse.osgi.internal.loader.BundleLoader.findClass(BundleLoader.java:372)
	at org.eclipse.osgi.internal.loader.BundleLoader.findClass(BundleLoader.java:364)
	at org.eclipse.osgi.internal.loader.ModuleClassLoader.loadClass(ModuleClassLoader.java:161)
	at java.lang.ClassLoader.loadClass(Unknown Source)
	at org.eclipse.osgi.internal.framework.EquinoxBundle.loadClass(EquinoxBundle.java:564)
	at org.eclipse.core.internal.registry.osgi.RegistryStrategyOSGI.createExecutableExtension(RegistryStrategyOSGI.java:174)
	at org.eclipse.core.internal.registry.ExtensionRegistry.createExecutableExtension(ExtensionRegistry.java:905)
	at org.eclipse.core.internal.registry.ConfigurationElement.createExecutableExtension(ConfigurationElement.java:243)
	at org.eclipse.core.internal.registry.ConfigurationElementHandle.createExecutableExtension(ConfigurationElementHandle.java:55)
	at org.eclipse.jdt.core.JavaCore.computeClasspathContainerInitializer(JavaCore.java:3471)
	at org.eclipse.jdt.core.JavaCore.getClasspathContainerInitializer(JavaCore.java:3447)
	at org.eclipse.jdt.internal.core.JavaModelManager.initializeContainer(JavaModelManager.java:2920)
	at org.eclipse.jdt.internal.core.JavaModelManager$10.run(JavaModelManager.java:2845)
	at org.eclipse.core.internal.resources.Workspace.run(Workspace.java:2240)
	at org.eclipse.core.internal.resources.Workspace.run(Workspace.java:2267)
	at org.eclipse.jdt.internal.core.JavaModelManager.initializeAllContainers(JavaModelManager.java:2885)
	at org.eclipse.jdt.internal.core.JavaModelManager.getClasspathContainer(JavaModelManager.java:1965)
	at org.eclipse.jdt.core.JavaCore.initializeAfterLoad(JavaCore.java:4187)
	at org.eclipse.jdt.internal.ui.InitializeAfterLoadJob$RealJob.run(InitializeAfterLoadJob.java:36)
	at org.eclipse.core.internal.jobs.Worker.run(Worker.java:55)
Caused by: java.util.concurrent.TimeoutException: Timeout after waiting 5 seconds to acquire the lock.
	at org.eclipse.osgi.container.Module.lockStateChange(Module.java:334)
	... 27 more
Root exception:
java.util.concurrent.TimeoutException: Timeout after waiting 5 seconds to acquire the lock.
	at org.eclipse.osgi.container.Module.lockStateChange(Module.java:334)
	at org.eclipse.osgi.container.Module.start(Module.java:401)
	at org.eclipse.osgi.framework.util.SecureAction.start(SecureAction.java:470)
	at org.eclipse.osgi.internal.hooks.EclipseLazyStarter.postFindLocalClass(EclipseLazyStarter.java:107)
	at org.eclipse.osgi.internal.loader.classpath.ClasspathManager.findLocalClass(ClasspathManager.java:529)
	at org.eclipse.osgi.internal.loader.ModuleClassLoader.findLocalClass(ModuleClassLoader.java:325)
	at org.eclipse.osgi.internal.loader.BundleLoader.findLocalClass(BundleLoader.java:345)
	at org.eclipse.osgi.internal.loader.BundleLoader.findClassInternal(BundleLoader.java:423)
	at org.eclipse.osgi.internal.loader.BundleLoader.findClass(BundleLoader.java:372)
	at org.eclipse.osgi.internal.loader.BundleLoader.findClass(BundleLoader.java:364)
	at org.eclipse.osgi.internal.loader.ModuleClassLoader.loadClass(ModuleClassLoader.java:161)
	at java.lang.ClassLoader.loadClass(Unknown Source)
	at org.eclipse.osgi.internal.framework.EquinoxBundle.loadClass(EquinoxBundle.java:564)
	at org.eclipse.core.internal.registry.osgi.RegistryStrategyOSGI.createExecutableExtension(RegistryStrategyOSGI.java:174)
	at org.eclipse.core.internal.registry.ExtensionRegistry.createExecutableExtension(ExtensionRegistry.java:905)
	at org.eclipse.core.internal.registry.ConfigurationElement.createExecutableExtension(ConfigurationElement.java:243)
	at org.eclipse.core.internal.registry.ConfigurationElementHandle.createExecutableExtension(ConfigurationElementHandle.java:55)
	at org.eclipse.jdt.core.JavaCore.computeClasspathContainerInitializer(JavaCore.java:3471)
	at org.eclipse.jdt.core.JavaCore.getClasspathContainerInitializer(JavaCore.java:3447)
	at org.eclipse.jdt.internal.core.JavaModelManager.initializeContainer(JavaModelManager.java:2920)
	at org.eclipse.jdt.internal.core.JavaModelManager$10.run(JavaModelManager.java:2845)
	at org.eclipse.core.internal.resources.Workspace.run(Workspace.java:2240)
	at org.eclipse.core.internal.resources.Workspace.run(Workspace.java:2267)
	at org.eclipse.jdt.internal.core.JavaModelManager.initializeAllContainers(JavaModelManager.java:2885)
	at org.eclipse.jdt.internal.core.JavaModelManager.getClasspathContainer(JavaModelManager.java:1965)
	at org.eclipse.jdt.core.JavaCore.initializeAfterLoad(JavaCore.java:4187)
	at org.eclipse.jdt.internal.ui.InitializeAfterLoadJob$RealJob.run(InitializeAfterLoadJob.java:36)
	at org.eclipse.core.internal.jobs.Worker.run(Worker.java:55)

!ENTRY org.eclipse.osgi 2 0 2020-06-09 00:00:27.800
!MESSAGE While loading class "org.eclipse.m2e.jdt.internal.MavenClasspathHelpers", thread "Thread[Worker-5,5,main]" timed out waiting (5002ms) for thread "Thread[org.eclipse.jdt.internal.ui.text.JavaReconciler,1,main]" to finish starting bundle "org.eclipse.m2e.jdt_1.7.0.20160603-1933 [559]". To avoid deadlock, thread "Thread[Worker-5,5,main]" is proceeding but "org.eclipse.m2e.jdt.internal.MavenClasspathHelpers" may not be fully initialized.
!STACK 0
org.osgi.framework.BundleException: Unable to acquire the state change lock for the module: osgi.identity; type="osgi.bundle"; version:Version="1.7.0.20160603-1933"; osgi.identity="org.eclipse.m2e.jdt"; singleton:="true" [id=559] STARTED [STARTED]
	at org.eclipse.osgi.container.Module.lockStateChange(Module.java:337)
	at org.eclipse.osgi.container.Module.start(Module.java:401)
	at org.eclipse.osgi.framework.util.SecureAction.start(SecureAction.java:470)
	at org.eclipse.osgi.internal.hooks.EclipseLazyStarter.postFindLocalClass(EclipseLazyStarter.java:107)
	at org.eclipse.osgi.internal.loader.classpath.ClasspathManager.findLocalClass(ClasspathManager.java:529)
	at org.eclipse.osgi.internal.loader.ModuleClassLoader.findLocalClass(ModuleClassLoader.java:325)
	at org.eclipse.osgi.internal.loader.BundleLoader.findLocalClass(BundleLoader.java:345)
	at org.eclipse.osgi.internal.loader.BundleLoader.findClassInternal(BundleLoader.java:423)
	at org.eclipse.osgi.internal.loader.BundleLoader.findClass(BundleLoader.java:372)
	at org.eclipse.osgi.internal.loader.BundleLoader.findClass(BundleLoader.java:364)
	at org.eclipse.osgi.internal.loader.ModuleClassLoader.loadClass(ModuleClassLoader.java:161)
	at java.lang.ClassLoader.loadClass(Unknown Source)
	at org.eclipse.m2e.jdt.internal.MavenClasspathContainerInitializer.initialize(MavenClasspathContainerInitializer.java:44)
	at org.eclipse.jdt.internal.core.JavaModelManager.initializeContainer(JavaModelManager.java:2939)
	at org.eclipse.jdt.internal.core.JavaModelManager.getClasspathContainer(JavaModelManager.java:1970)
	at org.eclipse.jdt.core.JavaCore.getClasspathContainer(JavaCore.java:3424)
	at org.eclipse.jdt.internal.core.JavaProject.resolveClasspath(JavaProject.java:2693)
	at org.eclipse.jdt.internal.core.JavaProject.resolveClasspath(JavaProject.java:2857)
	at org.eclipse.jdt.internal.core.JavaProject.getResolvedClasspath(JavaProject.java:1962)
	at org.eclipse.jdt.internal.core.JavaProject.isOnClasspath(JavaProject.java:2240)
	at org.eclipse.jdt.internal.ui.BuildpathIndicatorLabelDecorator.getOverlay(BuildpathIndicatorLabelDecorator.java:45)
	at org.eclipse.jdt.internal.ui.BuildpathIndicatorLabelDecorator.decorate(BuildpathIndicatorLabelDecorator.java:32)
	at org.eclipse.ui.internal.decorators.LightweightDecoratorDefinition.decorate(LightweightDecoratorDefinition.java:260)
	at org.eclipse.ui.internal.decorators.LightweightDecoratorManager$LightweightRunnable.run(LightweightDecoratorManager.java:100)
	at org.eclipse.core.runtime.SafeRunner.run(SafeRunner.java:42)
	at org.eclipse.ui.internal.decorators.LightweightDecoratorManager.decorate(LightweightDecoratorManager.java:383)
	at org.eclipse.ui.internal.decorators.LightweightDecoratorManager.getDecorations(LightweightDecoratorManager.java:365)
	at org.eclipse.ui.internal.decorators.DecorationScheduler$1.ensureResultCached(DecorationScheduler.java:367)
	at org.eclipse.ui.internal.decorators.DecorationScheduler$1.run(DecorationScheduler.java:327)
	at org.eclipse.core.internal.jobs.Worker.run(Worker.java:55)
Caused by: java.util.concurrent.TimeoutException: Timeout after waiting 5 seconds to acquire the lock.
	at org.eclipse.osgi.container.Module.lockStateChange(Module.java:334)
	... 29 more
Root exception:
java.util.concurrent.TimeoutException: Timeout after waiting 5 seconds to acquire the lock.
	at org.eclipse.osgi.container.Module.lockStateChange(Module.java:334)
	at org.eclipse.osgi.container.Module.start(Module.java:401)
	at org.eclipse.osgi.framework.util.SecureAction.start(SecureAction.java:470)
	at org.eclipse.osgi.internal.hooks.EclipseLazyStarter.postFindLocalClass(EclipseLazyStarter.java:107)
	at org.eclipse.osgi.internal.loader.classpath.ClasspathManager.findLocalClass(ClasspathManager.java:529)
	at org.eclipse.osgi.internal.loader.ModuleClassLoader.findLocalClass(ModuleClassLoader.java:325)
	at org.eclipse.osgi.internal.loader.BundleLoader.findLocalClass(BundleLoader.java:345)
	at org.eclipse.osgi.internal.loader.BundleLoader.findClassInternal(BundleLoader.java:423)
	at org.eclipse.osgi.internal.loader.BundleLoader.findClass(BundleLoader.java:372)
	at org.eclipse.osgi.internal.loader.BundleLoader.findClass(BundleLoader.java:364)
	at org.eclipse.osgi.internal.loader.ModuleClassLoader.loadClass(ModuleClassLoader.java:161)
	at java.lang.ClassLoader.loadClass(Unknown Source)
	at org.eclipse.m2e.jdt.internal.MavenClasspathContainerInitializer.initialize(MavenClasspathContainerInitializer.java:44)
	at org.eclipse.jdt.internal.core.JavaModelManager.initializeContainer(JavaModelManager.java:2939)
	at org.eclipse.jdt.internal.core.JavaModelManager.getClasspathContainer(JavaModelManager.java:1970)
	at org.eclipse.jdt.core.JavaCore.getClasspathContainer(JavaCore.java:3424)
	at org.eclipse.jdt.internal.core.JavaProject.resolveClasspath(JavaProject.java:2693)
	at org.eclipse.jdt.internal.core.JavaProject.resolveClasspath(JavaProject.java:2857)
	at org.eclipse.jdt.internal.core.JavaProject.getResolvedClasspath(JavaProject.java:1962)
	at org.eclipse.jdt.internal.core.JavaProject.isOnClasspath(JavaProject.java:2240)
	at org.eclipse.jdt.internal.ui.BuildpathIndicatorLabelDecorator.getOverlay(BuildpathIndicatorLabelDecorator.java:45)
	at org.eclipse.jdt.internal.ui.BuildpathIndicatorLabelDecorator.decorate(BuildpathIndicatorLabelDecorator.java:32)
	at org.eclipse.ui.internal.decorators.LightweightDecoratorDefinition.decorate(LightweightDecoratorDefinition.java:260)
	at org.eclipse.ui.internal.decorators.LightweightDecoratorManager$LightweightRunnable.run(LightweightDecoratorManager.java:100)
	at org.eclipse.core.runtime.SafeRunner.run(SafeRunner.java:42)
	at org.eclipse.ui.internal.decorators.LightweightDecoratorManager.decorate(LightweightDecoratorManager.java:383)
	at org.eclipse.ui.internal.decorators.LightweightDecoratorManager.getDecorations(LightweightDecoratorManager.java:365)
	at org.eclipse.ui.internal.decorators.DecorationScheduler$1.ensureResultCached(DecorationScheduler.java:367)
	at org.eclipse.ui.internal.decorators.DecorationScheduler$1.run(DecorationScheduler.java:327)
	at org.eclipse.core.internal.jobs.Worker.run(Worker.java:55)

!ENTRY org.eclipse.core.resources 4 2 2020-06-09 00:00:45.481
!MESSAGE Problems occurred when invoking code from plug-in: "org.eclipse.core.resources".
!STACK 0
java.lang.NullPointerException
	at org.eclipse.m2e.jdt.internal.MavenClasspathContainerInitializer.getBuildPathManager(MavenClasspathContainerInitializer.java:80)
	at org.eclipse.m2e.jdt.internal.MavenClasspathContainerInitializer.initialize(MavenClasspathContainerInitializer.java:46)
	at org.eclipse.jdt.internal.core.JavaModelManager.initializeContainer(JavaModelManager.java:2939)
	at org.eclipse.jdt.internal.core.JavaModelManager$10.run(JavaModelManager.java:2845)
	at org.eclipse.jdt.internal.core.JavaModelManager.initializeAllContainers(JavaModelManager.java:2883)
	at org.eclipse.jdt.internal.core.JavaModelManager.getClasspathContainer(JavaModelManager.java:1965)
	at org.eclipse.jdt.core.JavaCore.getClasspathContainer(JavaCore.java:3424)
	at org.eclipse.jdt.internal.core.JavaProject.resolveClasspath(JavaProject.java:2693)
	at org.eclipse.jdt.internal.core.JavaProject.resolveClasspath(JavaProject.java:2857)
	at org.eclipse.jdt.internal.core.JavaProject.getResolvedClasspath(JavaProject.java:1962)
	at org.eclipse.jdt.internal.core.DeltaProcessor.createExternalArchiveDelta(DeltaProcessor.java:933)
	at org.eclipse.jdt.internal.core.DeltaProcessor.checkExternalArchiveChanges(DeltaProcessor.java:804)
	at org.eclipse.jdt.internal.core.DeltaProcessor.resourceChanged(DeltaProcessor.java:2003)
	at org.eclipse.jdt.internal.core.DeltaProcessingState.resourceChanged(DeltaProcessingState.java:477)
	at org.eclipse.core.internal.events.NotificationManager$1.run(NotificationManager.java:299)
	at org.eclipse.core.runtime.SafeRunner.run(SafeRunner.java:42)
	at org.eclipse.core.internal.events.NotificationManager.notify(NotificationManager.java:289)
	at org.eclipse.core.internal.events.NotificationManager.handleEvent(NotificationManager.java:271)
	at org.eclipse.core.internal.resources.Workspace.broadcastEvent(Workspace.java:369)
	at org.eclipse.core.internal.resources.Resource.refreshLocal(Resource.java:1593)
	at org.eclipse.rse.internal.files.ui.resources.SystemRemoteEditManager.refreshRemoteEditProject(SystemRemoteEditManager.java:794)
	at org.eclipse.rse.internal.files.ui.Activator$InitRemoteEditJob.run(Activator.java:77)
	at org.eclipse.core.internal.jobs.Worker.run(Worker.java:55)

!ENTRY org.eclipse.ui.workbench 4 2 2020-06-09 00:00:45.489
!MESSAGE Problems occurred when invoking code from plug-in: "org.eclipse.ui.workbench".
!STACK 0
java.lang.NullPointerException
	at org.eclipse.m2e.jdt.internal.MavenClasspathContainerInitializer.getBuildPathManager(MavenClasspathContainerInitializer.java:80)
	at org.eclipse.m2e.jdt.internal.MavenClasspathContainerInitializer.initialize(MavenClasspathContainerInitializer.java:46)
	at org.eclipse.jdt.internal.core.JavaModelManager.initializeContainer(JavaModelManager.java:2939)
	at org.eclipse.jdt.internal.core.JavaModelManager.getClasspathContainer(JavaModelManager.java:1970)
	at org.eclipse.jdt.core.JavaCore.getClasspathContainer(JavaCore.java:3424)
	at org.eclipse.jdt.internal.core.JavaProject.resolveClasspath(JavaProject.java:2693)
	at org.eclipse.jdt.internal.core.JavaProject.resolveClasspath(JavaProject.java:2857)
	at org.eclipse.jdt.internal.core.JavaProject.getResolvedClasspath(JavaProject.java:1962)
	at org.eclipse.jdt.internal.core.JavaProject.isOnClasspath(JavaProject.java:2240)
	at org.eclipse.jdt.internal.ui.BuildpathIndicatorLabelDecorator.getOverlay(BuildpathIndicatorLabelDecorator.java:45)
	at org.eclipse.jdt.internal.ui.BuildpathIndicatorLabelDecorator.decorate(BuildpathIndicatorLabelDecorator.java:32)
	at org.eclipse.ui.internal.decorators.LightweightDecoratorDefinition.decorate(LightweightDecoratorDefinition.java:260)
	at org.eclipse.ui.internal.decorators.LightweightDecoratorManager$LightweightRunnable.run(LightweightDecoratorManager.java:100)
	at org.eclipse.core.runtime.SafeRunner.run(SafeRunner.java:42)
	at org.eclipse.ui.internal.decorators.LightweightDecoratorManager.decorate(LightweightDecoratorManager.java:383)
	at org.eclipse.ui.internal.decorators.LightweightDecoratorManager.getDecorations(LightweightDecoratorManager.java:365)
	at org.eclipse.ui.internal.decorators.DecorationScheduler$1.ensureResultCached(DecorationScheduler.java:367)
	at org.eclipse.ui.internal.decorators.DecorationScheduler$1.run(DecorationScheduler.java:327)
	at org.eclipse.core.internal.jobs.Worker.run(Worker.java:55)

!ENTRY org.eclipse.ui 4 4 2020-06-09 00:00:45.521
!MESSAGE Exception in Decorator. The 'Java Build Path Indicator' decorator will be disabled.
!SUBENTRY 1 org.eclipse.ui 4 4 2020-06-09 00:00:45.521
!MESSAGE java.lang.NullPointerException
!STACK 0
java.lang.NullPointerException
	at org.eclipse.m2e.jdt.internal.MavenClasspathContainerInitializer.getBuildPathManager(MavenClasspathContainerInitializer.java:80)
	at org.eclipse.m2e.jdt.internal.MavenClasspathContainerInitializer.initialize(MavenClasspathContainerInitializer.java:46)
	at org.eclipse.jdt.internal.core.JavaModelManager.initializeContainer(JavaModelManager.java:2939)
	at org.eclipse.jdt.internal.core.JavaModelManager.getClasspathContainer(JavaModelManager.java:1970)
	at org.eclipse.jdt.core.JavaCore.getClasspathContainer(JavaCore.java:3424)
	at org.eclipse.jdt.internal.core.JavaProject.resolveClasspath(JavaProject.java:2693)
	at org.eclipse.jdt.internal.core.JavaProject.resolveClasspath(JavaProject.java:2857)
	at org.eclipse.jdt.internal.core.JavaProject.getResolvedClasspath(JavaProject.java:1962)
	at org.eclipse.jdt.internal.core.JavaProject.isOnClasspath(JavaProject.java:2240)
	at org.eclipse.jdt.internal.ui.BuildpathIndicatorLabelDecorator.getOverlay(BuildpathIndicatorLabelDecorator.java:45)
	at org.eclipse.jdt.internal.ui.BuildpathIndicatorLabelDecorator.decorate(BuildpathIndicatorLabelDecorator.java:32)
	at org.eclipse.ui.internal.decorators.LightweightDecoratorDefinition.decorate(LightweightDecoratorDefinition.java:260)
	at org.eclipse.ui.internal.decorators.LightweightDecoratorManager$LightweightRunnable.run(LightweightDecoratorManager.java:100)
	at org.eclipse.core.runtime.SafeRunner.run(SafeRunner.java:42)
	at org.eclipse.ui.internal.decorators.LightweightDecoratorManager.decorate(LightweightDecoratorManager.java:383)
	at org.eclipse.ui.internal.decorators.LightweightDecoratorManager.getDecorations(LightweightDecoratorManager.java:365)
	at org.eclipse.ui.internal.decorators.DecorationScheduler$1.ensureResultCached(DecorationScheduler.java:367)
	at org.eclipse.ui.internal.decorators.DecorationScheduler$1.run(DecorationScheduler.java:327)
	at org.eclipse.core.internal.jobs.Worker.run(Worker.java:55)

!ENTRY org.eclipse.core.jobs 4 2 2020-06-09 00:00:45.533
!MESSAGE An internal error occurred during: "Initializing Java Tooling".
!STACK 0
java.lang.NullPointerException
	at org.eclipse.m2e.jdt.internal.MavenClasspathContainerInitializer.getBuildPathManager(MavenClasspathContainerInitializer.java:80)
	at org.eclipse.m2e.jdt.internal.MavenClasspathContainerInitializer.initialize(MavenClasspathContainerInitializer.java:46)
	at org.eclipse.jdt.internal.core.JavaModelManager.initializeContainer(JavaModelManager.java:2939)
	at org.eclipse.jdt.internal.core.JavaModelManager$10.run(JavaModelManager.java:2845)
	at org.eclipse.core.internal.resources.Workspace.run(Workspace.java:2240)
	at org.eclipse.core.internal.resources.Workspace.run(Workspace.java:2267)
	at org.eclipse.jdt.internal.core.JavaModelManager.initializeAllContainers(JavaModelManager.java:2885)
	at org.eclipse.jdt.internal.core.JavaModelManager.getClasspathContainer(JavaModelManager.java:1965)
	at org.eclipse.jdt.core.JavaCore.initializeAfterLoad(JavaCore.java:4187)
	at org.eclipse.jdt.internal.ui.InitializeAfterLoadJob$RealJob.run(InitializeAfterLoadJob.java:36)
	at org.eclipse.core.internal.jobs.Worker.run(Worker.java:55)

!ENTRY org.eclipse.jface.text 2 0 2020-06-09 00:15:35.292
!MESSAGE Duplicate template id: 'org.eclipse.wst.xslt.templates.xpath.number'

!ENTRY org.eclipse.jface.text 2 0 2020-06-09 00:15:35.293
!MESSAGE Duplicate template id: 'org.eclipse.wst.xslt.templates.xpath.round'

!ENTRY org.eclipse.m2e.logback.appender 2 0 2020-06-09 00:43:12.050
!MESSAGE Failed to download org.eclipse.recommenders:index::zip:0.0.0
!STACK 0
org.eclipse.aether.resolution.ArtifactResolutionException: Could not find artifact org.eclipse.recommenders:index:zip:0.0.0-SNAPSHOT in models (http://download.eclipse.org/recommenders/models/neon/)
	at org.eclipse.aether.internal.impl.DefaultArtifactResolver.resolve(DefaultArtifactResolver.java:444)
	at org.eclipse.aether.internal.impl.DefaultArtifactResolver.resolveArtifacts(DefaultArtifactResolver.java:246)
	at org.eclipse.aether.internal.impl.DefaultArtifactResolver.resolveArtifact(DefaultArtifactResolver.java:223)
	at org.eclipse.aether.internal.impl.DefaultRepositorySystem.resolveArtifact(DefaultRepositorySystem.java:294)
	at org.eclipse.recommenders.models.ModelRepository.resolveInternal(ModelRepository.java:193)
	at org.eclipse.recommenders.models.ModelRepository.resolve(ModelRepository.java:172)
	at org.eclipse.recommenders.internal.models.rcp.EclipseModelRepository.resolve(EclipseModelRepository.java:165)
	at org.eclipse.recommenders.internal.models.rcp.DownloadModelArchiveJob.run(DownloadModelArchiveJob.java:76)
	at org.eclipse.core.internal.jobs.Worker.run(Worker.java:55)
Caused by: org.eclipse.aether.transfer.ArtifactNotFoundException: Could not find artifact org.eclipse.recommenders:index:zip:0.0.0-SNAPSHOT in models (http://download.eclipse.org/recommenders/models/neon/)
	at org.eclipse.aether.connector.basic.ArtifactTransportListener.transferFailed(ArtifactTransportListener.java:39)
	at org.eclipse.aether.connector.basic.BasicRepositoryConnector$TaskRunner.run(BasicRepositoryConnector.java:355)
	at org.eclipse.aether.util.concurrency.RunnableErrorForwarder$1.run(RunnableErrorForwarder.java:67)
	at org.eclipse.aether.connector.basic.BasicRepositoryConnector$DirectExecutor.execute(BasicRepositoryConnector.java:581)
	at org.eclipse.aether.connector.basic.BasicRepositoryConnector.get(BasicRepositoryConnector.java:249)
	at org.eclipse.aether.internal.impl.DefaultArtifactResolver.performDownloads(DefaultArtifactResolver.java:520)
	at org.eclipse.aether.internal.impl.DefaultArtifactResolver.resolve(DefaultArtifactResolver.java:421)
	... 8 more

!ENTRY org.eclipse.recommenders.models.rcp 1 0 2020-06-09 00:43:12.052
!MESSAGE org.eclipse.recommenders:index::zip:0.0.0 could not be resolved from the model repositories. Are you offline?
!SESSION 2020-06-14 18:52:50.779 -----------------------------------------------
eclipse.buildId=4.6.1.M20160907-1200
java.version=1.8.0_112
java.vendor=Oracle Corporation
BootLoader constants: OS=win32, ARCH=x86_64, WS=win32, NL=it_IT
Framework arguments:  -product org.eclipse.epp.package.jee.product
Command-line arguments:  -os win32 -ws win32 -arch x86_64 -product org.eclipse.epp.package.jee.product

!ENTRY org.eclipse.egit.ui 2 0 2020-06-14 18:53:28.607
!MESSAGE Warning: The environment variable HOME is not set. The following directory will be used to store the Git
user global configuration and to define the default location to store repositories: 'C:\Users\Miggianox94'. If this is
not correct please set the HOME environment variable and restart Eclipse. Otherwise Git for Windows and
EGit might behave differently since they see different configuration options.
This warning can be switched off on the Team > Git > Confirmations and Warnings preference page.

!ENTRY org.eclipse.epp.logging.aeri.ide 2 16 2020-06-14 18:53:30.170
!MESSAGE Server ‘org.jboss.tools’ failed with exception: redhat.ctrlflow.com. ; version: 2.0.3.v20160905-1331
!STACK 0
java.net.UnknownHostException: redhat.ctrlflow.com
	at java.net.Inet6AddressImpl.lookupAllHostAddr(Native Method)
	at java.net.InetAddress$2.lookupAllHostAddr(Unknown Source)
	at java.net.InetAddress.getAddressesFromNameService(Unknown Source)
	at java.net.InetAddress.getAllByName0(Unknown Source)
	at java.net.InetAddress.getAllByName(Unknown Source)
	at java.net.InetAddress.getAllByName(Unknown Source)
	at org.apache.http.impl.conn.SystemDefaultDnsResolver.resolve(SystemDefaultDnsResolver.java:44)
	at org.apache.http.impl.conn.HttpClientConnectionOperator.connect(HttpClientConnectionOperator.java:102)
	at org.apache.http.impl.conn.PoolingHttpClientConnectionManager.connect(PoolingHttpClientConnectionManager.java:319)
	at org.apache.http.impl.execchain.MainClientExec.establishRoute(MainClientExec.java:363)
	at org.apache.http.impl.execchain.MainClientExec.execute(MainClientExec.java:219)
	at org.apache.http.impl.execchain.ProtocolExec.execute(ProtocolExec.java:195)
	at org.apache.http.impl.execchain.RetryExec.execute(RetryExec.java:86)
	at org.apache.http.impl.execchain.RedirectExec.execute(RedirectExec.java:108)
	at org.apache.http.impl.client.InternalHttpClient.doExecute(InternalHttpClient.java:184)
	at org.apache.http.impl.client.CloseableHttpClient.execute(CloseableHttpClient.java:82)
	at org.apache.http.impl.client.CloseableHttpClient.execute(CloseableHttpClient.java:57)
	at org.apache.http.client.fluent.Executor.execute(Executor.java:206)
	at org.eclipse.epp.internal.logging.aeri.ide.server.mars.IO.request(IO.java:205)
	at org.eclipse.epp.internal.logging.aeri.ide.server.mars.IO.refreshConfiguration(IO.java:68)
	at org.eclipse.epp.internal.logging.aeri.ide.server.mars.ServerConnection.startUp(ServerConnection.java:103)
	at com.google.common.util.concurrent.AbstractIdleService$2$1.run(AbstractIdleService.java:54)
	at com.google.common.util.concurrent.Callables$3.run(Callables.java:93)
	at java.lang.Thread.run(Unknown Source)

!ENTRY org.eclipse.epp.logging.aeri.ide 2 16 2020-06-14 18:53:31.271
!MESSAGE Server ‘org.eclipse.epp.logging.aeri.ide.server’ failed with exception: java.lang.IllegalStateException: Expected BEGIN_OBJECT but was STRING at line 1 column 1. ; version: 2.0.3.v20160905-1331
!STACK 0
com.google.gson.JsonSyntaxException: java.lang.IllegalStateException: Expected BEGIN_OBJECT but was STRING at line 1 column 1
	at com.google.gson.internal.bind.ReflectiveTypeAdapterFactory$Adapter.read(ReflectiveTypeAdapterFactory.java:176)
	at com.google.gson.Gson.fromJson(Gson.java:803)
	at com.google.gson.Gson.fromJson(Gson.java:768)
	at com.google.gson.Gson.fromJson(Gson.java:717)
	at org.eclipse.epp.internal.logging.aeri.ide.server.json.Json.deserialize(Json.java:93)
	at org.eclipse.epp.internal.logging.aeri.ide.server.mars.IO.refreshConfiguration(IO.java:70)
	at org.eclipse.epp.internal.logging.aeri.ide.server.mars.ServerConnection.startUp(ServerConnection.java:103)
	at com.google.common.util.concurrent.AbstractIdleService$2$1.run(AbstractIdleService.java:54)
	at com.google.common.util.concurrent.Callables$3.run(Callables.java:93)
	at java.lang.Thread.run(Unknown Source)
Caused by: java.lang.IllegalStateException: Expected BEGIN_OBJECT but was STRING at line 1 column 1
	at com.google.gson.stream.JsonReader.beginObject(JsonReader.java:374)
	at com.google.gson.internal.bind.ReflectiveTypeAdapterFactory$Adapter.read(ReflectiveTypeAdapterFactory.java:165)
	... 9 more

!ENTRY org.eclipse.jface.text 2 0 2020-06-14 19:32:32.756
!MESSAGE Duplicate template id: 'org.eclipse.wst.xslt.templates.xpath.number'

!ENTRY org.eclipse.jface.text 2 0 2020-06-14 19:32:32.757
!MESSAGE Duplicate template id: 'org.eclipse.wst.xslt.templates.xpath.round'

!ENTRY org.eclipse.jface.text 2 0 2020-06-14 19:59:35.711
!MESSAGE Duplicate template id: 'org.eclipse.wst.xslt.templates.xpath.number'

!ENTRY org.eclipse.jface.text 2 0 2020-06-14 19:59:35.714
!MESSAGE Duplicate template id: 'org.eclipse.wst.xslt.templates.xpath.round'

!ENTRY org.eclipse.m2e.logback.appender 2 0 2020-06-14 19:59:37.031
!MESSAGE Failed to download org.eclipse.recommenders:index::zip:0.0.0
!STACK 0
org.eclipse.aether.resolution.ArtifactResolutionException: Could not find artifact org.eclipse.recommenders:index:zip:0.0.0-SNAPSHOT in models (http://download.eclipse.org/recommenders/models/neon/)
	at org.eclipse.aether.internal.impl.DefaultArtifactResolver.resolve(DefaultArtifactResolver.java:444)
	at org.eclipse.aether.internal.impl.DefaultArtifactResolver.resolveArtifacts(DefaultArtifactResolver.java:246)
	at org.eclipse.aether.internal.impl.DefaultArtifactResolver.resolveArtifact(DefaultArtifactResolver.java:223)
	at org.eclipse.aether.internal.impl.DefaultRepositorySystem.resolveArtifact(DefaultRepositorySystem.java:294)
	at org.eclipse.recommenders.models.ModelRepository.resolveInternal(ModelRepository.java:193)
	at org.eclipse.recommenders.models.ModelRepository.resolve(ModelRepository.java:172)
	at org.eclipse.recommenders.internal.models.rcp.EclipseModelRepository.resolve(EclipseModelRepository.java:165)
	at org.eclipse.recommenders.internal.models.rcp.DownloadModelArchiveJob.run(DownloadModelArchiveJob.java:76)
	at org.eclipse.core.internal.jobs.Worker.run(Worker.java:55)
Caused by: org.eclipse.aether.transfer.ArtifactNotFoundException: Could not find artifact org.eclipse.recommenders:index:zip:0.0.0-SNAPSHOT in models (http://download.eclipse.org/recommenders/models/neon/)
	at org.eclipse.aether.connector.basic.ArtifactTransportListener.transferFailed(ArtifactTransportListener.java:39)
	at org.eclipse.aether.connector.basic.BasicRepositoryConnector$TaskRunner.run(BasicRepositoryConnector.java:355)
	at org.eclipse.aether.util.concurrency.RunnableErrorForwarder$1.run(RunnableErrorForwarder.java:67)
	at org.eclipse.aether.connector.basic.BasicRepositoryConnector$DirectExecutor.execute(BasicRepositoryConnector.java:581)
	at org.eclipse.aether.connector.basic.BasicRepositoryConnector.get(BasicRepositoryConnector.java:249)
	at org.eclipse.aether.internal.impl.DefaultArtifactResolver.performDownloads(DefaultArtifactResolver.java:520)
	at org.eclipse.aether.internal.impl.DefaultArtifactResolver.resolve(DefaultArtifactResolver.java:421)
	... 8 more

!ENTRY org.eclipse.recommenders.models.rcp 1 0 2020-06-14 19:59:37.033
!MESSAGE org.eclipse.recommenders:index::zip:0.0.0 could not be resolved from the model repositories. Are you offline?

!ENTRY org.eclipse.ui.workbench 4 2 2020-06-14 21:31:35.057
!MESSAGE Problems occurred when invoking code from plug-in: "org.eclipse.ui.workbench".
!STACK 0
java.lang.NullPointerException
	at com.codota.eclipse.assistant.listeners.JavaCaretListener.unintstall(JavaCaretListener.java:126)
	at com.codota.eclipse.assistant.listeners.EditorListenersManager$EditorPartListener.partDeactivated(EditorListenersManager.java:157)
	at org.eclipse.ui.internal.WorkbenchPage$19.run(WorkbenchPage.java:5039)
	at org.eclipse.core.runtime.SafeRunner.run(SafeRunner.java:42)
	at org.eclipse.ui.internal.WorkbenchPage.firePartDeactivated(WorkbenchPage.java:5036)
	at org.eclipse.ui.internal.WorkbenchPage.access$21(WorkbenchPage.java:5020)
	at org.eclipse.ui.internal.WorkbenchPage$E4PartListener.partDeactivated(WorkbenchPage.java:222)
	at org.eclipse.e4.ui.internal.workbench.PartServiceImpl$4.run(PartServiceImpl.java:266)
	at org.eclipse.core.runtime.SafeRunner.run(SafeRunner.java:42)
	at org.eclipse.e4.ui.internal.workbench.PartServiceImpl.firePartDeactivated(PartServiceImpl.java:263)
	at org.eclipse.e4.ui.internal.workbench.PartServiceImpl.activate(PartServiceImpl.java:733)
	at org.eclipse.e4.ui.internal.workbench.PartServiceImpl.setPart(PartServiceImpl.java:218)
	at sun.reflect.GeneratedMethodAccessor47.invoke(Unknown Source)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
	at java.lang.reflect.Method.invoke(Unknown Source)
	at org.eclipse.e4.core.internal.di.MethodRequestor.execute(MethodRequestor.java:55)
	at org.eclipse.e4.core.internal.contexts.ContextObjectSupplier$ContextInjectionListener.update(ContextObjectSupplier.java:90)
	at org.eclipse.e4.core.internal.contexts.TrackableComputationExt.update(TrackableComputationExt.java:111)
	at org.eclipse.e4.core.internal.contexts.EclipseContext.processScheduled(EclipseContext.java:343)
	at org.eclipse.e4.core.internal.contexts.EclipseContext.setParent(EclipseContext.java:418)
	at org.eclipse.e4.ui.workbench.renderers.swt.LazyStackRenderer.showElementRecursive(LazyStackRenderer.java:254)
	at org.eclipse.e4.ui.workbench.renderers.swt.LazyStackRenderer.showTab(LazyStackRenderer.java:162)
	at org.eclipse.e4.ui.workbench.renderers.swt.StackRenderer.showTab(StackRenderer.java:1299)
	at org.eclipse.e4.ui.workbench.renderers.swt.LazyStackRenderer$1.handleEvent(LazyStackRenderer.java:72)
	at org.eclipse.e4.ui.services.internal.events.UIEventHandler$1.run(UIEventHandler.java:40)
	at org.eclipse.swt.widgets.Synchronizer.syncExec(Synchronizer.java:233)
	at org.eclipse.ui.internal.UISynchronizer.syncExec(UISynchronizer.java:145)
	at org.eclipse.swt.widgets.Display.syncExec(Display.java:4813)
	at org.eclipse.e4.ui.internal.workbench.swt.E4Application$1.syncExec(E4Application.java:211)
	at org.eclipse.e4.ui.services.internal.events.UIEventHandler.handleEvent(UIEventHandler.java:36)
	at org.eclipse.equinox.internal.event.EventHandlerWrapper.handleEvent(EventHandlerWrapper.java:201)
	at org.eclipse.equinox.internal.event.EventHandlerTracker.dispatchEvent(EventHandlerTracker.java:197)
	at org.eclipse.equinox.internal.event.EventHandlerTracker.dispatchEvent(EventHandlerTracker.java:1)
	at org.eclipse.osgi.framework.eventmgr.EventManager.dispatchEvent(EventManager.java:230)
	at org.eclipse.osgi.framework.eventmgr.ListenerQueue.dispatchEventSynchronous(ListenerQueue.java:148)
	at org.eclipse.equinox.internal.event.EventAdminImpl.dispatchEvent(EventAdminImpl.java:135)
	at org.eclipse.equinox.internal.event.EventAdminImpl.sendEvent(EventAdminImpl.java:78)
	at org.eclipse.equinox.internal.event.EventComponent.sendEvent(EventComponent.java:39)
	at org.eclipse.e4.ui.services.internal.events.EventBroker.send(EventBroker.java:94)
	at org.eclipse.e4.ui.internal.workbench.UIEventPublisher.notifyChanged(UIEventPublisher.java:60)
	at org.eclipse.emf.common.notify.impl.BasicNotifierImpl.eNotify(BasicNotifierImpl.java:374)
	at org.eclipse.e4.ui.model.application.ui.impl.ElementContainerImpl.setSelectedElement(ElementContainerImpl.java:173)
	at org.eclipse.e4.ui.internal.workbench.ModelServiceImpl.showElementInWindow(ModelServiceImpl.java:617)
	at org.eclipse.e4.ui.internal.workbench.ModelServiceImpl.bringToTop(ModelServiceImpl.java:581)
	at org.eclipse.e4.ui.internal.workbench.PartServiceImpl.delegateBringToTop(PartServiceImpl.java:770)
	at org.eclipse.e4.ui.internal.workbench.PartServiceImpl.activate(PartServiceImpl.java:744)
	at org.eclipse.e4.ui.internal.workbench.PartServiceImpl.activate(PartServiceImpl.java:682)
	at org.eclipse.e4.ui.internal.workbench.PartServiceImpl.activate(PartServiceImpl.java:677)
	at org.eclipse.e4.ui.internal.workbench.PartServiceImpl.bringToTop(PartServiceImpl.java:395)
	at org.eclipse.ui.internal.WorkbenchPage.bringToTop(WorkbenchPage.java:1058)
	at org.eclipse.debug.internal.ui.sourcelookup.SourceLookupFacility.openEditor(SourceLookupFacility.java:470)
	at org.eclipse.debug.internal.ui.sourcelookup.SourceLookupFacility.display(SourceLookupFacility.java:417)
	at org.eclipse.debug.internal.ui.sourcelookup.SourceLookupFacility$SourceDisplayJob.runInUIThread(SourceLookupFacility.java:788)
	at org.eclipse.ui.progress.UIJob$1.run(UIJob.java:97)
	at org.eclipse.swt.widgets.RunnableLock.run(RunnableLock.java:35)
	at org.eclipse.swt.widgets.Synchronizer.runAsyncMessages(Synchronizer.java:182)
	at org.eclipse.swt.widgets.Display.runAsyncMessages(Display.java:4203)
	at org.eclipse.swt.widgets.Display.readAndDispatch(Display.java:3819)
	at org.eclipse.e4.ui.internal.workbench.swt.PartRenderingEngine$4.run(PartRenderingEngine.java:1121)
	at org.eclipse.core.databinding.observable.Realm.runWithDefault(Realm.java:336)
	at org.eclipse.e4.ui.internal.workbench.swt.PartRenderingEngine.run(PartRenderingEngine.java:1022)
	at org.eclipse.e4.ui.internal.workbench.E4Workbench.createAndRunUI(E4Workbench.java:150)
	at org.eclipse.ui.internal.Workbench$5.run(Workbench.java:687)
	at org.eclipse.core.databinding.observable.Realm.runWithDefault(Realm.java:336)
	at org.eclipse.ui.internal.Workbench.createAndRunWorkbench(Workbench.java:604)
	at org.eclipse.ui.PlatformUI.createAndRunWorkbench(PlatformUI.java:148)
	at org.eclipse.ui.internal.ide.application.IDEApplication.start(IDEApplication.java:138)
	at org.eclipse.equinox.internal.app.EclipseAppHandle.run(EclipseAppHandle.java:196)
	at org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.runApplication(EclipseAppLauncher.java:134)
	at org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.start(EclipseAppLauncher.java:104)
	at org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:388)
	at org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:243)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
	at java.lang.reflect.Method.invoke(Unknown Source)
	at org.eclipse.equinox.launcher.Main.invokeFramework(Main.java:673)
	at org.eclipse.equinox.launcher.Main.basicRun(Main.java:610)
	at org.eclipse.equinox.launcher.Main.run(Main.java:1519)

!ENTRY org.eclipse.ui.workbench 4 2 2020-06-14 21:50:22.823
!MESSAGE Problems occurred when invoking code from plug-in: "org.eclipse.ui.workbench".
!STACK 0
java.lang.NullPointerException
	at com.codota.eclipse.assistant.listeners.JavaCaretListener.unintstall(JavaCaretListener.java:126)
	at com.codota.eclipse.assistant.listeners.EditorListenersManager$EditorPartListener.partDeactivated(EditorListenersManager.java:157)
	at org.eclipse.ui.internal.WorkbenchPage$19.run(WorkbenchPage.java:5039)
	at org.eclipse.core.runtime.SafeRunner.run(SafeRunner.java:42)
	at org.eclipse.ui.internal.WorkbenchPage.firePartDeactivated(WorkbenchPage.java:5036)
	at org.eclipse.ui.internal.WorkbenchPage.access$21(WorkbenchPage.java:5020)
	at org.eclipse.ui.internal.WorkbenchPage$E4PartListener.partDeactivated(WorkbenchPage.java:222)
	at org.eclipse.e4.ui.internal.workbench.PartServiceImpl$4.run(PartServiceImpl.java:266)
	at org.eclipse.core.runtime.SafeRunner.run(SafeRunner.java:42)
	at org.eclipse.e4.ui.internal.workbench.PartServiceImpl.firePartDeactivated(PartServiceImpl.java:263)
	at org.eclipse.e4.ui.internal.workbench.PartServiceImpl.activate(PartServiceImpl.java:733)
	at org.eclipse.e4.ui.internal.workbench.PartServiceImpl.setPart(PartServiceImpl.java:218)
	at sun.reflect.GeneratedMethodAccessor47.invoke(Unknown Source)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
	at java.lang.reflect.Method.invoke(Unknown Source)
	at org.eclipse.e4.core.internal.di.MethodRequestor.execute(MethodRequestor.java:55)
	at org.eclipse.e4.core.internal.contexts.ContextObjectSupplier$ContextInjectionListener.update(ContextObjectSupplier.java:90)
	at org.eclipse.e4.core.internal.contexts.TrackableComputationExt.update(TrackableComputationExt.java:111)
	at org.eclipse.e4.core.internal.contexts.EclipseContext.processScheduled(EclipseContext.java:343)
	at org.eclipse.e4.core.internal.contexts.EclipseContext.setParent(EclipseContext.java:418)
	at org.eclipse.e4.ui.workbench.renderers.swt.LazyStackRenderer.showElementRecursive(LazyStackRenderer.java:254)
	at org.eclipse.e4.ui.workbench.renderers.swt.LazyStackRenderer.showTab(LazyStackRenderer.java:162)
	at org.eclipse.e4.ui.workbench.renderers.swt.StackRenderer.showTab(StackRenderer.java:1299)
	at org.eclipse.e4.ui.workbench.renderers.swt.LazyStackRenderer$1.handleEvent(LazyStackRenderer.java:72)
	at org.eclipse.e4.ui.services.internal.events.UIEventHandler$1.run(UIEventHandler.java:40)
	at org.eclipse.swt.widgets.Synchronizer.syncExec(Synchronizer.java:233)
	at org.eclipse.ui.internal.UISynchronizer.syncExec(UISynchronizer.java:145)
	at org.eclipse.swt.widgets.Display.syncExec(Display.java:4813)
	at org.eclipse.e4.ui.internal.workbench.swt.E4Application$1.syncExec(E4Application.java:211)
	at org.eclipse.e4.ui.services.internal.events.UIEventHandler.handleEvent(UIEventHandler.java:36)
	at org.eclipse.equinox.internal.event.EventHandlerWrapper.handleEvent(EventHandlerWrapper.java:201)
	at org.eclipse.equinox.internal.event.EventHandlerTracker.dispatchEvent(EventHandlerTracker.java:197)
	at org.eclipse.equinox.internal.event.EventHandlerTracker.dispatchEvent(EventHandlerTracker.java:1)
	at org.eclipse.osgi.framework.eventmgr.EventManager.dispatchEvent(EventManager.java:230)
	at org.eclipse.osgi.framework.eventmgr.ListenerQueue.dispatchEventSynchronous(ListenerQueue.java:148)
	at org.eclipse.equinox.internal.event.EventAdminImpl.dispatchEvent(EventAdminImpl.java:135)
	at org.eclipse.equinox.internal.event.EventAdminImpl.sendEvent(EventAdminImpl.java:78)
	at org.eclipse.equinox.internal.event.EventComponent.sendEvent(EventComponent.java:39)
	at org.eclipse.e4.ui.services.internal.events.EventBroker.send(EventBroker.java:94)
	at org.eclipse.e4.ui.internal.workbench.UIEventPublisher.notifyChanged(UIEventPublisher.java:60)
	at org.eclipse.emf.common.notify.impl.BasicNotifierImpl.eNotify(BasicNotifierImpl.java:374)
	at org.eclipse.e4.ui.model.application.ui.impl.ElementContainerImpl.setSelectedElement(ElementContainerImpl.java:173)
	at org.eclipse.e4.ui.internal.workbench.ModelServiceImpl.showElementInWindow(ModelServiceImpl.java:617)
	at org.eclipse.e4.ui.internal.workbench.ModelServiceImpl.bringToTop(ModelServiceImpl.java:581)
	at org.eclipse.e4.ui.internal.workbench.PartServiceImpl.delegateBringToTop(PartServiceImpl.java:770)
	at org.eclipse.e4.ui.internal.workbench.PartServiceImpl.activate(PartServiceImpl.java:744)
	at org.eclipse.e4.ui.internal.workbench.PartServiceImpl.activate(PartServiceImpl.java:682)
	at org.eclipse.e4.ui.internal.workbench.PartServiceImpl.activate(PartServiceImpl.java:677)
	at org.eclipse.e4.ui.internal.workbench.PartServiceImpl.bringToTop(PartServiceImpl.java:395)
	at org.eclipse.ui.internal.WorkbenchPage.bringToTop(WorkbenchPage.java:1058)
	at org.eclipse.debug.internal.ui.sourcelookup.SourceLookupFacility.openEditor(SourceLookupFacility.java:470)
	at org.eclipse.debug.internal.ui.sourcelookup.SourceLookupFacility.display(SourceLookupFacility.java:417)
	at org.eclipse.debug.internal.ui.sourcelookup.SourceLookupFacility$SourceDisplayJob.runInUIThread(SourceLookupFacility.java:788)
	at org.eclipse.ui.progress.UIJob$1.run(UIJob.java:97)
	at org.eclipse.swt.widgets.RunnableLock.run(RunnableLock.java:35)
	at org.eclipse.swt.widgets.Synchronizer.runAsyncMessages(Synchronizer.java:182)
	at org.eclipse.swt.widgets.Display.runAsyncMessages(Display.java:4203)
	at org.eclipse.swt.widgets.Display.readAndDispatch(Display.java:3819)
	at org.eclipse.e4.ui.internal.workbench.swt.PartRenderingEngine$4.run(PartRenderingEngine.java:1121)
	at org.eclipse.core.databinding.observable.Realm.runWithDefault(Realm.java:336)
	at org.eclipse.e4.ui.internal.workbench.swt.PartRenderingEngine.run(PartRenderingEngine.java:1022)
	at org.eclipse.e4.ui.internal.workbench.E4Workbench.createAndRunUI(E4Workbench.java:150)
	at org.eclipse.ui.internal.Workbench$5.run(Workbench.java:687)
	at org.eclipse.core.databinding.observable.Realm.runWithDefault(Realm.java:336)
	at org.eclipse.ui.internal.Workbench.createAndRunWorkbench(Workbench.java:604)
	at org.eclipse.ui.PlatformUI.createAndRunWorkbench(PlatformUI.java:148)
	at org.eclipse.ui.internal.ide.application.IDEApplication.start(IDEApplication.java:138)
	at org.eclipse.equinox.internal.app.EclipseAppHandle.run(EclipseAppHandle.java:196)
	at org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.runApplication(EclipseAppLauncher.java:134)
	at org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.start(EclipseAppLauncher.java:104)
	at org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:388)
	at org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:243)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
	at java.lang.reflect.Method.invoke(Unknown Source)
	at org.eclipse.equinox.launcher.Main.invokeFramework(Main.java:673)
	at org.eclipse.equinox.launcher.Main.basicRun(Main.java:610)
	at org.eclipse.equinox.launcher.Main.run(Main.java:1519)
